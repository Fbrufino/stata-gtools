[Hardware and software specifications]

Program:   Stata/MP 14.2 (8 cores)
OS:        x86_64 GNU/Linux
Processor: Intel(R) Xeon(R) CPU E5-4617 0 @ 2.90GHz
Cores:     4 hexa-cores sockets (24 cores).
Memory:    220GiB
Swap:      298GiB

[This log file has been edited for the sake of readability]

. do gtools_tests.do

. * ---------------------------------------------------------------------
. * Project: gtools
. * Program: gtools_tests.do
. * Author:  Mauricio Caceres Bravo <mauricio.caceres.bravo@gmail.com>
. * Created: Tue May 16 07:23:02 EDT 2017
. * Updated: Sat May 20 14:03:27 EDT 2017
. * Purpose: Unit tests for gtools
. * Version: 0.3.1
. * Manual:  help gcollapse, help gegen
.
. * Stata start-up options
. * ----------------------
.
. version 13

. clear all

. set more off

. set varabbrev off

. capture log close _all

. set seed 42

. do test_gcollapse.do

[cut for space]

. do test_gegen.do

[cut for space]

. do bench_gcollapse.do

[cut for space]

Start: 01:08:18 21 May 2017

. di `c(processors)'
8

. bench_ftools y1 y2 y3 y4 y5 y6 y7 y8 y9 y10 y11 y12 y13 y14 y15, by(x3) kmin(4) kmax(7) kvars(15)

Benchmarking N for J = 100; by(x3)
    vars  = y1 y2 y3 y4 y5 y6 y7 y8 y9 y10 y11 y12 y13 y14 y15
    stats = sum
                   20,000 gcollapse  (.07)  collapse  (.115)  fcollapse  (.359)
                  200,000 gcollapse  (.173)  collapse  (.618)  fcollapse  (.323)
                2,000,000 gcollapse  (2.452)  collapse  (7.024)  fcollapse  (3.314)
               20,000,000 gcollapse  (20.225)  collapse  (89.45)  fcollapse  (42.752)
Results varying N for J = 100; by(x3)
|              N | gcollapse |  collapse | fcollapse | ratio (f/g) | ratio (c/g) |
| -------------- | --------- | --------- | --------- | ----------- | ----------- |
|         20,000 |      0.07 |      0.12 |      0.36 |        5.13 |        1.64 |
|        200,000 |      0.17 |      0.62 |      0.32 |        1.87 |        3.57 |
|      2,000,000 |      2.45 |      7.02 |      3.31 |        1.35 |        2.86 |
|     20,000,000 |     20.23 |     89.45 |     42.75 |        2.11 |        4.42 |

. bench_ftools y1 y2 y3, by(x3)    kmin(4) kmax(7) kvars(3) stats(mean median)

Benchmarking N for J = 100; by(x3)
    vars  = y1 y2 y3
    stats = mean median
                   20,000 gcollapse  (.01)  collapse  (.072)  fcollapse  (.127)
                  200,000 gcollapse  (.102)  collapse  (.799)  fcollapse  (.359)
                2,000,000 gcollapse  (.951)  collapse  (8.824)  fcollapse  (3.69)
               20,000,000 gcollapse  (12.347)  collapse  (117.782)  fcollapse  (43.341)
Results varying N for J = 100; by(x3)
|              N | gcollapse |  collapse | fcollapse | ratio (f/g) | ratio (c/g) |
| -------------- | --------- | --------- | --------- | ----------- | ----------- |
|         20,000 |      0.01 |      0.07 |      0.13 |       12.70 |        7.20 |
|        200,000 |      0.10 |      0.80 |      0.36 |        3.52 |        7.83 |
|      2,000,000 |      0.95 |      8.82 |      3.69 |        3.88 |        9.28 |
|     20,000,000 |     12.35 |    117.78 |     43.34 |        3.51 |        9.54 |

. bench_group_size x1 x2,  by(groupstr) obsexp(6) kmax(6) pct(median iqr p23 p77)

Benchmarking J for N = 5,000,000; by(group)
    vars  = x1 x2
    stats = sum mean max min count percent first last firstnm lastnm median iqr p23 p77
                       10 gcollapse  (4.421)  collapse  (338.193)  fcollapse  (28.969)
                      100 gcollapse  (8.1)  collapse  (322.816)  fcollapse  (23.569)
                    1,000 gcollapse  (12.941)  collapse  (311.749)  fcollapse  (20.897)
                   10,000 gcollapse  (13.131)  collapse  (298.154)  fcollapse  (19.262)
                  100,000 gcollapse  (7.994)  collapse  (311.575)  fcollapse  (26.963)
                1,000,000 gcollapse  (14.038)  collapse  (327.284)  fcollapse  (107.728)
Results varying J for N = 5,000,000; by(group)
|              J | gcollapse |  collapse | fcollapse | ratio (f/g) | ratio (c/g) |
| -------------- | --------- | --------- | --------- | ----------- | ----------- |
|             10 |      4.42 |    338.19 |     28.97 |        6.55 |       76.50 |
|            100 |      8.10 |    322.82 |     23.57 |        2.91 |       39.85 |
|          1,000 |     12.94 |    311.75 |     20.90 |        1.61 |       24.09 |
|         10,000 |     13.13 |    298.15 |     19.26 |        1.47 |       22.71 |
|        100,000 |      7.99 |    311.57 |     26.96 |        3.37 |       38.98 |
|      1,000,000 |     14.04 |    327.28 |    107.73 |        7.67 |       23.31 |

. bench_sample_size x1 x2, by(groupstr) kmin(4)   kmax(7) pct(median iqr p23 p77)

Benchmarking N for J = 10; by(group)
    vars  = x1 x2
    stats = sum mean max min count percent first last firstnm lastnm median iqr p23 p77
                   20,000 gcollapse  (.041)  collapse  (.911)  fcollapse  (.117)
                  200,000 gcollapse  (.353)  collapse  (9.108)  fcollapse  (.837)
                2,000,000 gcollapse  (4.7)  collapse  (117.177)  fcollapse  (10.128)
               20,000,000 gcollapse  (40.738)  collapse  (1524.7)  fcollapse  (142.142)
Results varying N for J = 10; by(group)
|              N | gcollapse |  collapse | fcollapse | ratio (f/g) | ratio (c/g) |
| -------------- | --------- | --------- | --------- | ----------- | ----------- |
|         20,000 |      0.04 |      0.91 |      0.12 |        2.85 |       22.22 |
|        200,000 |      0.35 |      9.11 |      0.84 |        2.37 |       25.80 |
|      2,000,000 |      4.70 |    117.18 |     10.13 |        2.15 |       24.93 |
|     20,000,000 |     40.74 |   1524.70 |    142.14 |        3.49 |       37.43 |
