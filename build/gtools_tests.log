
  ___  ____  ____  ____  ____ (R)
 /__    /   ____/   /   ____/
___/   /   /___/   /   /___/   13.1   Copyright 1985-2013 StataCorp LP
  Statistics/Data Analysis            StataCorp
                                      4905 Lakeway Drive
                                      College Station, Texas 77845 USA
                                      800-STATA-PC        http://www.stata.com
                                      979-696-4600        stata@stata.com
                                      979-696-4601 (fax)

Single-user Stata perpetual license:
       Serial number:  301306294610
         Licensed to:  Mauricio Caceres
                       mauricio.caceres.bravo@gmail.com

Notes:
      1.  Command line editing disabled
      2.  Stata running in batch mode

Note:  Your site can add messages to the introduction by editing the file
       stata.msg in the directory where Stata is installed.

. do gtools_tests.do 

. * ---------------------------------------------------------------------
. * Project: gtools
. * Program: gtools_tests.do
. * Author:  Mauricio Caceres Bravo <mauricio.caceres.bravo@gmail.com>
. * Created: Tue May 16 07:23:02 EDT 2017
. * Updated: Fri Jun 16 17:37:39 EDT 2017
. * Purpose: Unit tests for gtools
. * Version: 0.6.5
. * Manual:  help gcollapse, help gegen
. 
. * Stata start-up options
. * ----------------------
. 
. version 13

. clear all

. set more off

. set varabbrev off

. * set seed 42
. set seed 1729

. set linesize 128

. 
. * Main program wrapper
. * --------------------
. 
. program main
  1.     syntax, [CAPture NOIsily *]
  2. 
.     * Set up
.     * ------
. 
.     local  progname tests
  3.     local  start_time "$S_TIME $S_DATE"
  4.     di "Start: `start_time'"
  5. 
.     * Run the things
.     * --------------
. 
.     `capture' `noisily' {
  6.         * do test_gcollapse.do
.         * do test_gegen.do
.         * do bench_gcollapse.do
.         if ( `:list posof "checks" in options' ) {
  7.             checks_byvars_gcollapse,  debug_force_single
  8.             checks_options_gcollapse, debug_force_single
  9.             if !inlist("`c(os)'", "Windows") {
 10.                 checks_byvars_gcollapse,  debug_force_multi
 11.                 checks_options_gcollapse, debug_force_multi
 12.             }
 13. 
.             checks_options_gegen, debug_force_single
 14.             if !inlist("`c(os)'", "Windows") {
 15.                 checks_options_gegen, debug_force_multi
 16.             }
 17. 
.             checks_consistency_gcollapse, debug_checkhash
 18.             checks_consistency_gcollapse, forceio debug_io_read_method(0)
 19.             checks_consistency_gcollapse, forceio debug_io_read_method(1)
 20.             checks_consistency_gcollapse, debug_io_check(1) debug_io_threshold(0)
 21.             checks_consistency_gcollapse, debug_io_check(1) debug_io_threshold(1000000)
 22.             checks_consistency_gcollapse, debug_force_single
 23.             if !inlist("`c(os)'", "Windows") {
 24.                 checks_consistency_gcollapse, debug_force_multi
 25.             }
 26. 
.             checks_consistency_gegen, debug_force_single b
 27.             if !inlist("`c(os)'", "Windows") {
 28.                 checks_consistency_gegen, debug_force_multi  b
 29.             }
 30.         }
 31. 
.         if ( `:list posof "test" in options' ) {
 32.             cap ssc install ftools
 33.             cap ssc install moremata
 34. 
.             di "Short (quick) versions of the benchmarks"
 35.             bench_ftools y1 y2 y3 y4 y5 y6 y7 y8 y9 y10 y11 y12 y13 y14 y15, by(x3) kmin(3) kmax(4) kvars(15)
 36.             bench_ftools y1 y2 y3,          by(x3) kmin(3) kmax(4) kvars(3) stats(mean median)
 37.             bench_ftools y1 y2 y3 y4 y5 y6, by(x3) kmin(3) kmax(4) kvars(6) stats(sum mean count min max)
 38.             bench_sample_size x1 x2, by(group) kmin(3) kmax(4) pct(median iqr p23 p77)
 39.             bench_group_size  x1 x2, by(group) kmin(2) kmax(3) pct(median iqr p23 p77) obsexp(3)
 40. 
.             bench_switch_fcoll y1 y2 y3 y4 y5 y6 y7 y8 y9 y10 y11 y12 y13 y14 y15, by(x3) kmin(3) kmax(4) kvars(15) style(ftoo
> ls)
 41.             bench_switch_fcoll y1 y2 y3,          by(x3)    kmin(3) kmax(4) kvars(3) stats(mean median)             style(f
> tools)
 42.             bench_switch_fcoll y1 y2 y3 y4 y5 y6, by(x3)    kmin(3) kmax(4) kvars(6) stats(sum mean count min max)  style(f
> tools)
 43.             bench_switch_fcoll x1 x2, margin(N)   by(group) kmin(3) kmax(4) pct(median iqr p23 p77)                 style(g
> tools)
 44.             bench_switch_fcoll x1 x2, margin(J)   by(group) kmin(2) kmax(3) pct(median iqr p23 p77) obsexp(3)       style(g
> tools)
 45.         }
 46. 
.         if ( `:list posof "benchmark" in options' ) {
 47.             cap ssc install ftools
 48.             cap ssc install moremata
 49. 
.             bench_ftools y1 y2 y3 y4 y5 y6 y7 y8 y9 y10 y11 y12 y13 y14 y15, by(x3) kmin(4) kmax(7) kvars(15)
 50.             bench_ftools y1 y2 y3,             by(x3)    kmin(4) kmax(7) kvars(3) stats(mean median)
 51.             bench_ftools y1 y2 y3 y4 y5 y6,    by(x3)    kmin(4) kmax(7) kvars(6) stats(sum mean count min max)
 52.             bench_sample_size x1 x2, margin(N) by(group) kmin(4) kmax(7) pct(median iqr p23 p77)
 53.             bench_group_size  x1 x2, margin(J) by(group) kmin(3) kmax(6) pct(median iqr p23 p77) obsexp(6)
 54.         }
 55. 
.         if ( `:list posof "bench_fcoll" in options' ) {
 56.             cap ssc install ftools
 57.             cap ssc install moremata
 58. 
.             bench_switch_fcoll y1 y2 y3 y4 y5 y6 y7 y8 y9 y10 y11 y12 y13 y14 y15, by(x3) kmin(4) kmax(7) kvars(15) style(ftoo
> ls)
 59.             bench_switch_fcoll y1 y2 y3,          by(x3)  kmin(4) kmax(7) kvars(3) stats(mean median)               style(f
> tools)
 60.             bench_switch_fcoll y1 y2 y3 y4 y5 y6, by(x3)  kmin(4) kmax(7) kvars(6) stats(sum mean count min max)    style(f
> tools)
 61.             bench_switch_fcoll x1 x2, margin(N) by(group) kmin(4) kmax(7) pct(median iqr p23 p77)                   style(g
> tools)
 62.             bench_switch_fcoll x1 x2, margin(J) by(group) kmin(1) kmax(6) pct(median iqr p23 p77) obsexp(6)         style(g
> tools)
 63.         }
 64.     }
 65.     local rc = _rc
 66. 
.     exit_message, rc(`rc') progname(`progname') start_time(`start_time') `capture'
 67.     exit `rc'
 68. end

. 
. capture program drop exit_message

. program exit_message
  1.     syntax, rc(int) progname(str) start_time(str) [CAPture]
  2.     local end_time "$S_TIME $S_DATE"
  3.     local time     "Start: `start_time'" _n(1) "End: `end_time'"
  4.     di ""
  5.     if (`rc' == 0) {
  6.         di "End: $S_TIME $S_DATE"
  7.         local paux      ran
  8.         local message "`progname' finished running" _n(2) "`time'"
  9.         local subject "`progname' `paux'"
 10.     }
 11.     else if ("`capture'" == "") {
 12.         di "WARNING: $S_TIME $S_DATE"
 13.         local paux ran with non-0 exit status
 14.         local message "`progname' ran but Stata gave error code r(`rc')" _n(2) "`time'"
 15.         local subject "`progname' `paux'"
 16.     }
 17.     else {
 18.         di "ERROR: $S_TIME $S_DATE"
 19.         local paux ran with errors
 20.         local message "`progname' stopped with error code r(`rc')" _n(2) "`time'"
 21.         local subject "`progname' `paux'"
 22.     }
 23.     di "`subject'"
 24.     di ""
 25.     di "`message'"
 26. end

. 
. * Wrapper for easy timer use
. cap program drop mytimer

. program mytimer, rclass
  1.     * args number what step
.     syntax anything, [minutes ts]
  2. 
.     tokenize `anything'
  3.     local number `1'
  4.     local what   `2'
  5.     local step   `3'
  6. 
.     if ("`what'" == "end") {
  7.         qui {
  8.             timer clear `number'
  9.             timer off   `number'
 10.         }
 11.         if ("`ts'" == "ts") mytimer_ts `step'
 12.     }
 13.     else if ("`what'" == "info") {
 14.         qui {
 15.             timer off `number'
 16.             timer list `number'
 17.         }
 18.         local seconds = r(t`number')
 19.         local prints  `:di trim("`:di %21.2gc `seconds''")' seconds
 20.         if ("`minutes'" != "") {
 21.             local minutes = `seconds' / 60
 22.             local prints  `:di trim("`:di %21.3gc `minutes''")' minutes
 23.         }
 24.         mytimer_ts Step `step' took `prints'
 25.         qui {
 26.             timer clear `number'
 27.             timer on    `number'
 28.         }
 29.     }
 30.     else {
 31.         qui {
 32.             timer clear `number'
 33.             timer on    `number'
 34.             timer off   `number'
 35.             timer list  `number'
 36.             timer on    `number'
 37.         }
 38.         if ("`ts'" == "ts") mytimer_ts `step'
 39.     }
 40. end

. 
. capture program drop mytimer_ts

. program mytimer_ts
  1.     display _n(1) "{hline 79}"
  2.     if ("`0'" != "") display `"`0'"'
  3.     display `"        Base: $S_FN"'
  4.     display  "        In memory: `:di trim("`:di %21.0gc _N'")' observations"
  5.     display  "        Timestamp: $S_TIME $S_DATE"
  6.     display  "{hline 79}" _n(1)
  7. end

. 
. capture program drop sim

. program sim, rclass
  1.     syntax, [offset(str) n(int 100) nj(int 10) njsub(int 2) string float sortg replace groupmiss outmiss]
  2.     qui {
  3.         if ("`offset'" == "") local offset 0
  4.         clear
  5.         set obs `n'
  6.         gen group  = ceil(`nj' *  _n / _N) + `offset'
  7.         bys group: gen groupsub   = ceil(`njsub' *  _n / _N)
  8.         bys group: gen groupfloat = ceil(`njsub' *  _n / _N) + 0.5
  9.         gen rsort = runiform() - 0.5
 10.         gen rnorm = rnormal()
 11.         if ("`sortg'" == "")  sort rsort
 12.         if ("`groupmiss'" != "") replace group = . if runiform() < 0.1
 13.         if ("`outmiss'" != "") replace rsort = . if runiform() < 0.1
 14.         if ("`outmiss'" != "") replace rnorm = . if runiform() < 0.1
 15.         if ("`float'" != "")  replace group = group / `nj'
 16.         if ("`string'" != "") {
 17.             tostring group, `:di cond("`replace'" == "", "gen(groupstr)", "replace")'
 18.             local target `:di cond("`replace'" == "", "groupstr", "group")'
 19.             replace `target' = "i am a modesly long string" + `target'
 20.         }
 21.         gen long grouplong = ceil(`nj' *  _n / _N) + `offset'
 22.     }
 23.     sum rsort
 24.     di "Obs = " trim("`:di %21.0gc _N'") "; Groups = " trim("`:di %21.0gc `nj''")
 25.     compress
 26.     return local n  = `n'
 27.     return local nj = `nj'
 28.     return local offset = `offset'
 29.     return local string = ("`string'" != "")
 30. end

. 
. capture program drop checks_consistency_gcollapse

. program checks_consistency_gcollapse
  1.     syntax, [tol(real 1e-6) NOIsily *]
  2.     di _n(1) "{hline 80}" _n(1) "checks_consistency_gcollapse `options'" _n(1) "{hline 80}" _n(1)
  3. 
.     local stats sum mean sd max min count percent first last firstnm lastnm median iqr
  4.     local collapse_str ""
  5.     foreach stat of local stats {
  6.         local collapse_str `collapse_str' (`stat') `stat' = rnorm
  7.     }
  8.     local collapse_str `collapse_str' (p23) p23 = rnorm
  9.     local collapse_str `collapse_str' (p77) p77 = rnorm
 10. 
.     sim, n(50000) nj(8) njsub(4) string groupmiss outmiss
 11.     mytimer 9
 12.     qui `noisily' foreach i in 0 3 6 9 {
 13.         if (`i' == 0) local by groupsub groupstr
 14.         if (`i' == 3) local by groupstr
 15.         if (`i' == 6) local by groupsub group
 16.         if (`i' == 9) local by grouplong
 17.     preserve
 18.         mytimer 9 info
 19.         gcollapse `collapse_str', by(`by') verbose benchmark `options'
 20.         mytimer 9 info "gcollapse to groups"
 21.         tempfile f`i'
 22.         save `f`i''
 23.     * I originally was also testing fcollapse, but it can't do sd for
.     * some reason, and you can't mix string and numeric variables...
.     * restore, preserve
.     *     mytimer 9 info
.     *     if (`i' != 0) {
.     *         fcollapse `collapse_str', by(`by') verbose
.     *         mytimer 9 info "fcollapse to groups"
.     *         tempfile f`:di `i' + 1'
.     *         save `f`:di `i' + 1''
.     *     }
.     restore, preserve
 24.         mytimer 9 info
 25.         collapse `collapse_str', by(`by')
 26.         mytimer 9 info "collapse to groups"
 27.         tempfile f`:di `i' + 2'
 28.         save `f`:di `i' + 2''
 29.     restore
 30.     }
 31.     mytimer 9 off
 32. 
.     sim, n(50000) nj(8000) njsub(4) string groupmiss outmiss
 33.     qui `noisily' foreach i in 12 15 18 21 {
 34.         if (`i' == 12) local by groupsub groupstr
 35.         if (`i' == 15) local by groupstr
 36.         if (`i' == 18) local by groupsub group
 37.         if (`i' == 21) local by grouplong
 38.     preserve
 39.         mytimer 9 info
 40.         gcollapse `collapse_str', by(`by') verbose benchmark `options'
 41.         mytimer 9 info "gcollapse 2 groups"
 42.         tempfile f`i'
 43.         save `f`i''
 44.     * restore, preserve
.     *     mytimer 9 info
.     *     if (`i' != 12) {
.     *         fcollapse `collapse_str', by(`by') verbose
.     *         mytimer 9 info "fcollapse to groups"
.     *         tempfile f`:di `i' + 1'
.     *         save `f`:di `i' + 1''
.     *     }
.     restore, preserve
 45.         mytimer 9 info
 46.         collapse `collapse_str', by(`by')
 47.         mytimer 9 info "collapse to groups"
 48.         tempfile f`:di `i' + 2'
 49.         save `f`:di `i' + 2''
 50.     restore
 51.     }
 52. 
.     foreach i in 0 3 6 9 12 15 18 21 {
 53.     preserve
 54.     use `f`:di `i' + 2'', clear
 55.         local bad_any = 0
 56.         if (`i' == 0)  local bad groupsub groupstr
 57.         if (`i' == 3)  local bad groupstr
 58.         if (`i' == 6)  local bad groupsub group
 59.         if (`i' == 9)  local bad grouplong
 60.         if (`i' == 12) local bad groupsub groupstr
 61.         if (`i' == 15) local bad groupstr
 62.         if (`i' == 18) local bad groupsub group
 63.         if (`i' == 21) local bad grouplong
 64.         local by `bad'
 65.         foreach var in `stats' p23 p77 {
 66.             rename `var' c_`var'
 67.         }
 68.         qui merge 1:1 `by' using `f`i'', assert(3)
 69.         foreach var in `stats' p23 p77 {
 70.             qui count if ( (abs(`var' - c_`var') > `tol') & (`var' != c_`var'))
 71.             if ( `r(N)' > 0 ) {
 72.                 gen bad_`var' = abs(`var' - c_`var') * (`var' != c_`var')
 73.                 local bad `bad' *`var'
 74.                 di "`var' has `:di r(N)' mismatches".
 75.                 local bad_any = 1
 76.             }
 77.         }
 78.         if ( `bad_any' ) {
 79.             order `bad'
 80.             egen bad_any = rowmax(bad_*)
 81.             l *count* `bad' if bad_any
 82.             sum bad_*
 83.             exit 9
 84.         }
 85.         else {
 86.             di "gcollapse produced identical data to collapse (tol = `tol', `by')"
 87.         }
 88.     restore
 89.     }
 90. 
.     * foreach i in 4 7 10 16 19 22 {
.     * preserve
.     * use `f`:di `i' + 1'', clear
.     *     local bad_any = 0
.     *     if (`i' == 4)  local bad groupstr
.     *     if (`i' == 7)  local bad groupsub group
.     *     if (`i' == 10) local bad grouplong
.     *     if (`i' == 16) local bad groupstr
.     *     if (`i' == 19) local bad groupsub group
.     *     if (`i' == 22) local bad grouplong
.     *     local by `bad'
.     *     foreach var in `stats' p23 p77 {
.     *         rename `var' c_`var'
.     *     }
.     *     qui merge 1:1 `bad' using `f`i'', assert(3)
.     *     foreach var in `stats' p23 p77 {
.     *         qui count if ( (abs(`var' - c_`var') > `tol') & (`var' != c_`var'))
.     *         if ( `r(N)' > 0 ) {
.     *             gen bad_`var' = abs(`var' - c_`var') * (`var' != c_`var')
.     *             local bad `bad' *`var'
.     *             di "`var' has `:di r(N)' mismatches".
.     *             local bad_any = 1
.     *         }
.     *     }
.     *     if ( `bad_any' ) {
.     *         order `bad'
.     *         egen bad_any = rowmax(bad_*)
.     *         l *count* `bad' if bad_any & _n < 100
.     *         sum bad_*
.     *         di "fcollapse produced different data to collapse (tol = `tol', `by')"
.     *     }
.     *     else {
.     *         di "fcollapse produced identical data to collapse (tol = `tol', `by')"
.     *     }
.     * restore
.     * }
. 
.     di ""
 91.     di as txt "Passed! checks_consistency_gcollapse `options'"
 92. end

. 
. capture program drop checks_byvars_gcollapse

. program checks_byvars_gcollapse
  1.     syntax, [*]
  2.     di _n(1) "{hline 80}" _n(1) "checks_byvars_gcollapse `options'" _n(1) "{hline 80}" _n(1)
  3. 
.     sim, n(1000) nj(250) string
  4.     set rmsg on
  5.     preserve
  6.         gcollapse (mean) rnorm (sum) sum = rnorm (sd) sd = rnorm, by(groupsub) verbose `options'
  7.     restore, preserve
  8.         gcollapse (mean) rnorm (sum) sum = rnorm (sd) sd = rnorm, by(group) verbose `options'
  9.     restore, preserve
 10.         gcollapse (mean) rnorm (sum) sum = rnorm (sd) sd = rnorm, by(groupstr) verbose `options'
 11.     restore, preserve
 12.         gcollapse (mean) rnorm (sum) sum = rnorm (sd) sd = rnorm, by(grouplong) verbose `options'
 13.     restore, preserve
 14.         gcollapse (mean) rnorm (sum) sum = rnorm (sd) sd = rnorm, by(groupsub) verbose `options'
 15.     restore, preserve
 16.         gcollapse (mean) rnorm (sum) sum = rnorm (sd) sd = rnorm, by(group groupsub) verbose `options'
 17.     restore, preserve
 18.         gcollapse (mean) rnorm (sum) sum = rnorm (sd) sd = rnorm, by(grouplong groupsub) verbose `options'
 19.     restore, preserve
 20.         gcollapse (mean) rnorm (sum) sum = rnorm (sd) sd = rnorm, by(groupstr groupsub) verbose `options'
 21.     restore
 22.     set rmsg off
 23. 
. 
.     di ""
 24.     di as txt "Passed! checks_byvars_gcollapse `options'"
 25. end

. 
. capture program drop checks_options_gcollapse

. program checks_options_gcollapse
  1.     syntax, [*]
  2.     di _n(1) "{hline 80}" _n(1) "checks_options_gcollapse `options'" _n(1) "{hline 80}" _n(1)
  3. 
.     local stats mean count median iqr
  4.     local collapse_str ""
  5.     foreach stat of local stats {
  6.         local collapse_str `collapse_str' (`stat') `stat' = rnorm `stat'2 = rnorm
  7.     }
  8. 
.     sim, n(200) nj(10) string outmiss
  9.     preserve
 10.         gcollapse `collapse_str', by(groupstr) verbose benchmark `options'
 11.         if ( `=_N' > 10 ) l in 1/10
 12.         if ( `=_N' < 10 ) l
 13.     restore, preserve
 14.         gcollapse `collapse_str', by(groupstr) verbose forceio `options'
 15.         if ( `=_N' > 10 ) l in 1/10
 16.         if ( `=_N' < 10 ) l
 17.     restore, preserve
 18.         gcollapse `collapse_str', by(groupstr) verbose forcemem `options'
 19.         if ( `=_N' > 10 ) l in 1/10
 20.         if ( `=_N' < 10 ) l
 21.     restore, preserve
 22.         gcollapse `collapse_str', by(groupstr) verbose unsorted `options'
 23.         if ( `=_N' > 10 ) l in 1/10
 24.         if ( `=_N' < 10 ) l
 25.     restore, preserve
 26.         gcollapse `collapse_str', by(groupstr) verbose benchmark cw `options'
 27.         if ( `=_N' > 10 ) l in 1/10
 28.         if ( `=_N' < 10 ) l
 29.     restore, preserve
 30.         gcollapse `collapse_str', by(groupstr) double `options'
 31.         if ( `=_N' > 10 ) l in 1/10
 32.         if ( `=_N' < 10 ) l
 33.     restore, preserve
 34.         gcollapse `collapse_str', by(groupstr) merge `options'
 35.         if ( `=_N' > 10 ) l in 1/10
 36.         if ( `=_N' < 10 ) l
 37.     restore
 38. 
.     sort groupstr groupsub
 39.     preserve
 40.         gcollapse `collapse_str', by(groupstr groupsub) verbose benchmark `options'
 41.         if ( `=_N' > 10 ) l in 1/10
 42.         if ( `=_N' < 10 ) l
 43.     restore, preserve
 44.         gcollapse `collapse_str', by(groupstr groupsub) verbose benchmark smart `options'
 45.         if ( `=_N' > 10 ) l in 1/10
 46.         if ( `=_N' < 10 ) l
 47.     restore, preserve
 48.         gcollapse `collapse_str', by(groupsub groupstr) verbose benchmark smart `options'
 49.         if ( `=_N' > 10 ) l in 1/10
 50.         if ( `=_N' < 10 ) l
 51.     restore, preserve
 52.         gcollapse `collapse_str', by(groupstr) verbose benchmark `options'
 53.         if ( `=_N' > 10 ) l in 1/10
 54.         if ( `=_N' < 10 ) l
 55.     restore, preserve
 56.         gcollapse `collapse_str', by(groupstr) verbose benchmark smart `options'
 57.         if ( `=_N' > 10 ) l in 1/10
 58.         if ( `=_N' < 10 ) l
 59.     restore, preserve
 60.         gcollapse `collapse_str', by(groupsub) verbose benchmark smart `options'
 61.         if ( `=_N' > 10 ) l in 1/10
 62.         if ( `=_N' < 10 ) l
 63.     restore, preserve
 64.         gcollapse `collapse_str', by(groupsub) verbose benchmark `options'
 65.         if ( `=_N' > 10 ) l in 1/10
 66.         if ( `=_N' < 10 ) l
 67.     restore
 68. 
.     di ""
 69.     di as txt "Passed! checks_options_gcollapse `options'"
 70. end

. 
. * TODO: Edge cases (nothing in anything, no -by-, should mimic collapse // 2017-05-16 08:03 EDT
. capture program drop sim

. program sim, rclass
  1.     syntax, [offset(str) n(int 100) nj(int 10) njsub(int 2) string float sortg replace groupmiss outmiss]
  2.     qui {
  3.         if ("`offset'" == "") local offset 0
  4.         clear
  5.         set obs `n'
  6.         gen group  = ceil(`nj' *  _n / _N) + `offset'
  7.         bys group: gen groupsub   = ceil(`njsub' *  _n / _N)
  8.         bys group: gen groupfloat = ceil(`njsub' *  _n / _N) + 0.5
  9.         gen rsort = runiform() - 0.5
 10.         gen rnorm = rnormal()
 11.         if ("`sortg'" == "")  sort rsort
 12.         if ("`groupmiss'" != "") replace group = . if runiform() < 0.1
 13.         if ("`outmiss'" != "") replace rsort = . if runiform() < 0.1
 14.         if ("`outmiss'" != "") replace rnorm = . if runiform() < 0.1
 15.         if ("`float'" != "")  replace group = group / `nj'
 16.         if ("`string'" != "") {
 17.             tostring group, `:di cond("`replace'" == "", "gen(groupstr)", "replace")'
 18.             local target `:di cond("`replace'" == "", "groupstr", "group")'
 19.             replace `target' = "i am a modesly long string" + `target'
 20.         }
 21.         gen long grouplong = ceil(`nj' *  _n / _N) + `offset'
 22.     }
 23.     sum rsort
 24.     di "Obs = " trim("`:di %21.0gc _N'") "; Groups = " trim("`:di %21.0gc `nj''")
 25.     compress
 26.     return local n  = `n'
 27.     return local nj = `nj'
 28.     return local offset = `offset'
 29.     return local string = ("`string'" != "")
 30. end

. 
. capture program drop checks_consistency_gegen

. program checks_consistency_gegen
  1.     syntax, [tol(real 1e-6) *]
  2.     di _n(1) "{hline 80}" _n(1) "checks_consistency_gegen `options'" _n(1) "{hline 80}" _n(1)
  3. 
.     local stats total sum mean sd max min count median iqr
  4.     sim, n(500000) nj(10000) njsub(4) string groupmiss outmiss
  5. 
.     cap drop g*_*
  6.     cap drop c*_*
  7.     di "Checking full range"
  8.     foreach fun of local stats {
  9.         qui gegen g_`fun' = `fun'(rnorm), by(groupstr groupsub) `options'
 10.         qui  egen c_`fun' = `fun'(rnorm), by(groupstr groupsub)
 11.         cap noi assert (g_`fun' == c_`fun') | abs(g_`fun' - c_`fun') < `tol'
 12.         if ( _rc ) {
 13.             di as err "`fun' failed! (tol = `tol')"
 14.             exit _rc
 15.         }
 16.         else di as txt "    `fun' was OK"
 17.     }
 18. 
.     foreach p in 10 30 70 90 {
 19.         qui gegen g_p`p' = pctile(rnorm), by(groupstr groupsub) p(`p') `options'
 20.         qui  egen c_p`p' = pctile(rnorm), by(groupstr groupsub) p(`p')
 21.         cap noi assert (g_p`p' == c_p`p') | abs(g_p`p' - c_p`p') < `tol'
 22.         if ( _rc ) {
 23.             di as err "percentile `p' failed! (tol = `tol')"
 24.             exit _rc
 25.         }
 26.         else di as txt "    percentile `p' was OK"
 27.     }
 28. 
.     local fun tag
 29.     {
 30.         qui gegen g_`fun' = `fun'(groupstr groupsub), v `options'
 31.         qui  egen c_`fun' = `fun'(groupstr groupsub)
 32.         cap noi assert (g_`fun' == c_`fun') | abs(g_`fun' - c_`fun') < `tol'
 33.         if ( _rc ) {
 34.             di as err "`fun' failed! (tol = `tol')"
 35.             exit _rc
 36.         }
 37.         else di as txt "    `fun' was OK"
 38.     }
 39. 
.     cap drop g*_*
 40.     cap drop c*_*
 41.     di "Checking if range"
 42.     foreach fun of local stats {
 43.         qui gegen gif_`fun' = `fun'(rnorm) if rsort > 0, by(groupstr groupsub) `options'
 44.         qui  egen cif_`fun' = `fun'(rnorm) if rsort > 0, by(groupstr groupsub)
 45.         cap noi assert (gif_`fun' == cif_`fun') | abs(gif_`fun' - cif_`fun') < `tol'
 46.         if ( _rc ) {
 47.             di as err "`fun' failed! (tol = `tol')"
 48.             exit _rc
 49.         }
 50.         else di as txt "    `fun' was OK"
 51.     }
 52. 
.     foreach p in 10 30 70 90 {
 53.         qui gegen g_p`p' = pctile(rnorm) if rsort > 0, by(groupstr groupsub) p(`p') `options'
 54.         qui  egen c_p`p' = pctile(rnorm) if rsort > 0, by(groupstr groupsub) p(`p')
 55.         cap noi assert (g_p`p' == c_p`p') | abs(g_p`p' - c_p`p') < `tol'
 56.         if ( _rc ) {
 57.             di as err "percentile `p' failed! (tol = `tol')"
 58.             exit _rc
 59.         }
 60.         else di as txt "    percentile `p' was OK"
 61.     }
 62. 
.     local fun tag
 63.     {
 64.         qui gegen gif_`fun' = `fun'(groupstr groupsub) if rsort > 0, v `options'
 65.         qui  egen cif_`fun' = `fun'(groupstr groupsub) if rsort > 0
 66.         cap noi assert (gif_`fun' == cif_`fun') | abs(gif_`fun' - cif_`fun') < `tol'
 67.         if ( _rc ) {
 68.             di as err "`fun' failed! (tol = `tol')"
 69.             exit _rc
 70.         }
 71.         else di as txt "    `fun' was OK"
 72.     }
 73. 
.     cap drop g*_*
 74.     cap drop c*_*
 75.     di "Checking in range"
 76.     foreach fun of local stats {
 77.         local in1 = ceil(runiform() * `=_N')
 78.         local in2 = ceil(runiform() * `=_N')
 79.         local from = cond(`in1' < `in2', `in1', `in2')
 80.         local to   = cond(`in1' > `in2', `in1', `in2')
 81.         qui gegen gin_`fun' = `fun'(rnorm) in `from' / `to', by(groupstr groupsub) `options'
 82.         qui  egen cin_`fun' = `fun'(rnorm) in `from' / `to', by(groupstr groupsub)
 83.         cap noi assert (gin_`fun' == cin_`fun') | abs(gin_`fun' - cin_`fun') < `tol'
 84.         if ( _rc ) {
 85.             di as err "`fun' failed! (tol = `tol')"
 86.             exit _rc
 87.         }
 88.         else di as txt "    `fun' was OK"
 89.     }
 90. 
.     foreach p in 10 30 70 90 {
 91.         local in1 = ceil(runiform() * `=_N')
 92.         local in2 = ceil(runiform() * `=_N')
 93.         local from = cond(`in1' < `in2', `in1', `in2')
 94.         local to   = cond(`in1' > `in2', `in1', `in2')
 95.         qui gegen g_p`p' = pctile(rnorm) in `from' / `to', by(groupstr groupsub) p(`p') `options'
 96.         qui  egen c_p`p' = pctile(rnorm) in `from' / `to', by(groupstr groupsub) p(`p')
 97.         cap noi assert (g_p`p' == c_p`p') | abs(g_p`p' - c_p`p') < `tol'
 98.         if ( _rc ) {
 99.             di as err "percentile `p' failed! (tol = `tol')"
100.             exit _rc
101.         }
102.         else di as txt "    percentile `p' was OK"
103.     }
104. 
.     local fun tag
105.     {
106.         local in1 = ceil(runiform() * `=_N')
107.         local in2 = ceil(runiform() * `=_N')
108.         local from = cond(`in1' < `in2', `in1', `in2')
109.         local to   = cond(`in1' > `in2', `in1', `in2')
110.         qui gegen gin_`fun' = `fun'(groupstr groupsub) in `from' / `to', v b `options'
111.         qui  egen cin_`fun' = `fun'(groupstr groupsub) in `from' / `to'
112.         cap noi assert (gin_`fun' == cin_`fun') | abs(gin_`fun' - cin_`fun') < `tol'
113.         if ( _rc ) {
114.             di as err "`fun' failed! (tol = `tol')"
115.             exit _rc
116.         }
117.         else di as txt "    `fun' was OK"
118.     }
119. 
.     cap drop g*_*
120.     cap drop c*_*
121.     di "Checking if in range"
122.     foreach fun of local stats {
123.         local in1 = ceil(runiform() * `=_N')
124.         local in2 = ceil(runiform() * `=_N')
125.         local from = cond(`in1' < `in2', `in1', `in2')
126.         local to   = cond(`in1' > `in2', `in1', `in2')
127.         qui gegen gifin_`fun' = `fun'(rnorm) if rsort < 0 in `from' / `to', by(groupstr groupsub) `options'
128.         qui  egen cifin_`fun' = `fun'(rnorm) if rsort < 0 in `from' / `to', by(groupstr groupsub)
129.         cap noi assert (gifin_`fun' == cifin_`fun') | abs(gifin_`fun' - cifin_`fun') < `tol'
130.         if ( _rc ) {
131.             di as err "`fun' failed! (tol = `tol')"
132.             exit _rc
133.         }
134.         else di as txt "    `fun' was OK"
135.     }
136. 
.     foreach p in 10 30 70 90 {
137.         local in1 = ceil(runiform() * `=_N')
138.         local in2 = ceil(runiform() * `=_N')
139.         local from = cond(`in1' < `in2', `in1', `in2')
140.         local to   = cond(`in1' > `in2', `in1', `in2')
141.         qui gegen g_p`p' = pctile(rnorm) if rsort < 0 in `from' / `to', by(groupstr groupsub) p(`p') `options'
142.         qui  egen c_p`p' = pctile(rnorm) if rsort < 0 in `from' / `to', by(groupstr groupsub) p(`p')
143.         cap noi assert (g_p`p' == c_p`p') | abs(g_p`p' - c_p`p') < `tol'
144.         if ( _rc ) {
145.             di as err "percentile `p' failed! (tol = `tol')"
146.             exit _rc
147.         }
148.         else di as txt "    percentile `p' was OK"
149.     }
150. 
.     local fun tag
151.     {
152.         local in1 = ceil(runiform() * `=_N')
153.         local in2 = ceil(runiform() * `=_N')
154.         local from = cond(`in1' < `in2', `in1', `in2')
155.         local to   = cond(`in1' > `in2', `in1', `in2')
156.         qui gegen gifin_`fun' = `fun'(groupstr groupsub) if rsort < 0 in `from' / `to', v `options'
157.         qui  egen cifin_`fun' = `fun'(groupstr groupsub) if rsort < 0 in `from' / `to'
158.         cap noi assert (gifin_`fun' == cifin_`fun') | abs(gifin_`fun' - cifin_`fun') < `tol'
159.         if ( _rc ) {
160.             di as err "`fun' failed! (tol = `tol')"
161.             exit _rc
162.         }
163.         else di as txt "    `fun' was OK"
164.     }
165. 
.     di ""
166.     di as txt "Passed! checks_consistency_gegen `options'"
167. end

. 
. capture program drop checks_options_gegen

. program checks_options_gegen
  1.     syntax, [tol(real 1e-6) *]
  2.     di _n(1) "{hline 80}" _n(1) "checks_options_gegen `options'" _n(1) "{hline 80}" _n(1)
  3. 
.     sim, n(20000) nj(100) njsub(2) string outmiss
  4. 
.     gegen id = group(groupstr groupsub)
  5.     gegen double mean    = mean   (rnorm),  by(groupstr groupsub) verbose benchmark `options'
  6.     gegen double sum     = sum    (rnorm),  by(groupstr groupsub) `options'
  7.     gegen double median  = median (rnorm),  by(groupstr groupsub) `options'
  8.     gegen double sd      = sd     (rnorm),  by(groupstr groupsub) `options'
  9.     gegen double iqr     = iqr    (rnorm),  by(groupstr groupsub) `options'
 10.     gegen double first   = first  (rnorm),  by(groupstr groupsub) `options' v b
 11.     gegen double last    = last   (rnorm),  by(groupstr groupsub) `options'
 12.     gegen double firstnm = firstnm(rnorm),  by(groupstr groupsub) `options'
 13.     gegen double lastnm  = lastnm (rnorm),  by(groupstr groupsub) `options'
 14.     gegen double q10     = pctile (rnorm),  by(groupstr groupsub) `options' p(10.5)
 15.     gegen double q30     = pctile (rnorm),  by(groupstr groupsub) `options' p(30)
 16.     gegen double q70     = pctile (rnorm),  by(groupstr groupsub) `options' p(70)
 17.     gegen double q90     = pctile (rnorm),  by(groupstr groupsub) `options' p(90.5)
 18. 
.     gcollapse (mean)    g_mean    = rnorm  ///
>               (sum)     g_sum     = rnorm  ///
>               (median)  g_median  = rnorm  ///
>               (sd)      g_sd      = rnorm  ///
>               (iqr)     g_iqr     = rnorm  ///
>               (first)   g_first   = rnorm  ///
>               (last)    g_last    = rnorm  ///
>               (firstnm) g_firstnm = rnorm  ///
>               (lastnm)  g_lastnm  = rnorm  ///
>               (p10.5)   g_q10     = rnorm  ///
>               (p30)     g_q30     = rnorm  ///
>               (p70)     g_q70     = rnorm  ///
>               (p90.5)   g_q90     = rnorm, by(id) benchmark verbose `options' merge double
 19. 
.     foreach fun in mean sum median sd iqr first last firstnm lastnm q10 q30 q70 q90 {
 20.         cap noi assert (g_`fun' == `fun') | abs(g_`fun' - `fun') < `tol'
 21.         if ( _rc ) {
 22.             recast double g_`fun' `fun'
 23.             cap noi assert (g_`fun' == `fun') | abs(g_`fun' - `fun') < `tol'
 24.             if ( _rc ) {
 25.                 di as err "`fun' vs gcollapse failed! (tol = `tol')"
 26.                 exit _rc
 27.             }
 28.         }
 29.         else di as txt "    `fun' vs gcollapse was OK"
 30.     }
 31. 
.     sim, n(20000) nj(100) njsub(2) string outmiss
 32. 
.     local in1 = ceil(runiform() * `=_N')
 33.     local in2 = ceil(runiform() * `=_N')
 34.     local from = cond(`in1' < `in2', `in1', `in2')
 35.     local to   = cond(`in1' > `in2', `in1', `in2')
 36. 
.     gegen id = group(groupstr groupsub) in `from' / `to'
 37.     gegen double mean    = mean   (rnorm) in `from' / `to',  by(groupstr groupsub) verbose benchmark `options'
 38.     gegen double sum     = sum    (rnorm) in `from' / `to',  by(groupstr groupsub) `options'
 39.     gegen double median  = median (rnorm) in `from' / `to',  by(groupstr groupsub) `options'
 40.     gegen double sd      = sd     (rnorm) in `from' / `to',  by(groupstr groupsub) `options'
 41.     gegen double iqr     = iqr    (rnorm) in `from' / `to',  by(groupstr groupsub) `options'
 42.     gegen double first   = first  (rnorm) in `from' / `to',  by(groupstr groupsub) `options' v b
 43.     gegen double last    = last   (rnorm) in `from' / `to',  by(groupstr groupsub) `options'
 44.     gegen double firstnm = firstnm(rnorm) in `from' / `to',  by(groupstr groupsub) `options'
 45.     gegen double lastnm  = lastnm (rnorm) in `from' / `to',  by(groupstr groupsub) `options'
 46.     gegen double q10     = pctile (rnorm) in `from' / `to',  by(groupstr groupsub) `options' p(10.5)
 47.     gegen double q30     = pctile (rnorm) in `from' / `to',  by(groupstr groupsub) `options' p(30)
 48.     gegen double q70     = pctile (rnorm) in `from' / `to',  by(groupstr groupsub) `options' p(70)
 49.     gegen double q90     = pctile (rnorm) in `from' / `to',  by(groupstr groupsub) `options' p(90.5)
 50. 
.     gcollapse (mean)    g_mean    = rnorm  ///
>               (sum)     g_sum     = rnorm  ///
>               (median)  g_median  = rnorm  ///
>               (sd)      g_sd      = rnorm  ///
>               (iqr)     g_iqr     = rnorm  ///
>               (first)   g_first   = rnorm  ///
>               (last)    g_last    = rnorm  ///
>               (firstnm) g_firstnm = rnorm  ///
>               (lastnm)  g_lastnm  = rnorm  ///
>               (p10.5)   g_q10     = rnorm  ///
>               (p30)     g_q30     = rnorm  ///
>               (p70)     g_q70     = rnorm  ///
>               (p90.5)   g_q90     = rnorm in `from' / `to', by(id) benchmark verbose `options' merge double
 51. 
.     foreach fun in mean sum median sd iqr first last firstnm lastnm q10 q30 q70 q90 {
 52.         cap noi assert (g_`fun' == `fun') | abs(g_`fun' - `fun') < `tol'
 53.         if ( _rc ) {
 54.             recast double g_`fun' `fun'
 55.             cap noi assert (g_`fun' == `fun') | abs(g_`fun' - `fun') < `tol'
 56.             if ( _rc ) {
 57.                 di as err "`fun' vs gcollapse (in) failed! (tol = `tol')"
 58.                 exit _rc
 59.             }
 60.         }
 61.         else di as txt "    `fun' vs gcollapse (in) was OK"
 62.     }
 63. 
.     sim, n(20000) nj(100) njsub(2) string outmiss
 64. 
.     local in1 = ceil(runiform() * `=_N')
 65.     local in2 = ceil(runiform() * `=_N')
 66.     local from = cond(`in1' < `in2', `in1', `in2')
 67.     local to   = cond(`in1' > `in2', `in1', `in2')
 68.     qui count if rsort < 0 in `from' / `to'
 69.     if !( `r(N)' < `=_N' ) {
 70.         local from = 100
 71.         local to = 19000
 72.     }
 73. 
.     gegen id = group(groupstr groupsub)   if rsort < 0 in `from' / `to'
 74.     gegen double mean    = mean   (rnorm) if rsort < 0 in `from' / `to',  by(groupstr groupsub) verbose benchmark `options'
 75.     gegen double sum     = sum    (rnorm) if rsort < 0 in `from' / `to',  by(groupstr groupsub) `options'
 76.     gegen double median  = median (rnorm) if rsort < 0 in `from' / `to',  by(groupstr groupsub) `options'
 77.     gegen double sd      = sd     (rnorm) if rsort < 0 in `from' / `to',  by(groupstr groupsub) `options'
 78.     gegen double iqr     = iqr    (rnorm) if rsort < 0 in `from' / `to',  by(groupstr groupsub) `options'
 79.     gegen double first   = first  (rnorm) if rsort < 0 in `from' / `to',  by(groupstr groupsub) `options' v b
 80.     gegen double last    = last   (rnorm) if rsort < 0 in `from' / `to',  by(groupstr groupsub) `options'
 81.     gegen double firstnm = firstnm(rnorm) if rsort < 0 in `from' / `to',  by(groupstr groupsub) `options'
 82.     gegen double lastnm  = lastnm (rnorm) if rsort < 0 in `from' / `to',  by(groupstr groupsub) `options'
 83.     gegen double q10     = pctile (rnorm) if rsort < 0 in `from' / `to',  by(groupstr groupsub) `options' p(10.5)
 84.     gegen double q30     = pctile (rnorm) if rsort < 0 in `from' / `to',  by(groupstr groupsub) `options' p(30)
 85.     gegen double q70     = pctile (rnorm) if rsort < 0 in `from' / `to',  by(groupstr groupsub) `options' p(70)
 86.     gegen double q90     = pctile (rnorm) if rsort < 0 in `from' / `to',  by(groupstr groupsub) `options' p(90.5)
 87. 
.     keep if rsort < 0 in `from' / `to'
 88.     gcollapse (mean)    g_mean    = rnorm  ///
>               (sum)     g_sum     = rnorm  ///
>               (median)  g_median  = rnorm  ///
>               (sd)      g_sd      = rnorm  ///
>               (iqr)     g_iqr     = rnorm  ///
>               (first)   g_first   = rnorm  ///
>               (last)    g_last    = rnorm  ///
>               (firstnm) g_firstnm = rnorm  ///
>               (lastnm)  g_lastnm  = rnorm  ///
>               (p10.5)   g_q10     = rnorm  ///
>               (p30)     g_q30     = rnorm  ///
>               (p70)     g_q70     = rnorm  ///
>               (p90.5)   g_q90     = rnorm, by(id) benchmark verbose `options' merge double
 89. 
.     foreach fun in mean sum median sd iqr first last firstnm lastnm q10 q30 q70 q90 {
 90.         cap noi assert (g_`fun' == `fun') | abs(g_`fun' - `fun') < `tol'
 91.         if ( _rc ) {
 92.             recast double g_`fun' `fun'
 93.             cap noi assert (g_`fun' == `fun') | abs(g_`fun' - `fun') < `tol'
 94.             if ( _rc ) {
 95.                 di as err "`fun' vs gcollapse (if in) failed! (tol = `tol')"
 96.                 exit _rc
 97.             }
 98.         }
 99.         else di as txt "    `fun' vs gcollapse (if in) was OK"
100.     }
101. 
.     di ""
102.     di as txt "Passed! checks_options_gegen `options'"
103. end

. ***********************************************************************
. *                           Data simulation                           *
. ***********************************************************************
. 
. capture program drop bench_sim

. program bench_sim
  1.     syntax, [n(int 100) nj(int 10) njsub(int 2) nvars(int 2)]
  2.     local offset = -123456
  3. 
.     clear
  4.     set obs `n'
  5.     gen group  = ceil(`nj' *  _n / _N) + `offset'
  6.     gen long grouplong = ceil(`nj' *  _n / _N) + `offset'
  7.     bys group: gen groupsub      = ceil(`njsub' *  _n / _N)
  8.     bys group: gen groupsubfloat = ceil(`njsub' *  _n / _N) + 0.5
  9.     tostring group, gen(groupstr)
 10.     replace groupstr = "i am a modestly long string" + groupstr
 11. 
.     forvalues i = 1 / `nvars' {
 12.         gen x`i' = rnormal()
 13.     }
 14.     gen rsort = runiform() - 0.5
 15.     sort rsort
 16. 
.     replace group = . if runiform() < 0.1
 17.     replace rsort = . if runiform() < 0.1
 18. end

. 
. capture program drop bench_sim_ftools

. program bench_sim_ftools
  1.     args n k
  2.     clear
  3.     qui set obs `n'
  4.     noi di "(obs set)"
  5.     loc m = ceil(`n' / 10)
  6.     gen long x1  = ceil(uniform() * 10000) * 100
  7.     gen int  x2  = ceil(uniform() * 3000)
  8.     gen byte x3  = ceil(uniform() * 100)
  9.     gen str  x4  = "u" + string(ceil(uniform() * 100), "%5.0f")
 10.     gen long x5  = ceil(uniform() * 5000)
 11.     gen str  x6  = "u" + string(ceil(uniform() * 10), "%5.0f")
 12.     noi di "(Xs set)"
 13.     forv i = 1 / `k' {
 14.         gen double y`i' = 123.456 + runiform()
 15.     }
 16.     loc obs_k = ceil(`c(N)' / 1000)
 17. end

. 
. ***********************************************************************
. *                       ftools-style benchmarks                       *
. ***********************************************************************
. 
. capture program drop bench_ftools

. program bench_ftools
  1.     syntax anything, by(str) [kvars(int 5) stats(str) kmin(int 4) kmax(int 7) *]
  2.     if ("`stats'" == "") local stats sum
  3. 
.     local collapse ""
  4.     foreach stat of local stats {
  5.         local collapse `collapse' (`stat')
  6.         foreach var of local anything {
  7.             local collapse `collapse' `stat'_`var' = `var'
  8.         }
  9.     }
 10. 
.     * First set of benchmarks: default vs collapse, fcollapse
.     * -------------------------------------------------------
. 
.     local i = 0
 11.     local N ""
 12.     di "Benchmarking N for J = 100; by(`by')"
 13.     di "    vars  = `anything'"
 14.     di "    stats = `stats'"
 15.     forvalues k = `kmin' / `kmax' {
 16.         mata: printf("    `:di %21.0gc `:di 2 * 10^`k'''")
 17.         local N `N' `:di %21.0g 2 * 10^`k''
 18.         qui bench_sim_ftools `:di %21.0g 2 * 10^`k'' `kvars'
 19.         preserve
 20.             local ++i
 21.             timer clear
 22.             timer on `i'
 23.             mata: printf(" gcollapse ")
 24.                 qui gcollapse `collapse', by(`by')
 25.             timer off `i'
 26.             qui timer list
 27.             local r`i' = `r(t`i')'
 28.             mata: printf(" (`r`i'') ")
 29.         restore, preserve
 30.             local ++i
 31.             timer clear
 32.             timer on `i'
 33.             mata: printf(" collapse ")
 34.                 qui collapse `collapse', by(`by')
 35.             timer off `i'
 36.             qui timer list
 37.             local r`i' = `r(t`i')'
 38.             mata: printf(" (`r`i'') ")
 39.         restore, preserve
 40.             local ++i
 41.             timer clear
 42.             timer on `i'
 43.             mata: printf(" fcollapse ")
 44.                 qui fcollapse `collapse', by(`by')
 45.             timer off `i'
 46.             qui timer list
 47.             local r`i' = `r(t`i')'
 48.             mata: printf(" (`r`i'')\n")
 49.         restore
 50.     }
 51. 
.     local i = 1
 52.     di "Results varying N for J = 100; by(`by')"
 53.     di "|              N | gcollapse |  collapse | fcollapse | ratio (f/g) | ratio (c/g) |"
 54.     di "| -------------- | --------- | --------- | --------- | ----------- | ----------- |"
 55.     foreach nn in `N' {
 56.         local ii  = `i' + 1
 57.         local iii = `i' + 2
 58.         di "| `:di %14.0gc `nn'' | `:di %9.2f `r`i''' | `:di %9.2f `r`ii''' | `:di %9.2f `r`iii''' | `:di %11.2f `r`iii'' /
>  `r`i''' | `:di %11.2f `r`ii'' / `r`i''' |"
 59.         local ++i
 60.         local ++i
 61.         local ++i
 62.     }
 63.     timer clear
 64. end

. 
. ***********************************************************************
. *                             benchmarks                              *
. ***********************************************************************
. 
. capture program drop bench_sample_size

. program bench_sample_size
  1.     syntax anything, by(str) [nj(int 10) pct(str) stats(str) kmin(int 4) kmax(int 7) *]
  2.     * NOTE: sometimes, fcollapse can't do sd
.     if ("`stats'" == "") local stats sum mean max min count percent first last firstnm lastnm
  3.     local stats `stats' `pct'
  4. 
.     local collapse ""
  5.     foreach stat of local stats {
  6.         local collapse `collapse' (`stat')
  7.         foreach var of local anything {
  8.             local collapse `collapse' `stat'_`var' = `var'
  9.         }
 10.     }
 11. 
.     * First set of benchmarks: default vs collapse, fcollapse
.     * -------------------------------------------------------
. 
.     local i = 0
 12.     local N ""
 13.     di "Benchmarking N for J = `nj'; by(`by')"
 14.     di "    vars  = `anything'"
 15.     di "    stats = `stats'"
 16.     forvalues k = `kmin' / `kmax' {
 17.         mata: printf("    `:di %21.0gc `:di 2 * 10^`k'''")
 18.         local N `N' `:di %21.0g 2 * 10^`k''
 19.         qui bench_sim, n(`:di %21.0g 2 * 10^`k'') nj(`nj') njsub(2) nvars(2)
 20.         preserve
 21.             local ++i
 22.             timer clear
 23.             timer on `i'
 24.             mata: printf(" gcollapse ")
 25.                 qui gcollapse `collapse', by(`by')
 26.             timer off `i'
 27.             qui timer list
 28.             local r`i' = `r(t`i')'
 29.             mata: printf(" (`r`i'') ")
 30.         restore, preserve
 31.             local ++i
 32.             timer clear
 33.             timer on `i'
 34.             mata: printf(" collapse ")
 35.                 qui collapse `collapse', by(`by')
 36.             timer off `i'
 37.             qui timer list
 38.             local r`i' = `r(t`i')'
 39.             mata: printf(" (`r`i'') ")
 40.         restore, preserve
 41.             local ++i
 42.             timer clear
 43.             timer on `i'
 44.             mata: printf(" fcollapse ")
 45.                 qui fcollapse `collapse', by(`by')
 46.             timer off `i'
 47.             qui timer list
 48.             local r`i' = `r(t`i')'
 49.             mata: printf(" (`r`i'')\n")
 50.         restore
 51.     }
 52. 
.     local i = 1
 53.     di "Results varying N for J = `nj'; by(`by')"
 54.     di "|              N | gcollapse |  collapse | fcollapse | ratio (f/g) | ratio (c/g) |"
 55.     di "| -------------- | --------- | --------- | --------- | ----------- | ----------- |"
 56.     foreach nn in `N' {
 57.         local ii  = `i' + 1
 58.         local iii = `i' + 2
 59.         di "| `:di %14.0gc `nn'' | `:di %9.2f `r`i''' | `:di %9.2f `r`ii''' | `:di %9.2f `r`iii''' | `:di %11.2f `r`iii'' /
>  `r`i''' | `:di %11.2f `r`ii'' / `r`i''' |"
 60.         local ++i
 61.         local ++i
 62.         local ++i
 63.     }
 64.     timer clear
 65. end

. 
. capture program drop bench_group_size

. program bench_group_size
  1.     syntax anything, by(str) [pct(str) stats(str) obsexp(int 6) kmin(int 1) kmax(int 6) *]
  2.     * NOTE: fcollapse can't do sd, apparently
.     if ("`stats'" == "") local stats sum mean max min count percent first last firstnm lastnm
  3.     local stats `stats' `pct'
  4. 
.     local collapse ""
  5.     foreach stat of local stats {
  6.         local collapse `collapse' (`stat')
  7.         foreach var of local anything {
  8.             local collapse `collapse' `stat'_`var' = `var'
  9.         }
 10.     }
 11. 
.     * First set of benchmarks: default vs collapse, fcollapse
.     * -------------------------------------------------------
. 
.     local nstr = trim("`:di %21.0gc `:di 5 * 10^`obsexp'''")
 12.     local i = 0
 13.     local N ""
 14.     di "Benchmarking J for N = `nstr'; by(`by')"
 15.     di "    vars  = `anything'"
 16.     di "    stats = `stats'"
 17.     forvalues k = `kmin' / `kmax' {
 18.         mata: printf("    `:di %21.0gc `:di 10^`k'''")
 19.         local N `N' `:di %21.0g 10^`k''
 20.         qui bench_sim, n(`:di %21.0g 5 * 10^`obsexp'') nj(`:di %21.0g 10^`k'') njsub(2) nvars(2)
 21.         preserve
 22.             local ++i
 23.             timer clear
 24.             timer on `i'
 25.             mata: printf(" gcollapse ")
 26.                 qui gcollapse `collapse', by(`by')
 27.             timer off `i'
 28.             qui timer list
 29.             local r`i' = `r(t`i')'
 30.             mata: printf(" (`r`i'') ")
 31.         restore, preserve
 32.             local ++i
 33.             timer clear
 34.             timer on `i'
 35.             mata: printf(" collapse ")
 36.                 qui collapse `collapse', by(`by')
 37.             timer off `i'
 38.             qui timer list
 39.             local r`i' = `r(t`i')'
 40.             mata: printf(" (`r`i'') ")
 41.         restore, preserve
 42.             local ++i
 43.             timer clear
 44.             timer on `i'
 45.             mata: printf(" fcollapse ")
 46.                 qui fcollapse `collapse', by(`by')
 47.             timer off `i'
 48.             qui timer list
 49.             local r`i' = `r(t`i')'
 50.             mata: printf(" (`r`i'')\n")
 51.         restore
 52.     }
 53. 
.     local i = 1
 54.     di "Results varying J for N = `nstr'; by(`by')"
 55.     di "|              J | gcollapse |  collapse | fcollapse | ratio (f/g) | ratio (c/g) |"
 56.     di "| -------------- | --------- | --------- | --------- | ----------- | ----------- |"
 57.     foreach nn in `N' {
 58.         local ii  = `i' + 1
 59.         local iii = `i' + 2
 60.         di "| `:di %14.0gc `nn'' | `:di %9.2f `r`i''' | `:di %9.2f `r`ii''' | `:di %9.2f `r`iii''' | `:di %11.2f `r`iii'' /
>  `r`i''' | `:di %11.2f `r`ii'' / `r`i''' |"
 61.         local ++i
 62.         local ++i
 63.         local ++i
 64.     }
 65.     timer clear
 66. end

. 
. ***********************************************************************
. *                      Benchmark fcollapse only                       *
. ***********************************************************************
. 
. capture program drop bench_switch_fcoll

. program bench_switch_fcoll
  1.     syntax anything, style(str) [*]
  2.     if !inlist("`style'", "ftools", "gtools") {
  3.         di as error "Don't know benchmark style '`style''; available: ftools, gtools"
  4.         exit 198
  5.     }
  6. 
.     local 0 `anything', `options'
  7.     if ( "`style'" == "ftools" ) {
  8.         syntax anything, by(str) [kvars(int 5) stats(str) kmin(int 4) kmax(int 7) *]
  9.         if ("`stats'" == "") local stats sum
 10.         local i = 0
 11.         local N ""
 12.         local L N
 13.         local dstr J = 100
 14.         di "Benchmarking `L' for `dstr'; by(`by')"
 15.         di "    vars  = `anything'"
 16.         di "    stats = `stats'"
 17. 
.         mata: print_matrix = J(1, 0, "")
 18.         mata: sim_matrix   = J(1, 0, "")
 19.         forvalues k = `kmin' / `kmax' {
 20.             mata: print_matrix = print_matrix, "    `:di %21.0gc `:di 2 * 10^`k'''"
 21.             mata: sim_matrix   = sim_matrix,   "bench_sim_ftools `:di %21.0g 2 * 10^`k'' `kvars'"
 22.             local N `N' `:di %21.0g 2 * 10^`k''
 23.         }
 24.     }
 25.     else {
 26.         * syntax anything, by(str) [margin(str) nj(int 10) pct(str) stats(str) obsexp(int 6) kmin(int 1) kmax(int 6) *]
.         syntax anything, by(str) [margin(str) nj(int 10) pct(str) stats(str) obsexp(int 6) kmin(int 4) kmax(int 7) nvars(int 2
> ) *]
 27.         if !inlist("`margin'", "N", "J") {
 28.             di as error "Don't know margin '`margin''; available: N, J"
 29.             exit 198
 30.         }
 31. 
.         if ("`stats'" == "") local stats sum mean max min count percent first last firstnm lastnm
 32.         local stats `stats' `pct'
 33.         local i = 0
 34.         local N ""
 35.         local L `margin'
 36.         local jstr = trim("`:di %21.0gc `nj''")
 37.         local nstr = trim("`:di %21.0gc `:di 5 * 10^`obsexp'''")
 38.         local dstr = cond("`L'" == "N", "J = `jstr'", "N = `nstr'")
 39.         di "Benchmarking `L' for `dstr'; by(`by')"
 40.         di "    vars  = `anything'"
 41.         di "    stats = `stats'"
 42. 
.         mata: print_matrix = J(1, 0, "")
 43.         mata: sim_matrix   = J(1, 0, "")
 44.         forvalues k = `kmin' / `kmax' {
 45.             if ( "`L'" == "N" ) {
 46.                 mata: print_matrix = print_matrix, "    `:di %21.0gc `:di 2 * 10^`k'''"
 47.                 mata: sim_matrix   = sim_matrix, "bench_sim, n(`:di %21.0g 2 * 10^`k'') nj(`nj') njsub(2) nvars(`nvars')"
 48.             }
 49.             else {
 50.                 mata: print_matrix = print_matrix, "    `:di %21.0gc `:di 10^`k'''"
 51.                 mata: sim_matrix   = sim_matrix, "bench_sim, n(`:di %21.0g 5 * 10^`obsexp'') nj(`:di %21.0g 10^`k'') njsub(
> 2) nvars(`nvars')"
 52.             }
 53.             local J `J' `:di %21.0g 10^`k''
 54.             local N `N' `:di %21.0g 2 * 10^`k''
 55.         }
 56.     }
 57. 
.     local collapse ""
 58.     foreach stat of local stats {
 59.         local collapse `collapse' (`stat')
 60.         foreach var of local anything {
 61.             local collapse `collapse' `stat'_`var' = `var'
 62.         }
 63.     }
 64. 
.     forvalues k = 1 / `:di `kmax' - `kmin' + 1' {
 65.         mata: st_local("sim",   sim_matrix[`k'])
 66.         qui `sim'
 67.         mata: printf(print_matrix[`k'])
 68.         preserve
 69.             local ++i
 70.             timer clear
 71.             timer on `i'
 72.             mata: printf(" gcollapse-default ")
 73.                 qui gcollapse `collapse', by(`by') `options' fast
 74.             timer off `i'
 75.             qui timer list
 76.             local r`i' = `r(t`i')'
 77.             mata: printf(" (`r`i'') ")
 78.         restore, preserve
 79.             local ++i
 80.             timer clear
 81.             timer on `i'
 82.             mata: printf(" fcollapse ")
 83.                 qui fcollapse `collapse', by(`by') fast
 84.             timer off `i'
 85.             qui timer list
 86.             local r`i' = `r(t`i')'
 87.             mata: printf(" (`r`i'') \n")
 88.         restore
 89.     }
 90. 
.     local i = 1
 91.     di "Results varying `L' for `dstr'; by(`by')"
 92.     di "|              `L' | gcollapse | fcollapse | ratio (f/g) |"
 93.     di "| -------------- | --------- | --------- | ----------- |"
 94.     foreach nn in ``L'' {
 95.         local ii  = `i' + 1
 96.         di "| `:di %14.0gc `nn'' | `:di %9.2f `r`i''' | `:di %9.2f `r`ii''' | `:di %11.2f `r`ii'' / `r`i''' |"
 97.         local ++i
 98.         local ++i
 99.     }
100.     timer clear
101. end

. 
. * Benchmarks in the README
. * ------------------------
. 
. * bench_ftools y1 y2 y3 y4 y5 y6 y7 y8 y9 y10 y11 y12 y13 y14 y15, by(x3) kmin(4) kmax(7) kvars(15)
. * bench_ftools y1 y2 y3,   by(x3) kmin(4) kmax(7) kvars(3) stats(mean median)
. * bench_ftools y1 y2 y3 y4 y5 y6 y7 y8 y9 y10, by(x3) kmin(4) kmax(7) kvars(10) stats(mean median min max)
. * bench_sample_size x1 x2, by(groupstr) kmin(4) kmax(7) pct(median iqr p23 p77)
. * bench_group_size x1 x2,  by(groupstr) kmin(1) kmax(6) pct(median iqr p23 p77) obsexp(6) 
. 
. * Misc
. * ----
. 
. * bench_ftools y1 y2 y3 y4 y5 y6 y7 y8 y9 y10 y11 y12 y13 y14 y15, by(x3) kmin(5) kmax(8) kvars(15)
. * bench_ftools y1 y2 y3,   by(x3) kmin(5) kmax(8) kvars(3) stats(mean median)
. * bench_ftools y1 y2 y3 y4 y5 y6 y7 y8 y9 y10, by(x3) kmin(5) kmax(8) kvars(10) stats(mean median min max)
. * bench_sample_size x1 x2, by(groupstr) kmin(5) kmax(8) pct(median iqr p23 p77)
. * bench_group_size x1 x2,  by(groupstr) kmin(1) kmax(7) pct(median iqr p23 p77) obsexp(7)
. 
. * ---------------------------------------------------------------------
. * Run the things
. 
. main, cap noi checks test
Start: 17:15:56 17 Jul 2017

--------------------------------------------------------------------------------
checks_byvars_gcollapse debug_force_single
--------------------------------------------------------------------------------


    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
       rsort |      1000    .0006117    .2971319  -.4988952   .4985919
Obs = 1,000; Groups = 250
  group was float now int
  groupsub was float now byte
  grouplong was long now int
  (7,000 bytes saved)
(warning: forcing non-multi-threaded version)
In memory: groupsub rnorm sum sd
Using sole integer by variable as hash.
counting sort on hash; min = 1, max = 2
N = 1,000; 2 balanced groups of size 500
(warning: forcing non-multi-threaded version)
In memory: group rnorm sum sd
Using sole integer by variable as hash.
counting sort on hash; min = 1, max = 250
N = 1,000; 250 balanced groups of size 4
(warning: forcing non-multi-threaded version)
In memory: groupstr rnorm sum sd
Using 128-bit hash to index string by variable.
radix sort on hash: loops = 4, bits = 16, shift = 65,536
N = 1,000; 250 balanced groups of size 4
(warning: forcing non-multi-threaded version)
In memory: rnorm grouplong sum sd
Using sole integer by variable as hash.
counting sort on hash; min = 1, max = 250
N = 1,000; 250 balanced groups of size 4
(warning: forcing non-multi-threaded version)
In memory: groupsub rnorm sum sd
Using sole integer by variable as hash.
counting sort on hash; min = 1, max = 2
N = 1,000; 2 balanced groups of size 500
(warning: forcing non-multi-threaded version)
In memory: group groupsub rnorm sum sd
Hashing 2 integer by variables to whole-nubmer index.
Obs         0 =                   334
Obs         1 =                   139
Obs         2 =                   429
Obs         3 =                   386
Obs         4 =                   464
Obs         5 =                   275
Obs         6 =                    65
Obs         7 =                    32
Obs         8 =                   475
Obs         9 =                   400
Obs        10 =                   386
Obs        11 =                   162
Obs        12 =                   428
Obs        13 =                    29
Obs        14 =                   234
Obs        15 =                   298
Obs        16 =                   165
Obs        17 =                   456
Obs        18 =                    63
Obs        19 =                   499
Obs        20 =                    33
Obs        21 =                   383
Obs        22 =                   236
Obs        23 =                     4
Obs        24 =                   335
Obs        25 =                   115
Obs        26 =                   369
Obs        27 =                   100
Obs        28 =                     6
Obs        29 =                   439
Obs        30 =                   413
Obs        31 =                    60
Obs        32 =                   492
Obs        33 =                    39
Obs        34 =                   350
Obs        35 =                   109
Obs        36 =                   414
Obs        37 =                   247
Obs        38 =                   118
Obs        39 =                   192
Obs        40 =                   141
Obs        41 =                   196
Obs        42 =                   172
Obs        43 =                   391
Obs        44 =                   371
Obs        45 =                    56
Obs        46 =                   381
Obs        47 =                   287
Obs        48 =                   393
Obs        49 =                   288
Obs        50 =                   395
Obs        51 =                    95
Obs        52 =                   333
Obs        53 =                   302
Obs        54 =                   332
Obs        55 =                   402
Obs        56 =                   212
Obs        57 =                   281
Obs        58 =                   152
Obs        59 =                   214
Obs        60 =                   136
Obs        61 =                     6
Obs        62 =                   343
Obs        63 =                    57
Obs        64 =                   138
Obs        65 =                   368
Obs        66 =                   207
Obs        67 =                    76
Obs        68 =                   330
Obs        69 =                   154
Obs        70 =                    82
Obs        71 =                    81
Obs        72 =                   106
Obs        73 =                   144
Obs        74 =                   489
Obs        75 =                   315
Obs        76 =                   279
Obs        77 =                   451
Obs        78 =                   434
Obs        79 =                   149
Obs        80 =                   337
Obs        81 =                   353
Obs        82 =                   283
Obs        83 =                   159
Obs        84 =                   325
Obs        85 =                    85
Obs        86 =                   174
Obs        87 =                   101
Obs        88 =                    51
Obs        89 =                   272
Obs        90 =                   133
Obs        91 =                   272
Obs        92 =                   339
Obs        93 =                   490
Obs        94 =                   477
Obs        95 =                   408
Obs        96 =                   459
Obs        97 =                   308
Obs        98 =                    67
Obs        99 =                   152
Obs       100 =                   224
Obs       101 =                   134
Obs       102 =                   342
Obs       103 =                    28
Obs       104 =                   422
Obs       105 =                   249
Obs       106 =                    75
Obs       107 =                   388
Obs       108 =                   322
Obs       109 =                    33
Obs       110 =                    95
Obs       111 =                   157
Obs       112 =                    40
Obs       113 =                   168
Obs       114 =                   316
Obs       115 =                   470
Obs       116 =                   140
Obs       117 =                   410
Obs       118 =                    22
Obs       119 =                   403
Obs       120 =                   404
Obs       121 =                   442
Obs       122 =                   230
Obs       123 =                     2
Obs       124 =                   300
Obs       125 =                   285
Obs       126 =                   279
Obs       127 =                   421
Obs       128 =                    10
Obs       129 =                    47
Obs       130 =                   498
Obs       131 =                   296
Obs       132 =                   498
Obs       133 =                   474
Obs       134 =                   478
Obs       135 =                    82
Obs       136 =                   342
Obs       137 =                   183
Obs       138 =                    70
Obs       139 =                   341
Obs       140 =                   462
Obs       141 =                   353
Obs       142 =                   426
Obs       143 =                   447
Obs       144 =                   307
Obs       145 =                   212
Obs       146 =                   407
Obs       147 =                   473
Obs       148 =                    62
Obs       149 =                    11
Obs       150 =                   367
Obs       151 =                   446
Obs       152 =                   454
Obs       153 =                   454
Obs       154 =                    91
Obs       155 =                   166
Obs       156 =                   442
Obs       157 =                   479
Obs       158 =                   195
Obs       159 =                    14
Obs       160 =                   146
Obs       161 =                   330
Obs       162 =                   230
Obs       163 =                   245
Obs       164 =                   458
Obs       165 =                   266
Obs       166 =                   462
Obs       167 =                   297
Obs       168 =                   120
Obs       169 =                   437
Obs       170 =                   217
Obs       171 =                   126
Obs       172 =                   361
Obs       173 =                   375
Obs       174 =                    18
Obs       175 =                   205
Obs       176 =                   340
Obs       177 =                   261
Obs       178 =                   378
Obs       179 =                   138
Obs       180 =                   436
Obs       181 =                   429
Obs       182 =                    42
Obs       183 =                   148
Obs       184 =                    34
Obs       185 =                   158
Obs       186 =                   445
Obs       187 =                   354
Obs       188 =                   267
Obs       189 =                   253
Obs       190 =                   111
Obs       191 =                   128
Obs       192 =                   227
Obs       193 =                    62
Obs       194 =                   181
Obs       195 =                    53
Obs       196 =                     4
Obs       197 =                   457
Obs       198 =                    41
Obs       199 =                   221
Obs       200 =                   485
Obs       201 =                   500
Obs       202 =                   389
Obs       203 =                   488
Obs       204 =                    36
Obs       205 =                    93
Obs       206 =                    44
Obs       207 =                    90
Obs       208 =                    43
Obs       209 =                    21
Obs       210 =                   126
Obs       211 =                   351
Obs       212 =                   390
Obs       213 =                   246
Obs       214 =                   145
Obs       215 =                   359
Obs       216 =                    65
Obs       217 =                   484
Obs       218 =                   349
Obs       219 =                   219
Obs       220 =                    63
Obs       221 =                   463
Obs       222 =                   163
Obs       223 =                   313
Obs       224 =                   112
Obs       225 =                   206
Obs       226 =                   375
Obs       227 =                   255
Obs       228 =                   433
Obs       229 =                   124
Obs       230 =                    81
Obs       231 =                   449
Obs       232 =                   443
Obs       233 =                   455
Obs       234 =                   400
Obs       235 =                    54
Obs       236 =                   380
Obs       237 =                   203
Obs       238 =                   209
Obs       239 =                    55
Obs       240 =                    98
Obs       241 =                   170
Obs       242 =                   229
Obs       243 =                   252
Obs       244 =                   334
Obs       245 =                   133
Obs       246 =                   488
Obs       247 =                   128
Obs       248 =                   453
Obs       249 =                   222
Obs       250 =                   405
Obs       251 =                    61
Obs       252 =                   123
Obs       253 =                   150
Obs       254 =                   293
Obs       255 =                   201
Obs       256 =                   314
Obs       257 =                   179
Obs       258 =                   332
Obs       259 =                   423
Obs       260 =                   493
Obs       261 =                   225
Obs       262 =                   277
Obs       263 =                   218
Obs       264 =                    59
Obs       265 =                   130
Obs       266 =                   120
Obs       267 =                   199
Obs       268 =                   119
Obs       269 =                   347
Obs       270 =                   368
Obs       271 =                   132
Obs       272 =                    80
Obs       273 =                   223
Obs       274 =                   443
Obs       275 =                   173
Obs       276 =                   108
Obs       277 =                   137
Obs       278 =                   302
Obs       279 =                   311
Obs       280 =                   249
Obs       281 =                   191
Obs       282 =                    97
Obs       283 =                     9
Obs       284 =                   142
Obs       285 =                   496
Obs       286 =                   295
Obs       287 =                   389
Obs       288 =                   475
Obs       289 =                   263
Obs       290 =                    25
Obs       291 =                   143
Obs       292 =                   480
Obs       293 =                   420
Obs       294 =                     5
Obs       295 =                   262
Obs       296 =                   127
Obs       297 =                   499
Obs       298 =                   350
Obs       299 =                    98
Obs       300 =                   471
Obs       301 =                   235
Obs       302 =                    37
Obs       303 =                   223
Obs       304 =                   276
Obs       305 =                    24
Obs       306 =                   147
Obs       307 =                   328
Obs       308 =                   407
Obs       309 =                   459
Obs       310 =                   337
Obs       311 =                   333
Obs       312 =                   185
Obs       313 =                    17
Obs       314 =                   481
Obs       315 =                   409
Obs       316 =                    44
Obs       317 =                   259
Obs       318 =                   239
Obs       319 =                   267
Obs       320 =                   179
Obs       321 =                   122
Obs       322 =                   364
Obs       323 =                   299
Obs       324 =                   452
Obs       325 =                    30
Obs       326 =                   151
Obs       327 =                    31
Obs       328 =                   320
Obs       329 =                   176
Obs       330 =                   266
Obs       331 =                   403
Obs       332 =                   119
Obs       333 =                   226
Obs       334 =                   191
Obs       335 =                   492
Obs       336 =                   107
Obs       337 =                   358
Obs       338 =                   379
Obs       339 =                     7
Obs       340 =                   338
Obs       341 =                   161
Obs       342 =                   105
Obs       343 =                   167
Obs       344 =                   268
Obs       345 =                   208
Obs       346 =                   446
Obs       347 =                   441
Obs       348 =                   264
Obs       349 =                   193
Obs       350 =                   250
Obs       351 =                    19
Obs       352 =                   313
Obs       353 =                   205
Obs       354 =                   102
Obs       355 =                   387
Obs       356 =                   469
Obs       357 =                   432
Obs       358 =                   163
Obs       359 =                   153
Obs       360 =                   467
Obs       361 =                   203
Obs       362 =                    84
Obs       363 =                   338
Obs       364 =                    99
Obs       365 =                   113
Obs       366 =                   324
Obs       367 =                   307
Obs       368 =                   239
Obs       369 =                   402
Obs       370 =                   284
Obs       371 =                   166
Obs       372 =                   285
Obs       373 =                   127
Obs       374 =                   102
Obs       375 =                   172
Obs       376 =                   327
Obs       377 =                   315
Obs       378 =                   213
Obs       379 =                    59
Obs       380 =                    30
Obs       381 =                   356
Obs       382 =                   291
Obs       383 =                   383
Obs       384 =                   417
Obs       385 =                   344
Obs       386 =                     9
Obs       387 =                   352
Obs       388 =                   425
Obs       389 =                   392
Obs       390 =                   406
Obs       391 =                   270
Obs       392 =                   356
Obs       393 =                   355
Obs       394 =                   104
Obs       395 =                   346
Obs       396 =                   240
Obs       397 =                    27
Obs       398 =                   274
Obs       399 =                   148
Obs       400 =                   113
Obs       401 =                   170
Obs       402 =                   372
Obs       403 =                    46
Obs       404 =                   298
Obs       405 =                    53
Obs       406 =                   215
Obs       407 =                   154
Obs       408 =                    88
Obs       409 =                   467
Obs       410 =                   202
Obs       411 =                   211
Obs       412 =                    70
Obs       413 =                   490
Obs       414 =                    69
Obs       415 =                   436
Obs       416 =                    51
Obs       417 =                   187
Obs       418 =                   326
Obs       419 =                   282
Obs       420 =                   181
Obs       421 =                   131
Obs       422 =                   397
Obs       423 =                   265
Obs       424 =                   253
Obs       425 =                   413
Obs       426 =                   188
Obs       427 =                    34
Obs       428 =                   306
Obs       429 =                   294
Obs       430 =                    87
Obs       431 =                   399
Obs       432 =                   280
Obs       433 =                   277
Obs       434 =                   320
Obs       435 =                   384
Obs       436 =                   135
Obs       437 =                   229
Obs       438 =                   483
Obs       439 =                     7
Obs       440 =                    38
Obs       441 =                   484
Obs       442 =                   187
Obs       443 =                    90
Obs       444 =                   101
Obs       445 =                    67
Obs       446 =                   399
Obs       447 =                   171
Obs       448 =                    12
Obs       449 =                   388
Obs       450 =                   242
Obs       451 =                   238
Obs       452 =                   421
Obs       453 =                   271
Obs       454 =                   457
Obs       455 =                   494
Obs       456 =                    18
Obs       457 =                   380
Obs       458 =                   254
Obs       459 =                    66
Obs       460 =                   472
Obs       461 =                   438
Obs       462 =                   456
Obs       463 =                   175
Obs       464 =                    69
Obs       465 =                   381
Obs       466 =                   227
Obs       467 =                    83
Obs       468 =                    19
Obs       469 =                   145
Obs       470 =                   107
Obs       471 =                   280
Obs       472 =                    26
Obs       473 =                   299
Obs       474 =                   197
Obs       475 =                    91
Obs       476 =                   305
Obs       477 =                   385
Obs       478 =                   184
Obs       479 =                   452
Obs       480 =                   183
Obs       481 =                   430
Obs       482 =                    97
Obs       483 =                   310
Obs       484 =                   269
Obs       485 =                   289
Obs       486 =                    52
Obs       487 =                   435
Obs       488 =                     3
Obs       489 =                   221
Obs       490 =                   319
Obs       491 =                   376
Obs       492 =                   246
Obs       493 =                   360
Obs       494 =                   258
Obs       495 =                   204
Obs       496 =                    93
Obs       497 =                   367
Obs       498 =                   262
Obs       499 =                   424
Obs       500 =                   491
Obs       501 =                   193
Obs       502 =                    23
Obs       503 =                    48
Obs       504 =                   153
Obs       505 =                   122
Obs       506 =                   192
Obs       507 =                   184
Obs       508 =                    40
Obs       509 =                    71
Obs       510 =                     1
Obs       511 =                   416
Obs       512 =                   105
Obs       513 =                    58
Obs       514 =                   208
Obs       515 =                   278
Obs       516 =                   190
Obs       517 =                   199
Obs       518 =                   157
Obs       519 =                   371
Obs       520 =                     8
Obs       521 =                    50
Obs       522 =                   500
Obs       523 =                   118
Obs       524 =                   200
Obs       525 =                   326
Obs       526 =                   182
Obs       527 =                   301
Obs       528 =                    12
Obs       529 =                   373
Obs       530 =                   207
Obs       531 =                   426
Obs       532 =                   422
Obs       533 =                   151
Obs       534 =                    96
Obs       535 =                    64
Obs       536 =                   189
Obs       537 =                   419
Obs       538 =                   428
Obs       539 =                    68
Obs       540 =                    60
Obs       541 =                    55
Obs       542 =                     8
Obs       543 =                   321
Obs       544 =                   109
Obs       545 =                   415
Obs       546 =                   251
Obs       547 =                   394
Obs       548 =                    92
Obs       549 =                   412
Obs       550 =                   176
Obs       551 =                   254
Obs       552 =                   110
Obs       553 =                   431
Obs       554 =                   427
Obs       555 =                   146
Obs       556 =                   477
Obs       557 =                   290
Obs       558 =                   427
Obs       559 =                    22
Obs       560 =                   195
Obs       561 =                   281
Obs       562 =                   354
Obs       563 =                    72
Obs       564 =                    25
Obs       565 =                   348
Obs       566 =                   256
Obs       567 =                   292
Obs       568 =                   352
Obs       569 =                   117
Obs       570 =                     3
Obs       571 =                   336
Obs       572 =                   449
Obs       573 =                   460
Obs       574 =                    89
Obs       575 =                   115
Obs       576 =                    86
Obs       577 =                   440
Obs       578 =                   114
Obs       579 =                   241
Obs       580 =                   231
Obs       581 =                   134
Obs       582 =                   322
Obs       583 =                   265
Obs       584 =                   384
Obs       585 =                   243
Obs       586 =                   398
Obs       587 =                   441
Obs       588 =                   129
Obs       589 =                   228
Obs       590 =                   233
Obs       591 =                    16
Obs       592 =                   361
Obs       593 =                   406
Obs       594 =                   318
Obs       595 =                   355
Obs       596 =                   447
Obs       597 =                   473
Obs       598 =                    77
Obs       599 =                   466
Obs       600 =                    78
Obs       601 =                    27
Obs       602 =                    74
Obs       603 =                   469
Obs       604 =                    49
Obs       605 =                   200
Obs       606 =                    80
Obs       607 =                    20
Obs       608 =                   141
Obs       609 =                   487
Obs       610 =                   327
Obs       611 =                   370
Obs       612 =                   319
Obs       613 =                   314
Obs       614 =                   308
Obs       615 =                   104
Obs       616 =                    15
Obs       617 =                   304
Obs       618 =                    14
Obs       619 =                   185
Obs       620 =                   111
Obs       621 =                    32
Obs       622 =                    72
Obs       623 =                    85
Obs       624 =                    73
Obs       625 =                   321
Obs       626 =                   434
Obs       627 =                   162
Obs       628 =                   343
Obs       629 =                   417
Obs       630 =                   204
Obs       631 =                   224
Obs       632 =                   198
Obs       633 =                    94
Obs       634 =                   103
Obs       635 =                   215
Obs       636 =                   438
Obs       637 =                   194
Obs       638 =                   171
Obs       639 =                    87
Obs       640 =                   425
Obs       641 =                   257
Obs       642 =                   329
Obs       643 =                   296
Obs       644 =                   394
Obs       645 =                   160
Obs       646 =                   411
Obs       647 =                   493
Obs       648 =                   412
Obs       649 =                   237
Obs       650 =                   297
Obs       651 =                   121
Obs       652 =                   274
Obs       653 =                   180
Obs       654 =                     5
Obs       655 =                    86
Obs       656 =                   360
Obs       657 =                   196
Obs       658 =                   233
Obs       659 =                   495
Obs       660 =                   324
Obs       661 =                   202
Obs       662 =                   401
Obs       663 =                   311
Obs       664 =                   401
Obs       665 =                   463
Obs       666 =                    74
Obs       667 =                   250
Obs       668 =                   377
Obs       669 =                   198
Obs       670 =                   393
Obs       671 =                   451
Obs       672 =                   175
Obs       673 =                   155
Obs       674 =                   411
Obs       675 =                   364
Obs       676 =                    99
Obs       677 =                   466
Obs       678 =                   323
Obs       679 =                   278
Obs       680 =                   305
Obs       681 =                   235
Obs       682 =                   418
Obs       683 =                    41
Obs       684 =                    78
Obs       685 =                   398
Obs       686 =                   405
Obs       687 =                   340
Obs       688 =                   160
Obs       689 =                    43
Obs       690 =                   339
Obs       691 =                   472
Obs       692 =                   125
Obs       693 =                   478
Obs       694 =                   273
Obs       695 =                   255
Obs       696 =                   424
Obs       697 =                   286
Obs       698 =                   390
Obs       699 =                    88
Obs       700 =                   382
Obs       701 =                   140
Obs       702 =                   362
Obs       703 =                   486
Obs       704 =                   344
Obs       705 =                   423
Obs       706 =                    13
Obs       707 =                   450
Obs       708 =                   491
Obs       709 =                    29
Obs       710 =                   363
Obs       711 =                   252
Obs       712 =                   293
Obs       713 =                     1
Obs       714 =                   444
Obs       715 =                   270
Obs       716 =                   100
Obs       717 =                   232
Obs       718 =                    49
Obs       719 =                   177
Obs       720 =                   470
Obs       721 =                   131
Obs       722 =                   476
Obs       723 =                   210
Obs       724 =                   155
Obs       725 =                   365
Obs       726 =                    39
Obs       727 =                   197
Obs       728 =                    77
Obs       729 =                   264
Obs       730 =                   362
Obs       731 =                   188
Obs       732 =                   376
Obs       733 =                   323
Obs       734 =                   448
Obs       735 =                   374
Obs       736 =                   214
Obs       737 =                   189
Obs       738 =                   363
Obs       739 =                    21
Obs       740 =                   217
Obs       741 =                    35
Obs       742 =                   348
Obs       743 =                   351
Obs       744 =                    15
Obs       745 =                   180
Obs       746 =                   129
Obs       747 =                   211
Obs       748 =                   312
Obs       749 =                   465
Obs       750 =                    76
Obs       751 =                   220
Obs       752 =                   209
Obs       753 =                   158
Obs       754 =                    61
Obs       755 =                   295
Obs       756 =                   419
Obs       757 =                   225
Obs       758 =                   414
Obs       759 =                   259
Obs       760 =                   210
Obs       761 =                   139
Obs       762 =                    94
Obs       763 =                    58
Obs       764 =                   366
Obs       765 =                   169
Obs       766 =                   173
Obs       767 =                   481
Obs       768 =                   216
Obs       769 =                   275
Obs       770 =                   143
Obs       771 =                     2
Obs       772 =                   149
Obs       773 =                   161
Obs       774 =                   241
Obs       775 =                   357
Obs       776 =                   345
Obs       777 =                   331
Obs       778 =                   358
Obs       779 =                   303
Obs       780 =                   178
Obs       781 =                   432
Obs       782 =                    36
Obs       783 =                   164
Obs       784 =                   231
Obs       785 =                   396
Obs       786 =                   292
Obs       787 =                   331
Obs       788 =                   410
Obs       789 =                   263
Obs       790 =                    16
Obs       791 =                    42
Obs       792 =                   318
Obs       793 =                   178
Obs       794 =                   167
Obs       795 =                   312
Obs       796 =                    47
Obs       797 =                   130
Obs       798 =                   497
Obs       799 =                   182
Obs       800 =                    48
Obs       801 =                   103
Obs       802 =                   485
Obs       803 =                   309
Obs       804 =                   345
Obs       805 =                   435
Obs       806 =                   156
Obs       807 =                   260
Obs       808 =                   396
Obs       809 =                   282
Obs       810 =                   245
Obs       811 =                   455
Obs       812 =                   430
Obs       813 =                   219
Obs       814 =                   373
Obs       815 =                   347
Obs       816 =                   392
Obs       817 =                   387
Obs       818 =                   418
Obs       819 =                   248
Obs       820 =                   310
Obs       821 =                   190
Obs       822 =                   385
Obs       823 =                   206
Obs       824 =                    35
Obs       825 =                   460
Obs       826 =                   147
Obs       827 =                    57
Obs       828 =                   186
Obs       829 =                    45
Obs       830 =                   341
Obs       831 =                   271
Obs       832 =                   433
Obs       833 =                    79
Obs       834 =                   124
Obs       835 =                    50
Obs       836 =                   415
Obs       837 =                    13
Obs       838 =                   378
Obs       839 =                   186
Obs       840 =                   495
Obs       841 =                   276
Obs       842 =                   174
Obs       843 =                   325
Obs       844 =                   110
Obs       845 =                   444
Obs       846 =                   169
Obs       847 =                    37
Obs       848 =                   218
Obs       849 =                   256
Obs       850 =                   474
Obs       851 =                   201
Obs       852 =                   349
Obs       853 =                   409
Obs       854 =                   416
Obs       855 =                   243
Obs       856 =                   288
Obs       857 =                   123
Obs       858 =                    79
Obs       859 =                   365
Obs       860 =                    46
Obs       861 =                   306
Obs       862 =                   374
Obs       863 =                   135
Obs       864 =                   156
Obs       865 =                   497
Obs       866 =                   382
Obs       867 =                   194
Obs       868 =                   480
Obs       869 =                    24
Obs       870 =                    23
Obs       871 =                   222
Obs       872 =                   408
Obs       873 =                    31
Obs       874 =                    92
Obs       875 =                   346
Obs       876 =                   468
Obs       877 =                   232
Obs       878 =                   136
Obs       879 =                   317
Obs       880 =                    54
Obs       881 =                   117
Obs       882 =                   379
Obs       883 =                   159
Obs       884 =                   234
Obs       885 =                   483
Obs       886 =                   213
Obs       887 =                   168
Obs       888 =                   395
Obs       889 =                    83
Obs       890 =                   465
Obs       891 =                   273
Obs       892 =                   132
Obs       893 =                    96
Obs       894 =                   377
Obs       895 =                   125
Obs       896 =                   116
Obs       897 =                    68
Obs       898 =                    71
Obs       899 =                   391
Obs       900 =                   228
Obs       901 =                   114
Obs       902 =                   283
Obs       903 =                   370
Obs       904 =                    38
Obs       905 =                   458
Obs       906 =                    11
Obs       907 =                   397
Obs       908 =                    26
Obs       909 =                   226
Obs       910 =                   150
Obs       911 =                   220
Obs       912 =                   309
Obs       913 =                   251
Obs       914 =                   242
Obs       915 =                   165
Obs       916 =                   268
Obs       917 =                    66
Obs       918 =                   496
Obs       919 =                   357
Obs       920 =                   300
Obs       921 =                   112
Obs       922 =                   247
Obs       923 =                   366
Obs       924 =                   453
Obs       925 =                   238
Obs       926 =                   294
Obs       927 =                    73
Obs       928 =                   494
Obs       929 =                    75
Obs       930 =                   303
Obs       931 =                   404
Obs       932 =                   336
Obs       933 =                   137
Obs       934 =                    10
Obs       935 =                   476
Obs       936 =                   482
Obs       937 =                   244
Obs       938 =                    52
Obs       939 =                   177
Obs       940 =                   440
Obs       941 =                   248
Obs       942 =                   461
Obs       943 =                   258
Obs       944 =                   121
Obs       945 =                   287
Obs       946 =                   284
Obs       947 =                   286
Obs       948 =                    89
Obs       949 =                   142
Obs       950 =                   237
Obs       951 =                   482
Obs       952 =                   468
Obs       953 =                   479
Obs       954 =                   335
Obs       955 =                   317
Obs       956 =                   301
Obs       957 =                   328
Obs       958 =                   437
Obs       959 =                   164
Obs       960 =                   369
Obs       961 =                   304
Obs       962 =                   291
Obs       963 =                   450
Obs       964 =                   236
Obs       965 =                   244
Obs       966 =                   116
Obs       967 =                   257
Obs       968 =                   464
Obs       969 =                   316
Obs       970 =                   431
Obs       971 =                   260
Obs       972 =                   108
Obs       973 =                    28
Obs       974 =                    17
Obs       975 =                   329
Obs       976 =                    20
Obs       977 =                    64
Obs       978 =                   240
Obs       979 =                   290
Obs       980 =                    45
Obs       981 =                   216
Obs       982 =                   448
Obs       983 =                   261
Obs       984 =                    84
Obs       985 =                   487
Obs       986 =                   289
Obs       987 =                   144
Obs       988 =                   461
Obs       989 =                   269
Obs       990 =                   439
Obs       991 =                   359
Obs       992 =                   471
Obs       993 =                   106
Obs       994 =                   372
Obs       995 =                   445
Obs       996 =                   420
Obs       997 =                   489
Obs       998 =                   486
Obs       999 =                    56
counting sort on hash; min = 1, max = 500
N = 1,000; 500 balanced groups of size 2
(warning: forcing non-multi-threaded version)
In memory: groupsub rnorm grouplong sum sd
Hashing 2 integer by variables to whole-nubmer index.
Obs         0 =                   251
Obs         1 =                     1
Obs         2 =                   251
Obs         3 =                   251
Obs         4 =                   252
Obs         5 =                   252
Obs         6 =                     2
Obs         7 =                     2
Obs         8 =                   253
Obs         9 =                   253
Obs        10 =                   253
Obs        11 =                     3
Obs        12 =                   254
Obs        13 =                     4
Obs        14 =                     4
Obs        15 =                   254
Obs        16 =                     5
Obs        17 =                   255
Obs        18 =                     5
Obs        19 =                   255
Obs        20 =                     6
Obs        21 =                   256
Obs        22 =                     6
Obs        23 =                     6
Obs        24 =                   257
Obs        25 =                     7
Obs        26 =                   257
Obs        27 =                     7
Obs        28 =                     8
Obs        29 =                   258
Obs        30 =                   258
Obs        31 =                     8
Obs        32 =                   259
Obs        33 =                     9
Obs        34 =                   259
Obs        35 =                     9
Obs        36 =                   260
Obs        37 =                    10
Obs        38 =                    10
Obs        39 =                    10
Obs        40 =                    11
Obs        41 =                    11
Obs        42 =                    11
Obs        43 =                   261
Obs        44 =                   262
Obs        45 =                    12
Obs        46 =                   262
Obs        47 =                   262
Obs        48 =                   263
Obs        49 =                   263
Obs        50 =                   263
Obs        51 =                    13
Obs        52 =                   264
Obs        53 =                   264
Obs        54 =                   264
Obs        55 =                   264
Obs        56 =                    15
Obs        57 =                   265
Obs        58 =                    15
Obs        59 =                    15
Obs        60 =                    16
Obs        61 =                    16
Obs        62 =                   266
Obs        63 =                    16
Obs        64 =                    17
Obs        65 =                   267
Obs        66 =                    17
Obs        67 =                    17
Obs        68 =                   268
Obs        69 =                    18
Obs        70 =                    18
Obs        71 =                    18
Obs        72 =                    19
Obs        73 =                    19
Obs        74 =                   269
Obs        75 =                   269
Obs        76 =                   270
Obs        77 =                   270
Obs        78 =                   270
Obs        79 =                    20
Obs        80 =                   271
Obs        81 =                   271
Obs        82 =                   271
Obs        83 =                    21
Obs        84 =                   272
Obs        85 =                    22
Obs        86 =                    22
Obs        87 =                    22
Obs        88 =                    23
Obs        89 =                   273
Obs        90 =                    23
Obs        91 =                   273
Obs        92 =                   274
Obs        93 =                   274
Obs        94 =                   274
Obs        95 =                   274
Obs        96 =                   275
Obs        97 =                   275
Obs        98 =                    25
Obs        99 =                    25
Obs       100 =                    26
Obs       101 =                    26
Obs       102 =                   276
Obs       103 =                    26
Obs       104 =                   277
Obs       105 =                    27
Obs       106 =                    27
Obs       107 =                   277
Obs       108 =                   278
Obs       109 =                    28
Obs       110 =                    28
Obs       111 =                    28
Obs       112 =                    29
Obs       113 =                    29
Obs       114 =                   279
Obs       115 =                   279
Obs       116 =                    30
Obs       117 =                   280
Obs       118 =                    30
Obs       119 =                   280
Obs       120 =                   281
Obs       121 =                   281
Obs       122 =                    31
Obs       123 =                    31
Obs       124 =                   282
Obs       125 =                   282
Obs       126 =                   282
Obs       127 =                   282
Obs       128 =                    33
Obs       129 =                    33
Obs       130 =                   283
Obs       131 =                   283
Obs       132 =                   284
Obs       133 =                   284
Obs       134 =                   284
Obs       135 =                    34
Obs       136 =                   285
Obs       137 =                    35
Obs       138 =                    35
Obs       139 =                   285
Obs       140 =                   286
Obs       141 =                   286
Obs       142 =                   286
Obs       143 =                   286
Obs       144 =                   287
Obs       145 =                    37
Obs       146 =                   287
Obs       147 =                   287
Obs       148 =                    38
Obs       149 =                    38
Obs       150 =                   288
Obs       151 =                   288
Obs       152 =                   289
Obs       153 =                   289
Obs       154 =                    39
Obs       155 =                    39
Obs       156 =                   290
Obs       157 =                   290
Obs       158 =                    40
Obs       159 =                    40
Obs       160 =                    41
Obs       161 =                   291
Obs       162 =                    41
Obs       163 =                    41
Obs       164 =                   292
Obs       165 =                   292
Obs       166 =                   292
Obs       167 =                   292
Obs       168 =                    43
Obs       169 =                   293
Obs       170 =                    43
Obs       171 =                    43
Obs       172 =                   294
Obs       173 =                   294
Obs       174 =                    44
Obs       175 =                    44
Obs       176 =                   295
Obs       177 =                   295
Obs       178 =                   295
Obs       179 =                    45
Obs       180 =                   296
Obs       181 =                   296
Obs       182 =                    46
Obs       183 =                    46
Obs       184 =                    47
Obs       185 =                    47
Obs       186 =                   297
Obs       187 =                   297
Obs       188 =                   298
Obs       189 =                   298
Obs       190 =                    48
Obs       191 =                    48
Obs       192 =                    49
Obs       193 =                    49
Obs       194 =                    49
Obs       195 =                    49
Obs       196 =                    50
Obs       197 =                   300
Obs       198 =                    50
Obs       199 =                    50
Obs       200 =                   301
Obs       201 =                   301
Obs       202 =                   301
Obs       203 =                   301
Obs       204 =                    52
Obs       205 =                    52
Obs       206 =                    52
Obs       207 =                    52
Obs       208 =                    53
Obs       209 =                    53
Obs       210 =                    53
Obs       211 =                   303
Obs       212 =                   304
Obs       213 =                    54
Obs       214 =                    54
Obs       215 =                   304
Obs       216 =                    55
Obs       217 =                   305
Obs       218 =                   305
Obs       219 =                    55
Obs       220 =                    56
Obs       221 =                   306
Obs       222 =                    56
Obs       223 =                   306
Obs       224 =                    57
Obs       225 =                    57
Obs       226 =                   307
Obs       227 =                   307
Obs       228 =                   308
Obs       229 =                    58
Obs       230 =                    58
Obs       231 =                   308
Obs       232 =                   309
Obs       233 =                   309
Obs       234 =                   309
Obs       235 =                    59
Obs       236 =                   310
Obs       237 =                    60
Obs       238 =                    60
Obs       239 =                    60
Obs       240 =                    61
Obs       241 =                    61
Obs       242 =                    61
Obs       243 =                   311
Obs       244 =                   312
Obs       245 =                    62
Obs       246 =                   312
Obs       247 =                    62
Obs       248 =                   313
Obs       249 =                    63
Obs       250 =                   313
Obs       251 =                    63
Obs       252 =                    64
Obs       253 =                    64
Obs       254 =                   314
Obs       255 =                    64
Obs       256 =                   315
Obs       257 =                    65
Obs       258 =                   315
Obs       259 =                   315
Obs       260 =                   316
Obs       261 =                    66
Obs       262 =                   316
Obs       263 =                    66
Obs       264 =                    67
Obs       265 =                    67
Obs       266 =                    67
Obs       267 =                    67
Obs       268 =                    68
Obs       269 =                   318
Obs       270 =                   318
Obs       271 =                    68
Obs       272 =                    69
Obs       273 =                    69
Obs       274 =                   319
Obs       275 =                    69
Obs       276 =                    70
Obs       277 =                    70
Obs       278 =                   320
Obs       279 =                   320
Obs       280 =                    71
Obs       281 =                    71
Obs       282 =                    71
Obs       283 =                    71
Obs       284 =                    72
Obs       285 =                   322
Obs       286 =                   322
Obs       287 =                   322
Obs       288 =                   323
Obs       289 =                   323
Obs       290 =                    73
Obs       291 =                    73
Obs       292 =                   324
Obs       293 =                   324
Obs       294 =                    74
Obs       295 =                   324
Obs       296 =                    75
Obs       297 =                   325
Obs       298 =                   325
Obs       299 =                    75
Obs       300 =                   326
Obs       301 =                    76
Obs       302 =                    76
Obs       303 =                    76
Obs       304 =                   327
Obs       305 =                    77
Obs       306 =                    77
Obs       307 =                   327
Obs       308 =                   328
Obs       309 =                   328
Obs       310 =                   328
Obs       311 =                   328
Obs       312 =                    79
Obs       313 =                    79
Obs       314 =                   329
Obs       315 =                   329
Obs       316 =                    80
Obs       317 =                   330
Obs       318 =                    80
Obs       319 =                   330
Obs       320 =                    81
Obs       321 =                    81
Obs       322 =                   331
Obs       323 =                   331
Obs       324 =                   332
Obs       325 =                    82
Obs       326 =                    82
Obs       327 =                    82
Obs       328 =                   333
Obs       329 =                    83
Obs       330 =                   333
Obs       331 =                   333
Obs       332 =                    84
Obs       333 =                    84
Obs       334 =                    84
Obs       335 =                   334
Obs       336 =                    85
Obs       337 =                   335
Obs       338 =                   335
Obs       339 =                    85
Obs       340 =                   336
Obs       341 =                    86
Obs       342 =                    86
Obs       343 =                    86
Obs       344 =                   337
Obs       345 =                    87
Obs       346 =                   337
Obs       347 =                   337
Obs       348 =                   338
Obs       349 =                    88
Obs       350 =                    88
Obs       351 =                    88
Obs       352 =                   339
Obs       353 =                    89
Obs       354 =                    89
Obs       355 =                   339
Obs       356 =                   340
Obs       357 =                   340
Obs       358 =                    90
Obs       359 =                    90
Obs       360 =                   341
Obs       361 =                    91
Obs       362 =                    91
Obs       363 =                   341
Obs       364 =                    92
Obs       365 =                    92
Obs       366 =                   342
Obs       367 =                   342
Obs       368 =                    93
Obs       369 =                   343
Obs       370 =                   343
Obs       371 =                    93
Obs       372 =                   344
Obs       373 =                    94
Obs       374 =                    94
Obs       375 =                    94
Obs       376 =                   345
Obs       377 =                   345
Obs       378 =                    95
Obs       379 =                    95
Obs       380 =                    96
Obs       381 =                   346
Obs       382 =                   346
Obs       383 =                   346
Obs       384 =                   347
Obs       385 =                   347
Obs       386 =                    97
Obs       387 =                   347
Obs       388 =                   348
Obs       389 =                   348
Obs       390 =                   348
Obs       391 =                   348
Obs       392 =                   349
Obs       393 =                   349
Obs       394 =                    99
Obs       395 =                   349
Obs       396 =                   100
Obs       397 =                   100
Obs       398 =                   350
Obs       399 =                   100
Obs       400 =                   101
Obs       401 =                   101
Obs       402 =                   351
Obs       403 =                   101
Obs       404 =                   352
Obs       405 =                   102
Obs       406 =                   102
Obs       407 =                   102
Obs       408 =                   103
Obs       409 =                   353
Obs       410 =                   103
Obs       411 =                   103
Obs       412 =                   104
Obs       413 =                   354
Obs       414 =                   104
Obs       415 =                   354
Obs       416 =                   105
Obs       417 =                   105
Obs       418 =                   355
Obs       419 =                   355
Obs       420 =                   106
Obs       421 =                   106
Obs       422 =                   356
Obs       423 =                   356
Obs       424 =                   357
Obs       425 =                   357
Obs       426 =                   107
Obs       427 =                   107
Obs       428 =                   358
Obs       429 =                   358
Obs       430 =                   108
Obs       431 =                   358
Obs       432 =                   359
Obs       433 =                   359
Obs       434 =                   359
Obs       435 =                   359
Obs       436 =                   110
Obs       437 =                   110
Obs       438 =                   360
Obs       439 =                   110
Obs       440 =                   111
Obs       441 =                   361
Obs       442 =                   111
Obs       443 =                   111
Obs       444 =                   112
Obs       445 =                   112
Obs       446 =                   362
Obs       447 =                   112
Obs       448 =                   113
Obs       449 =                   363
Obs       450 =                   113
Obs       451 =                   113
Obs       452 =                   364
Obs       453 =                   364
Obs       454 =                   364
Obs       455 =                   364
Obs       456 =                   115
Obs       457 =                   365
Obs       458 =                   365
Obs       459 =                   115
Obs       460 =                   366
Obs       461 =                   366
Obs       462 =                   366
Obs       463 =                   116
Obs       464 =                   117
Obs       465 =                   367
Obs       466 =                   117
Obs       467 =                   117
Obs       468 =                   118
Obs       469 =                   118
Obs       470 =                   118
Obs       471 =                   368
Obs       472 =                   119
Obs       473 =                   369
Obs       474 =                   119
Obs       475 =                   119
Obs       476 =                   370
Obs       477 =                   370
Obs       478 =                   120
Obs       479 =                   370
Obs       480 =                   121
Obs       481 =                   371
Obs       482 =                   121
Obs       483 =                   371
Obs       484 =                   372
Obs       485 =                   372
Obs       486 =                   122
Obs       487 =                   372
Obs       488 =                   123
Obs       489 =                   123
Obs       490 =                   373
Obs       491 =                   373
Obs       492 =                   124
Obs       493 =                   374
Obs       494 =                   374
Obs       495 =                   124
Obs       496 =                   125
Obs       497 =                   375
Obs       498 =                   375
Obs       499 =                   375
Obs       500 =                   376
Obs       501 =                   126
Obs       502 =                   126
Obs       503 =                   126
Obs       504 =                   127
Obs       505 =                   127
Obs       506 =                   127
Obs       507 =                   127
Obs       508 =                   128
Obs       509 =                   128
Obs       510 =                   128
Obs       511 =                   378
Obs       512 =                   129
Obs       513 =                   129
Obs       514 =                   129
Obs       515 =                   379
Obs       516 =                   130
Obs       517 =                   130
Obs       518 =                   130
Obs       519 =                   380
Obs       520 =                   131
Obs       521 =                   131
Obs       522 =                   381
Obs       523 =                   131
Obs       524 =                   132
Obs       525 =                   382
Obs       526 =                   132
Obs       527 =                   382
Obs       528 =                   133
Obs       529 =                   383
Obs       530 =                   133
Obs       531 =                   383
Obs       532 =                   384
Obs       533 =                   134
Obs       534 =                   134
Obs       535 =                   134
Obs       536 =                   135
Obs       537 =                   385
Obs       538 =                   385
Obs       539 =                   135
Obs       540 =                   136
Obs       541 =                   136
Obs       542 =                   136
Obs       543 =                   386
Obs       544 =                   137
Obs       545 =                   387
Obs       546 =                   387
Obs       547 =                   387
Obs       548 =                   138
Obs       549 =                   388
Obs       550 =                   138
Obs       551 =                   388
Obs       552 =                   139
Obs       553 =                   389
Obs       554 =                   389
Obs       555 =                   139
Obs       556 =                   390
Obs       557 =                   390
Obs       558 =                   390
Obs       559 =                   140
Obs       560 =                   141
Obs       561 =                   391
Obs       562 =                   391
Obs       563 =                   141
Obs       564 =                   142
Obs       565 =                   392
Obs       566 =                   392
Obs       567 =                   392
Obs       568 =                   393
Obs       569 =                   143
Obs       570 =                   143
Obs       571 =                   393
Obs       572 =                   394
Obs       573 =                   394
Obs       574 =                   144
Obs       575 =                   144
Obs       576 =                   145
Obs       577 =                   395
Obs       578 =                   145
Obs       579 =                   145
Obs       580 =                   146
Obs       581 =                   146
Obs       582 =                   396
Obs       583 =                   396
Obs       584 =                   397
Obs       585 =                   147
Obs       586 =                   397
Obs       587 =                   397
Obs       588 =                   148
Obs       589 =                   148
Obs       590 =                   148
Obs       591 =                   148
Obs       592 =                   399
Obs       593 =                   399
Obs       594 =                   399
Obs       595 =                   399
Obs       596 =                   400
Obs       597 =                   400
Obs       598 =                   150
Obs       599 =                   400
Obs       600 =                   151
Obs       601 =                   151
Obs       602 =                   151
Obs       603 =                   401
Obs       604 =                   152
Obs       605 =                   152
Obs       606 =                   152
Obs       607 =                   152
Obs       608 =                   153
Obs       609 =                   403
Obs       610 =                   403
Obs       611 =                   403
Obs       612 =                   404
Obs       613 =                   404
Obs       614 =                   404
Obs       615 =                   154
Obs       616 =                   155
Obs       617 =                   405
Obs       618 =                   155
Obs       619 =                   155
Obs       620 =                   156
Obs       621 =                   156
Obs       622 =                   156
Obs       623 =                   156
Obs       624 =                   157
Obs       625 =                   407
Obs       626 =                   407
Obs       627 =                   157
Obs       628 =                   408
Obs       629 =                   408
Obs       630 =                   158
Obs       631 =                   158
Obs       632 =                   159
Obs       633 =                   159
Obs       634 =                   159
Obs       635 =                   159
Obs       636 =                   410
Obs       637 =                   160
Obs       638 =                   160
Obs       639 =                   160
Obs       640 =                   411
Obs       641 =                   411
Obs       642 =                   411
Obs       643 =                   411
Obs       644 =                   412
Obs       645 =                   162
Obs       646 =                   412
Obs       647 =                   412
Obs       648 =                   413
Obs       649 =                   163
Obs       650 =                   413
Obs       651 =                   163
Obs       652 =                   414
Obs       653 =                   164
Obs       654 =                   164
Obs       655 =                   164
Obs       656 =                   415
Obs       657 =                   165
Obs       658 =                   165
Obs       659 =                   415
Obs       660 =                   416
Obs       661 =                   166
Obs       662 =                   416
Obs       663 =                   416
Obs       664 =                   417
Obs       665 =                   417
Obs       666 =                   167
Obs       667 =                   167
Obs       668 =                   418
Obs       669 =                   168
Obs       670 =                   418
Obs       671 =                   418
Obs       672 =                   169
Obs       673 =                   169
Obs       674 =                   419
Obs       675 =                   419
Obs       676 =                   170
Obs       677 =                   420
Obs       678 =                   420
Obs       679 =                   420
Obs       680 =                   421
Obs       681 =                   171
Obs       682 =                   421
Obs       683 =                   171
Obs       684 =                   172
Obs       685 =                   422
Obs       686 =                   422
Obs       687 =                   422
Obs       688 =                   173
Obs       689 =                   173
Obs       690 =                   423
Obs       691 =                   423
Obs       692 =                   174
Obs       693 =                   424
Obs       694 =                   424
Obs       695 =                   424
Obs       696 =                   425
Obs       697 =                   425
Obs       698 =                   425
Obs       699 =                   175
Obs       700 =                   426
Obs       701 =                   176
Obs       702 =                   426
Obs       703 =                   426
Obs       704 =                   427
Obs       705 =                   427
Obs       706 =                   177
Obs       707 =                   427
Obs       708 =                   428
Obs       709 =                   178
Obs       710 =                   428
Obs       711 =                   428
Obs       712 =                   429
Obs       713 =                   179
Obs       714 =                   429
Obs       715 =                   429
Obs       716 =                   180
Obs       717 =                   180
Obs       718 =                   180
Obs       719 =                   180
Obs       720 =                   431
Obs       721 =                   181
Obs       722 =                   431
Obs       723 =                   181
Obs       724 =                   182
Obs       725 =                   432
Obs       726 =                   182
Obs       727 =                   182
Obs       728 =                   183
Obs       729 =                   433
Obs       730 =                   433
Obs       731 =                   183
Obs       732 =                   434
Obs       733 =                   434
Obs       734 =                   434
Obs       735 =                   434
Obs       736 =                   185
Obs       737 =                   185
Obs       738 =                   435
Obs       739 =                   185
Obs       740 =                   186
Obs       741 =                   186
Obs       742 =                   436
Obs       743 =                   436
Obs       744 =                   187
Obs       745 =                   187
Obs       746 =                   187
Obs       747 =                   187
Obs       748 =                   438
Obs       749 =                   438
Obs       750 =                   188
Obs       751 =                   188
Obs       752 =                   189
Obs       753 =                   189
Obs       754 =                   189
Obs       755 =                   439
Obs       756 =                   440
Obs       757 =                   190
Obs       758 =                   440
Obs       759 =                   440
Obs       760 =                   191
Obs       761 =                   191
Obs       762 =                   191
Obs       763 =                   191
Obs       764 =                   442
Obs       765 =                   192
Obs       766 =                   192
Obs       767 =                   442
Obs       768 =                   193
Obs       769 =                   443
Obs       770 =                   193
Obs       771 =                   193
Obs       772 =                   194
Obs       773 =                   194
Obs       774 =                   194
Obs       775 =                   444
Obs       776 =                   445
Obs       777 =                   445
Obs       778 =                   445
Obs       779 =                   445
Obs       780 =                   196
Obs       781 =                   446
Obs       782 =                   196
Obs       783 =                   196
Obs       784 =                   197
Obs       785 =                   447
Obs       786 =                   447
Obs       787 =                   447
Obs       788 =                   448
Obs       789 =                   448
Obs       790 =                   198
Obs       791 =                   198
Obs       792 =                   449
Obs       793 =                   199
Obs       794 =                   199
Obs       795 =                   449
Obs       796 =                   200
Obs       797 =                   200
Obs       798 =                   450
Obs       799 =                   200
Obs       800 =                   201
Obs       801 =                   201
Obs       802 =                   451
Obs       803 =                   451
Obs       804 =                   452
Obs       805 =                   452
Obs       806 =                   202
Obs       807 =                   452
Obs       808 =                   453
Obs       809 =                   453
Obs       810 =                   203
Obs       811 =                   453
Obs       812 =                   454
Obs       813 =                   204
Obs       814 =                   454
Obs       815 =                   454
Obs       816 =                   455
Obs       817 =                   455
Obs       818 =                   455
Obs       819 =                   205
Obs       820 =                   456
Obs       821 =                   206
Obs       822 =                   456
Obs       823 =                   206
Obs       824 =                   207
Obs       825 =                   457
Obs       826 =                   207
Obs       827 =                   207
Obs       828 =                   208
Obs       829 =                   208
Obs       830 =                   458
Obs       831 =                   458
Obs       832 =                   459
Obs       833 =                   209
Obs       834 =                   209
Obs       835 =                   209
Obs       836 =                   460
Obs       837 =                   210
Obs       838 =                   460
Obs       839 =                   210
Obs       840 =                   461
Obs       841 =                   461
Obs       842 =                   211
Obs       843 =                   461
Obs       844 =                   212
Obs       845 =                   462
Obs       846 =                   212
Obs       847 =                   212
Obs       848 =                   213
Obs       849 =                   463
Obs       850 =                   463
Obs       851 =                   213
Obs       852 =                   464
Obs       853 =                   464
Obs       854 =                   464
Obs       855 =                   214
Obs       856 =                   465
Obs       857 =                   215
Obs       858 =                   215
Obs       859 =                   465
Obs       860 =                   216
Obs       861 =                   466
Obs       862 =                   466
Obs       863 =                   216
Obs       864 =                   217
Obs       865 =                   467
Obs       866 =                   467
Obs       867 =                   217
Obs       868 =                   468
Obs       869 =                   218
Obs       870 =                   218
Obs       871 =                   218
Obs       872 =                   469
Obs       873 =                   219
Obs       874 =                   219
Obs       875 =                   469
Obs       876 =                   470
Obs       877 =                   220
Obs       878 =                   220
Obs       879 =                   470
Obs       880 =                   221
Obs       881 =                   221
Obs       882 =                   471
Obs       883 =                   221
Obs       884 =                   222
Obs       885 =                   472
Obs       886 =                   222
Obs       887 =                   222
Obs       888 =                   473
Obs       889 =                   223
Obs       890 =                   473
Obs       891 =                   473
Obs       892 =                   224
Obs       893 =                   224
Obs       894 =                   474
Obs       895 =                   224
Obs       896 =                   225
Obs       897 =                   225
Obs       898 =                   225
Obs       899 =                   475
Obs       900 =                   226
Obs       901 =                   226
Obs       902 =                   476
Obs       903 =                   476
Obs       904 =                   227
Obs       905 =                   477
Obs       906 =                   227
Obs       907 =                   477
Obs       908 =                   228
Obs       909 =                   228
Obs       910 =                   228
Obs       911 =                   228
Obs       912 =                   479
Obs       913 =                   479
Obs       914 =                   229
Obs       915 =                   229
Obs       916 =                   480
Obs       917 =                   230
Obs       918 =                   480
Obs       919 =                   480
Obs       920 =                   481
Obs       921 =                   231
Obs       922 =                   231
Obs       923 =                   481
Obs       924 =                   482
Obs       925 =                   232
Obs       926 =                   482
Obs       927 =                   232
Obs       928 =                   483
Obs       929 =                   233
Obs       930 =                   483
Obs       931 =                   483
Obs       932 =                   484
Obs       933 =                   234
Obs       934 =                   234
Obs       935 =                   484
Obs       936 =                   485
Obs       937 =                   235
Obs       938 =                   235
Obs       939 =                   235
Obs       940 =                   486
Obs       941 =                   236
Obs       942 =                   486
Obs       943 =                   486
Obs       944 =                   237
Obs       945 =                   487
Obs       946 =                   487
Obs       947 =                   487
Obs       948 =                   238
Obs       949 =                   238
Obs       950 =                   238
Obs       951 =                   488
Obs       952 =                   489
Obs       953 =                   489
Obs       954 =                   489
Obs       955 =                   489
Obs       956 =                   490
Obs       957 =                   490
Obs       958 =                   490
Obs       959 =                   240
Obs       960 =                   491
Obs       961 =                   491
Obs       962 =                   491
Obs       963 =                   491
Obs       964 =                   242
Obs       965 =                   242
Obs       966 =                   242
Obs       967 =                   492
Obs       968 =                   493
Obs       969 =                   493
Obs       970 =                   493
Obs       971 =                   493
Obs       972 =                   244
Obs       973 =                   244
Obs       974 =                   244
Obs       975 =                   494
Obs       976 =                   245
Obs       977 =                   245
Obs       978 =                   245
Obs       979 =                   495
Obs       980 =                   246
Obs       981 =                   246
Obs       982 =                   496
Obs       983 =                   496
Obs       984 =                   247
Obs       985 =                   497
Obs       986 =                   497
Obs       987 =                   247
Obs       988 =                   498
Obs       989 =                   498
Obs       990 =                   498
Obs       991 =                   498
Obs       992 =                   499
Obs       993 =                   249
Obs       994 =                   499
Obs       995 =                   499
Obs       996 =                   500
Obs       997 =                   500
Obs       998 =                   500
Obs       999 =                   250
counting sort on hash; min = 1, max = 500
N = 1,000; 469 unbalanced groups of sizes 1 to 4
(warning: forcing non-multi-threaded version)
In memory: groupstr groupsub rnorm sum sd
Using 128-bit hash to index 2 by variables (string and numeric).
radix sort on hash: loops = 4, bits = 16, shift = 65,536
N = 1,000; 500 balanced groups of size 2

Passed! checks_byvars_gcollapse debug_force_single

--------------------------------------------------------------------------------
checks_options_gcollapse debug_force_single
--------------------------------------------------------------------------------


    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
       rsort |       181   -.0118814     .276691  -.4938449   .4965275
Obs = 200; Groups = 10
  group was float now byte
  groupsub was float now byte
  grouplong was long now byte
  (1,800 bytes saved)
(warning: forcing non-multi-threaded version)
Parsed by variables, sources, and targets; .031 seconds
In memory: groupstr mean mean2 count count2 median median2 iqr iqr2
Generated additional targets; 0 seconds
        Plugin step 1: stata parsing done; 0.000 seconds.
Using 128-bit hash to index string by variable.
        Plugin step 2: Hashed by variables; 0.000 seconds.
radix sort on hash: loops = 4, bits = 16, shift = 65,536
        Plugin step 3: Sorted on integer-only hash index; 0.001 seconds.
        Plugin step 4: Set up variables for main group loop; 0.000 seconds.
N = 200; 10 balanced groups of size 20
        Plugin step 5.1: Read source variables sequentially; 0.000 seconds.
        Plugin step 5.2: Collapsed source variables; 0.000 seconds.
        Plugin step 6: Copied collapsed variables back to stata; 0.000 seconds.
The plugin executed; .001 seconds
Program exit executed; .002 seconds
The program executed; .034 seconds
(warning: forcing non-multi-threaded version)
In memory: groupstr mean
Using 128-bit hash to index string by variable.
radix sort on hash: loops = 4, bits = 16, shift = 65,536
N = 200; 10 balanced groups of size 20
(warning: forcing non-multi-threaded version)
In memory: groupstr mean mean2 count count2 median median2 iqr iqr2
Using 128-bit hash to index string by variable.
radix sort on hash: loops = 4, bits = 16, shift = 65,536
N = 200; 10 balanced groups of size 20
(warning: forcing non-multi-threaded version)
In memory: groupstr mean mean2 count count2 median median2 iqr iqr2
Using 128-bit hash to index string by variable.
radix sort on hash: loops = 4, bits = 16, shift = 65,536
N = 200; 10 balanced groups of size 20
(warning: forcing non-multi-threaded version)
Parsed by variables, sources, and targets; .004 seconds
In memory: groupstr mean mean2 count count2 median median2 iqr iqr2
Generated additional targets; .001 seconds
        Plugin step 1: stata parsing done; 0.000 seconds.
Using 128-bit hash to index string by variable.
        Plugin step 2: Hashed by variables; 0.000 seconds.
radix sort on hash: loops = 4, bits = 16, shift = 65,536
        Plugin step 3: Sorted on integer-only hash index; 0.001 seconds.
        Plugin step 4: Set up variables for main group loop; 0.000 seconds.
N = 200; 10 balanced groups of size 20
        Plugin step 5.1: Read source variables sequentially; 0.000 seconds.
        Plugin step 5.2: Collapsed source variables; 0.000 seconds.
        Plugin step 6: Copied collapsed variables back to stata; 0.000 seconds.
The plugin executed; 0 seconds
Program exit executed; .002 seconds
The program executed; .007 seconds
(warning: forcing non-multi-threaded version)
(warning: forcing non-multi-threaded version)

     +-----------------------------------------------------------------------------------------------------------------------+
  1. | group |                     groupstr | groupsub | groupf~t |     rsort |     rnorm | groupl~g |      mean |     mean2 |
     |    10 | i am a modesly long string10 |        2 |      2.5 | -.4938449 | -.0040006 |        1 |  .0232557 |  .0232557 |
     |-----------------------------------------------------------------------------------------------------------------------|
     |     count      |     count2      |        median      |        median2      |           iqr      |          iqr2      |
     |        16      |         16      |     -.1594192      |      -.1594192      |      1.541633      |      1.541633      |
     +-----------------------------------------------------------------------------------------------------------------------+

     +-----------------------------------------------------------------------------------------------------------------------+
  2. | group |                     groupstr | groupsub | groupf~t |     rsort |     rnorm | groupl~g |      mean |     mean2 |
     |     6 |  i am a modesly long string6 |        1 |      1.5 |         . | -1.418848 |        1 | -.1650908 | -.1650908 |
     |-----------------------------------------------------------------------------------------------------------------------|
     |     count      |     count2      |        median      |        median2      |           iqr      |          iqr2      |
     |        19      |         19      |      .2513901      |       .2513901      |      2.087131      |      2.087131      |
     +-----------------------------------------------------------------------------------------------------------------------+

     +-----------------------------------------------------------------------------------------------------------------------+
  3. | group |                     groupstr | groupsub | groupf~t |     rsort |     rnorm | groupl~g |      mean |     mean2 |
     |     9 |  i am a modesly long string9 |        1 |      1.5 | -.4890387 |  .6816186 |        1 | -.1266331 | -.1266331 |
     |-----------------------------------------------------------------------------------------------------------------------|
     |     count      |     count2      |        median      |        median2      |           iqr      |          iqr2      |
     |        19      |         19      |      .0585369      |       .0585369      |      1.085953      |      1.085953      |
     +-----------------------------------------------------------------------------------------------------------------------+

     +-----------------------------------------------------------------------------------------------------------------------+
  4. | group |                     groupstr | groupsub | groupf~t |     rsort |     rnorm | groupl~g |      mean |     mean2 |
     |     6 |  i am a modesly long string6 |        2 |      2.5 | -.4832857 | -2.196897 |        1 | -.1650908 | -.1650908 |
     |-----------------------------------------------------------------------------------------------------------------------|
     |     count      |     count2      |        median      |        median2      |           iqr      |          iqr2      |
     |        19      |         19      |      .2513901      |       .2513901      |      2.087131      |      2.087131      |
     +-----------------------------------------------------------------------------------------------------------------------+

     +-----------------------------------------------------------------------------------------------------------------------+
  5. | group |                     groupstr | groupsub | groupf~t |     rsort |     rnorm | groupl~g |      mean |     mean2 |
     |     2 |  i am a modesly long string2 |        2 |      2.5 | -.4820115 | -.4962967 |        1 |  .0398927 |  .0398927 |
     |-----------------------------------------------------------------------------------------------------------------------|
     |     count      |     count2      |        median      |        median2      |           iqr      |          iqr2      |
     |        18      |         18      |      .1249817      |       .1249817      |      1.751675      |      1.751675      |
     +-----------------------------------------------------------------------------------------------------------------------+

     +-----------------------------------------------------------------------------------------------------------------------+
  6. | group |                     groupstr | groupsub | groupf~t |     rsort |     rnorm | groupl~g |      mean |     mean2 |
     |     5 |  i am a modesly long string5 |        1 |      1.5 | -.4809864 | -1.165238 |        1 |  .2724212 |  .2724212 |
     |-----------------------------------------------------------------------------------------------------------------------|
     |     count      |     count2      |        median      |        median2      |           iqr      |          iqr2      |
     |        20      |         20      |      .3673322      |       .3673322      |       1.89893      |       1.89893      |
     +-----------------------------------------------------------------------------------------------------------------------+

     +-----------------------------------------------------------------------------------------------------------------------+
  7. | group |                     groupstr | groupsub | groupf~t |     rsort |     rnorm | groupl~g |      mean |     mean2 |
     |    10 | i am a modesly long string10 |        2 |      2.5 | -.4758189 |  .6841249 |        1 |  .0232557 |  .0232557 |
     |-----------------------------------------------------------------------------------------------------------------------|
     |     count      |     count2      |        median      |        median2      |           iqr      |          iqr2      |
     |        16      |         16      |     -.1594192      |      -.1594192      |      1.541633      |      1.541633      |
     +-----------------------------------------------------------------------------------------------------------------------+

     +-----------------------------------------------------------------------------------------------------------------------+
  8. | group |                     groupstr | groupsub | groupf~t |     rsort |     rnorm | groupl~g |      mean |     mean2 |
     |     7 |  i am a modesly long string7 |        1 |      1.5 | -.4624406 | -.3743784 |        1 | -.5757579 | -.5757579 |
     |-----------------------------------------------------------------------------------------------------------------------|
     |     count      |     count2      |        median      |        median2      |           iqr      |          iqr2      |
     |        18      |         18      |      -.449741      |       -.449741      |      1.779376      |      1.779376      |
     +-----------------------------------------------------------------------------------------------------------------------+

     +-----------------------------------------------------------------------------------------------------------------------+
  9. | group |                     groupstr | groupsub | groupf~t |     rsort |     rnorm | groupl~g |      mean |     mean2 |
     |     6 |  i am a modesly long string6 |        1 |      1.5 | -.4546936 | -2.443357 |        1 | -.1650908 | -.1650908 |
     |-----------------------------------------------------------------------------------------------------------------------|
     |     count      |     count2      |        median      |        median2      |           iqr      |          iqr2      |
     |        19      |         19      |      .2513901      |       .2513901      |      2.087131      |      2.087131      |
     +-----------------------------------------------------------------------------------------------------------------------+

     +-----------------------------------------------------------------------------------------------------------------------+
 10. | group |                     groupstr | groupsub | groupf~t |     rsort |     rnorm | groupl~g |      mean |     mean2 |
     |     1 |  i am a modesly long string1 |        2 |      2.5 | -.4528995 | -.5074096 |        1 | -.0981773 | -.0981773 |
     |-----------------------------------------------------------------------------------------------------------------------|
     |     count      |     count2      |        median      |        median2      |           iqr      |          iqr2      |
     |        18      |         18      |      .0134574      |       .0134574      |      1.122901      |      1.122901      |
     +-----------------------------------------------------------------------------------------------------------------------+
(warning: forcing non-multi-threaded version)
Parsed by variables, sources, and targets; .004 seconds
In memory: groupstr groupsub mean mean2 count count2 median median2 iqr iqr2
Generated additional targets; .001 seconds
        Plugin step 1: stata parsing done; 0.000 seconds.
Using 128-bit hash to index 2 by variables (string and numeric).
        Plugin step 2: Hashed by variables; 0.000 seconds.
radix sort on hash: loops = 4, bits = 16, shift = 65,536
        Plugin step 3: Sorted on integer-only hash index; 0.001 seconds.
        Plugin step 4: Set up variables for main group loop; 0.000 seconds.
N = 200; 20 balanced groups of size 10
        Plugin step 5.1: Read source variables sequentially; 0.000 seconds.
        Plugin step 5.2: Collapsed source variables; 0.000 seconds.
        Plugin step 6: Copied collapsed variables back to stata; 0.000 seconds.
The plugin executed; .001 seconds
Program exit executed; .001 seconds
The program executed; .007 seconds

     +---------------------------------------------------------------------------------------------------------------------+
  1. |                     groupstr | groupsub |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |  i am a modesly long string1 |        1 | -.1643312 | -.1643312 |     9 |      9 | -.0912356 | -.0912356 | .4092174 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      .4092174                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
  2. |                     groupstr | groupsub |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |  i am a modesly long string1 |        2 | -.0320235 | -.0320235 |     9 |      9 |  .3434474 |  .3434474 |  1.19036 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                       1.19036                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
  3. |                     groupstr | groupsub |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     | i am a modesly long string10 |        1 |  .1625166 |  .1625166 |     9 |      9 |  -.427907 |  -.427907 | 2.330888 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      2.330888                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
  4. |                     groupstr | groupsub |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     | i am a modesly long string10 |        2 | -.1557941 | -.1557941 |     7 |      7 | -.0040006 | -.0040006 | 1.750871 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      1.750871                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
  5. |                     groupstr | groupsub |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |  i am a modesly long string2 |        1 | -.2739882 | -.2739882 |     9 |      9 | -.4433172 | -.4433172 | 1.699651 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      1.699651                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
  6. |                     groupstr | groupsub |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |  i am a modesly long string2 |        2 |  .3537735 |  .3537735 |     9 |      9 |  .7683715 |  .7683715 | 1.366579 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      1.366579                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
  7. |                     groupstr | groupsub |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |  i am a modesly long string3 |        1 | -.3516622 | -.3516622 |     9 |      9 | -.3361298 | -.3361298 | 1.109526 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      1.109526                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
  8. |                     groupstr | groupsub |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |  i am a modesly long string3 |        2 | -.1977251 | -.1977251 |    10 |     10 |  -.030783 |  -.030783 | .8843895 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      .8843895                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
  9. |                     groupstr | groupsub |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |  i am a modesly long string4 |        1 |  .6487527 |  .6487527 |     8 |      8 |  .6301131 |  .6301131 | 1.020262 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      1.020262                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
 10. |                     groupstr | groupsub |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |  i am a modesly long string4 |        2 |  .2986489 |  .2986489 |     9 |      9 |  .1078866 |  .1078866 | .3525327 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      .3525327                                                       |
     +---------------------------------------------------------------------------------------------------------------------+
(warning: forcing non-multi-threaded version)
data already sorted; indexing in stata
Parsed by variables, sources, and targets; .005 seconds
In memory: groupstr groupsub mean __000000 mean2 count count2 median median2 iqr iqr2
Generated additional targets; .001 seconds
        Plugin step 1: stata parsing done; 0.000 seconds.
Using index provided by stata (data was already soreted).
        Plugin step 2: Read in index helper; 0.000 seconds.
        Plugin step 3: Set up index from Stata; 0.000 seconds.
        Plugin step 4: Set up variables for main group loop; 0.000 seconds.
N = 200; 20 balanced groups of size 10
        Plugin step 5.1: Read source variables sequentially; 0.000 seconds.
        Plugin step 5.2: Collapsed source variables; 0.000 seconds.
        Plugin step 6: Copied collapsed variables back to stata; 0.000 seconds.
The plugin executed; 0 seconds
Program exit executed; .001 seconds
The program executed; .007 seconds

     +---------------------------------------------------------------------------------------------------------------------+
  1. |                     groupstr | groupsub |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |  i am a modesly long string1 |        1 | -.1643312 | -.1643312 |     9 |      9 | -.0912356 | -.0912356 | .4092174 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      .4092174                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
  2. |                     groupstr | groupsub |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |  i am a modesly long string1 |        2 | -.0320235 | -.0320235 |     9 |      9 |  .3434474 |  .3434474 |  1.19036 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                       1.19036                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
  3. |                     groupstr | groupsub |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     | i am a modesly long string10 |        1 |  .1625166 |  .1625166 |     9 |      9 |  -.427907 |  -.427907 | 2.330888 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      2.330888                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
  4. |                     groupstr | groupsub |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     | i am a modesly long string10 |        2 | -.1557941 | -.1557941 |     7 |      7 | -.0040006 | -.0040006 | 1.750871 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      1.750871                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
  5. |                     groupstr | groupsub |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |  i am a modesly long string2 |        1 | -.2739882 | -.2739882 |     9 |      9 | -.4433172 | -.4433172 | 1.699651 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      1.699651                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
  6. |                     groupstr | groupsub |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |  i am a modesly long string2 |        2 |  .3537735 |  .3537735 |     9 |      9 |  .7683715 |  .7683715 | 1.366579 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      1.366579                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
  7. |                     groupstr | groupsub |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |  i am a modesly long string3 |        1 | -.3516622 | -.3516622 |     9 |      9 | -.3361298 | -.3361298 | 1.109526 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      1.109526                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
  8. |                     groupstr | groupsub |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |  i am a modesly long string3 |        2 | -.1977251 | -.1977251 |    10 |     10 |  -.030783 |  -.030783 | .8843895 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      .8843895                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
  9. |                     groupstr | groupsub |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |  i am a modesly long string4 |        1 |  .6487527 |  .6487527 |     8 |      8 |  .6301131 |  .6301131 | 1.020262 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      1.020262                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
 10. |                     groupstr | groupsub |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |  i am a modesly long string4 |        2 |  .2986489 |  .2986489 |     9 |      9 |  .1078866 |  .1078866 | .3525327 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      .3525327                                                       |
     +---------------------------------------------------------------------------------------------------------------------+
(warning: forcing non-multi-threaded version)
Parsed by variables, sources, and targets; .005 seconds
In memory: groupstr groupsub mean mean2 count count2 median median2 iqr iqr2
Generated additional targets; .001 seconds
        Plugin step 1: stata parsing done; 0.000 seconds.
Using 128-bit hash to index 2 by variables (string and numeric).
        Plugin step 2: Hashed by variables; 0.000 seconds.
radix sort on hash: loops = 4, bits = 16, shift = 65,536
        Plugin step 3: Sorted on integer-only hash index; 0.001 seconds.
        Plugin step 4: Set up variables for main group loop; 0.000 seconds.
N = 200; 20 balanced groups of size 10
        Plugin step 5.1: Read source variables sequentially; 0.000 seconds.
        Plugin step 5.2: Collapsed source variables; 0.000 seconds.
        Plugin step 6: Copied collapsed variables back to stata; 0.000 seconds.
The plugin executed; 0 seconds
Program exit executed; .001 seconds
The program executed; .008 seconds

     +---------------------------------------------------------------------------------------------------------------------+
  1. | groupsub |                     groupstr |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |        1 |  i am a modesly long string1 | -.1643312 | -.1643312 |     9 |      9 | -.0912356 | -.0912356 | .4092174 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      .4092174                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
  2. | groupsub |                     groupstr |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |        1 | i am a modesly long string10 |  .1625166 |  .1625166 |     9 |      9 |  -.427907 |  -.427907 | 2.330888 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      2.330888                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
  3. | groupsub |                     groupstr |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |        1 |  i am a modesly long string2 | -.2739882 | -.2739882 |     9 |      9 | -.4433172 | -.4433172 | 1.699651 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      1.699651                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
  4. | groupsub |                     groupstr |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |        1 |  i am a modesly long string3 | -.3516622 | -.3516622 |     9 |      9 | -.3361298 | -.3361298 | 1.109526 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      1.109526                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
  5. | groupsub |                     groupstr |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |        1 |  i am a modesly long string4 |  .6487527 |  .6487527 |     8 |      8 |  .6301131 |  .6301131 | 1.020262 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      1.020262                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
  6. | groupsub |                     groupstr |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |        1 |  i am a modesly long string5 |  .3682817 |  .3682817 |    10 |     10 |   .651777 |   .651777 | 2.113784 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      2.113784                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
  7. | groupsub |                     groupstr |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |        1 |  i am a modesly long string6 | -.3959126 | -.3959126 |     9 |      9 | -.5473607 | -.5473607 | 1.944451 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      1.944451                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
  8. | groupsub |                     groupstr |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |        1 |  i am a modesly long string7 |  -.756433 |  -.756433 |     8 |      8 | -.6734579 | -.6734579 | 1.705667 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      1.705667                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
  9. | groupsub |                     groupstr |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |        1 |  i am a modesly long string8 | -.0966864 | -.0966864 |    10 |     10 | -.1573083 | -.1573083 | 1.075722 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      1.075722                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
 10. | groupsub |                     groupstr |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |        1 |  i am a modesly long string9 | -.1400709 | -.1400709 |    10 |     10 |  -.100068 |  -.100068 | .9875529 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      .9875529                                                       |
     +---------------------------------------------------------------------------------------------------------------------+
(warning: forcing non-multi-threaded version)
Parsed by variables, sources, and targets; .004 seconds
In memory: groupstr mean mean2 count count2 median median2 iqr iqr2
Generated additional targets; .001 seconds
        Plugin step 1: stata parsing done; 0.000 seconds.
Using 128-bit hash to index string by variable.
        Plugin step 2: Hashed by variables; 0.000 seconds.
radix sort on hash: loops = 4, bits = 16, shift = 65,536
        Plugin step 3: Sorted on integer-only hash index; 0.001 seconds.
        Plugin step 4: Set up variables for main group loop; 0.000 seconds.
N = 200; 10 balanced groups of size 20
        Plugin step 5.1: Read source variables sequentially; 0.000 seconds.
        Plugin step 5.2: Collapsed source variables; 0.000 seconds.
        Plugin step 6: Copied collapsed variables back to stata; 0.000 seconds.
The plugin executed; .001 seconds
Program exit executed; .001 seconds
The program executed; .007 seconds
(warning: forcing non-multi-threaded version)
data sorted in similar order (groupstr groupsub); indexing in stata
Parsed by variables, sources, and targets; .005 seconds
In memory: groupstr mean __000000 mean2 count count2 median median2 iqr iqr2
Generated additional targets; 0 seconds
        Plugin step 1: stata parsing done; 0.000 seconds.
Using index provided by stata (data was already soreted).
        Plugin step 2: Read in index helper; 0.000 seconds.
        Plugin step 3: Set up index from Stata; 0.000 seconds.
        Plugin step 4: Set up variables for main group loop; 0.000 seconds.
N = 200; 10 balanced groups of size 20
        Plugin step 5.1: Read source variables sequentially; 0.000 seconds.
        Plugin step 5.2: Collapsed source variables; 0.000 seconds.
        Plugin step 6: Copied collapsed variables back to stata; 0.000 seconds.
The plugin executed; .001 seconds
Program exit executed; .001 seconds
The program executed; .007 seconds
(warning: forcing non-multi-threaded version)
Parsed by variables, sources, and targets; .005 seconds
In memory: groupsub mean mean2 count count2 median median2 iqr iqr2
Generated additional targets; 0 seconds
        Plugin step 1: stata parsing done; 0.000 seconds.
Using sole integer by variable as hash.
        Plugin step 2: Hashed by variables; 0.000 seconds.
counting sort on hash; min = 1, max = 2
        Plugin step 3: Sorted on integer-only hash index; 0.000 seconds.
        Plugin step 4: Set up variables for main group loop; 0.000 seconds.
N = 200; 2 balanced groups of size 100
        Plugin step 5.1: Read source variables sequentially; 0.000 seconds.
        Plugin step 5.2: Collapsed source variables; 0.000 seconds.
        Plugin step 6: Copied collapsed variables back to stata; 0.000 seconds.
The plugin executed; 0 seconds
Program exit executed; .001 seconds
The program executed; .007 seconds

     +-------------------------------------------------------------------------------------------------+
     | groupsub        mean       mean2   count   count2      median     median2        iqr       iqr2 |
     |-------------------------------------------------------------------------------------------------|
  1. |        1   -.0962263   -.0962263      91       91   -.0912356   -.0912356   1.613915   1.613915 |
  2. |        2    .0295612    .0295612      92       92    .1134683    .1134683   1.268566   1.268566 |
     +-------------------------------------------------------------------------------------------------+
(warning: forcing non-multi-threaded version)
Parsed by variables, sources, and targets; .005 seconds
In memory: groupsub mean mean2 count count2 median median2 iqr iqr2
Generated additional targets; 0 seconds
        Plugin step 1: stata parsing done; 0.000 seconds.
Using sole integer by variable as hash.
        Plugin step 2: Hashed by variables; 0.000 seconds.
counting sort on hash; min = 1, max = 2
        Plugin step 3: Sorted on integer-only hash index; 0.000 seconds.
        Plugin step 4: Set up variables for main group loop; 0.000 seconds.
N = 200; 2 balanced groups of size 100
        Plugin step 5.1: Read source variables sequentially; 0.000 seconds.
        Plugin step 5.2: Collapsed source variables; 0.000 seconds.
        Plugin step 6: Copied collapsed variables back to stata; 0.000 seconds.
The plugin executed; 0 seconds
Program exit executed; .001 seconds
The program executed; .007 seconds

     +-------------------------------------------------------------------------------------------------+
     | groupsub        mean       mean2   count   count2      median     median2        iqr       iqr2 |
     |-------------------------------------------------------------------------------------------------|
  1. |        1   -.0962263   -.0962263      91       91   -.0912356   -.0912356   1.613915   1.613915 |
  2. |        2    .0295612    .0295612      92       92    .1134683    .1134683   1.268566   1.268566 |
     +-------------------------------------------------------------------------------------------------+

Passed! checks_options_gcollapse debug_force_single

--------------------------------------------------------------------------------
checks_byvars_gcollapse debug_force_multi
--------------------------------------------------------------------------------


    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
       rsort |      1000   -.0042467    .2860899  -.4987924   .4998637
Obs = 1,000; Groups = 250
  group was float now int
  groupsub was float now byte
  grouplong was long now int
  (7,000 bytes saved)
(warning: forcing multi-threaded version)
In memory: groupsub rnorm sum sd
Using sole integer by variable as hash.
counting sort on hash; min = 1, max = 2
N = 1,000; 2 balanced groups of size 500
                Thread 2 processed 0 groups.
                Thread 3 processed 0 groups.
                Thread 1 processed 1 groups.
                Thread 0 processed 1 groups.
                Thread 2 processed 0 groups.
                Thread 3 processed 0 groups.
                Thread 0 processed 1 groups.
                Thread 1 processed 1 groups.
(warning: forcing multi-threaded version)
In memory: group rnorm sum sd
Using sole integer by variable as hash.
counting sort on hash; min = 1, max = 250
N = 1,000; 250 balanced groups of size 4
                Thread 0 processed 63 groups.
                Thread 3 processed 62 groups.
                Thread 1 processed 63 groups.
                Thread 2 processed 62 groups.
                Thread 2 processed 62 groups.
                Thread 1 processed 63 groups.
                Thread 0 processed 63 groups.
                Thread 3 processed 62 groups.
(warning: forcing multi-threaded version)
In memory: groupstr rnorm sum sd
Using 128-bit hash to index string by variable.
radix sort on hash: loops = 4, bits = 16, shift = 65,536
N = 1,000; 250 balanced groups of size 4
                Thread 2 processed 62 groups.
                Thread 0 processed 63 groups.
                Thread 1 processed 63 groups.
                Thread 3 processed 62 groups.
                Thread 2 processed 62 groups.
                Thread 1 processed 63 groups.
                Thread 3 processed 62 groups.
                Thread 0 processed 63 groups.
(warning: forcing multi-threaded version)
In memory: rnorm grouplong sum sd
Using sole integer by variable as hash.
counting sort on hash; min = 1, max = 250
N = 1,000; 250 balanced groups of size 4
                Thread 1 processed 63 groups.
                Thread 3 processed 62 groups.
                Thread 0 processed 63 groups.
                Thread 2 processed 62 groups.
                Thread 2 processed 62 groups.
                Thread 3 processed 62 groups.
                Thread 1 processed 63 groups.
                Thread 0 processed 63 groups.
(warning: forcing multi-threaded version)
In memory: groupsub rnorm sum sd
Using sole integer by variable as hash.
counting sort on hash; min = 1, max = 2
N = 1,000; 2 balanced groups of size 500
                Thread 2 processed 0 groups.
                Thread 3 processed 0 groups.
                Thread 0 processed 1 groups.
                Thread 1 processed 1 groups.
                Thread 1 processed 1 groups.
                Thread 0 processed 1 groups.
                Thread 3 processed 0 groups.
                Thread 2 processed 0 groups.
(warning: forcing multi-threaded version)
In memory: group groupsub rnorm sum sd
Hashing 2 integer by variables to whole-nubmer index.
Obs         0 =                   391
Obs         1 =                   290
Obs         2 =                   288
Obs         3 =                   218
Obs         4 =                   106
Obs         5 =                   283
Obs         6 =                   464
Obs         7 =                   426
Obs         8 =                   242
Obs         9 =                    27
Obs        10 =                   321
Obs        11 =                   109
Obs        12 =                   328
Obs        13 =                   358
Obs        14 =                   347
Obs        15 =                   103
Obs        16 =                     1
Obs        17 =                   304
Obs        18 =                    34
Obs        19 =                   142
Obs        20 =                   489
Obs        21 =                   463
Obs        22 =                    30
Obs        23 =                   277
Obs        24 =                    80
Obs        25 =                    17
Obs        26 =                   295
Obs        27 =                    89
Obs        28 =                   110
Obs        29 =                    56
Obs        30 =                    43
Obs        31 =                   307
Obs        32 =                   265
Obs        33 =                   291
Obs        34 =                   194
Obs        35 =                   351
Obs        36 =                   410
Obs        37 =                   305
Obs        38 =                    37
Obs        39 =                   405
Obs        40 =                   255
Obs        41 =                    31
Obs        42 =                   485
Obs        43 =                   338
Obs        44 =                   327
Obs        45 =                   244
Obs        46 =                   192
Obs        47 =                   216
Obs        48 =                    88
Obs        49 =                   399
Obs        50 =                   256
Obs        51 =                   447
Obs        52 =                   386
Obs        53 =                     9
Obs        54 =                    29
Obs        55 =                   405
Obs        56 =                   130
Obs        57 =                   331
Obs        58 =                   455
Obs        59 =                   191
Obs        60 =                   339
Obs        61 =                    46
Obs        62 =                    23
Obs        63 =                   120
Obs        64 =                   230
Obs        65 =                    73
Obs        66 =                   145
Obs        67 =                   388
Obs        68 =                   202
Obs        69 =                   113
Obs        70 =                   140
Obs        71 =                    82
Obs        72 =                   180
Obs        73 =                   165
Obs        74 =                   363
Obs        75 =                   457
Obs        76 =                   359
Obs        77 =                   214
Obs        78 =                   253
Obs        79 =                    12
Obs        80 =                   471
Obs        81 =                    39
Obs        82 =                   355
Obs        83 =                   166
Obs        84 =                    90
Obs        85 =                   412
Obs        86 =                   443
Obs        87 =                   149
Obs        88 =                   279
Obs        89 =                   328
Obs        90 =                   320
Obs        91 =                   341
Obs        92 =                   109
Obs        93 =                   167
Obs        94 =                    48
Obs        95 =                   198
Obs        96 =                   266
Obs        97 =                   412
Obs        98 =                   251
Obs        99 =                   388
Obs       100 =                   340
Obs       101 =                   493
Obs       102 =                    46
Obs       103 =                    55
Obs       104 =                   187
Obs       105 =                   190
Obs       106 =                   228
Obs       107 =                   370
Obs       108 =                   292
Obs       109 =                    48
Obs       110 =                   234
Obs       111 =                   222
Obs       112 =                    82
Obs       113 =                   186
Obs       114 =                    79
Obs       115 =                   122
Obs       116 =                   478
Obs       117 =                   115
Obs       118 =                   139
Obs       119 =                   162
Obs       120 =                   445
Obs       121 =                   132
Obs       122 =                   492
Obs       123 =                    10
Obs       124 =                   498
Obs       125 =                   451
Obs       126 =                   220
Obs       127 =                   134
Obs       128 =                   128
Obs       129 =                   170
Obs       130 =                    71
Obs       131 =                   176
Obs       132 =                   203
Obs       133 =                   316
Obs       134 =                   468
Obs       135 =                   191
Obs       136 =                   272
Obs       137 =                   461
Obs       138 =                    41
Obs       139 =                   454
Obs       140 =                   470
Obs       141 =                   317
Obs       142 =                   446
Obs       143 =                   183
Obs       144 =                   195
Obs       145 =                   444
Obs       146 =                   165
Obs       147 =                   399
Obs       148 =                   201
Obs       149 =                   146
Obs       150 =                     4
Obs       151 =                   498
Obs       152 =                   307
Obs       153 =                   426
Obs       154 =                   329
Obs       155 =                   267
Obs       156 =                   438
Obs       157 =                   439
Obs       158 =                   137
Obs       159 =                   167
Obs       160 =                   313
Obs       161 =                   352
Obs       162 =                   193
Obs       163 =                   406
Obs       164 =                   490
Obs       165 =                    96
Obs       166 =                   398
Obs       167 =                   373
Obs       168 =                   280
Obs       169 =                   171
Obs       170 =                   366
Obs       171 =                   282
Obs       172 =                    81
Obs       173 =                   249
Obs       174 =                    10
Obs       175 =                   371
Obs       176 =                   242
Obs       177 =                   378
Obs       178 =                   330
Obs       179 =                   486
Obs       180 =                   359
Obs       181 =                    75
Obs       182 =                   301
Obs       183 =                   124
Obs       184 =                   154
Obs       185 =                   189
Obs       186 =                   213
Obs       187 =                   470
Obs       188 =                   151
Obs       189 =                   435
Obs       190 =                   396
Obs       191 =                   105
Obs       192 =                   396
Obs       193 =                    91
Obs       194 =                   340
Obs       195 =                   456
Obs       196 =                   334
Obs       197 =                   309
Obs       198 =                   216
Obs       199 =                    63
Obs       200 =                   345
Obs       201 =                   189
Obs       202 =                   291
Obs       203 =                   375
Obs       204 =                   205
Obs       205 =                   194
Obs       206 =                   208
Obs       207 =                   258
Obs       208 =                   416
Obs       209 =                   246
Obs       210 =                   392
Obs       211 =                   497
Obs       212 =                   353
Obs       213 =                   419
Obs       214 =                    57
Obs       215 =                   153
Obs       216 =                   120
Obs       217 =                   148
Obs       218 =                   126
Obs       219 =                   145
Obs       220 =                   449
Obs       221 =                   401
Obs       222 =                    49
Obs       223 =                   460
Obs       224 =                   469
Obs       225 =                   440
Obs       226 =                   480
Obs       227 =                    97
Obs       228 =                    33
Obs       229 =                    40
Obs       230 =                   169
Obs       231 =                   196
Obs       232 =                   121
Obs       233 =                    25
Obs       234 =                   256
Obs       235 =                   146
Obs       236 =                   243
Obs       237 =                   124
Obs       238 =                    77
Obs       239 =                   311
Obs       240 =                   218
Obs       241 =                    22
Obs       242 =                   187
Obs       243 =                   467
Obs       244 =                   395
Obs       245 =                    85
Obs       246 =                    67
Obs       247 =                    86
Obs       248 =                   380
Obs       249 =                   366
Obs       250 =                   476
Obs       251 =                    28
Obs       252 =                   278
Obs       253 =                   411
Obs       254 =                   211
Obs       255 =                   415
Obs       256 =                    97
Obs       257 =                   232
Obs       258 =                    68
Obs       259 =                   385
Obs       260 =                   298
Obs       261 =                   266
Obs       262 =                     8
Obs       263 =                   387
Obs       264 =                   289
Obs       265 =                   487
Obs       266 =                   377
Obs       267 =                   129
Obs       268 =                   135
Obs       269 =                    50
Obs       270 =                    38
Obs       271 =                   250
Obs       272 =                   199
Obs       273 =                   247
Obs       274 =                   241
Obs       275 =                    16
Obs       276 =                   365
Obs       277 =                   320
Obs       278 =                   144
Obs       279 =                   469
Obs       280 =                   179
Obs       281 =                   164
Obs       282 =                   107
Obs       283 =                   395
Obs       284 =                    62
Obs       285 =                   308
Obs       286 =                   300
Obs       287 =                   190
Obs       288 =                    84
Obs       289 =                    58
Obs       290 =                   248
Obs       291 =                   234
Obs       292 =                   286
Obs       293 =                    78
Obs       294 =                   428
Obs       295 =                   147
Obs       296 =                   252
Obs       297 =                   456
Obs       298 =                   245
Obs       299 =                   172
Obs       300 =                   207
Obs       301 =                   368
Obs       302 =                   163
Obs       303 =                   150
Obs       304 =                   174
Obs       305 =                     3
Obs       306 =                   336
Obs       307 =                   346
Obs       308 =                   239
Obs       309 =                   188
Obs       310 =                   305
Obs       311 =                    95
Obs       312 =                   364
Obs       313 =                   403
Obs       314 =                   275
Obs       315 =                   299
Obs       316 =                   272
Obs       317 =                   239
Obs       318 =                    94
Obs       319 =                   356
Obs       320 =                   499
Obs       321 =                    50
Obs       322 =                   452
Obs       323 =                   156
Obs       324 =                   133
Obs       325 =                   481
Obs       326 =                   168
Obs       327 =                   496
Obs       328 =                   409
Obs       329 =                   289
Obs       330 =                   382
Obs       331 =                   486
Obs       332 =                   274
Obs       333 =                    63
Obs       334 =                   101
Obs       335 =                   431
Obs       336 =                   156
Obs       337 =                   177
Obs       338 =                   211
Obs       339 =                    72
Obs       340 =                   324
Obs       341 =                   452
Obs       342 =                   352
Obs       343 =                    19
Obs       344 =                   159
Obs       345 =                   326
Obs       346 =                    32
Obs       347 =                   324
Obs       348 =                   188
Obs       349 =                   377
Obs       350 =                   133
Obs       351 =                    26
Obs       352 =                    69
Obs       353 =                   312
Obs       354 =                    89
Obs       355 =                     2
Obs       356 =                   296
Obs       357 =                   108
Obs       358 =                    37
Obs       359 =                   287
Obs       360 =                   421
Obs       361 =                    13
Obs       362 =                   273
Obs       363 =                   500
Obs       364 =                   303
Obs       365 =                   128
Obs       366 =                   223
Obs       367 =                   375
Obs       368 =                   450
Obs       369 =                   225
Obs       370 =                   446
Obs       371 =                    15
Obs       372 =                   409
Obs       373 =                   434
Obs       374 =                   105
Obs       375 =                   335
Obs       376 =                   322
Obs       377 =                    60
Obs       378 =                     7
Obs       379 =                   108
Obs       380 =                    41
Obs       381 =                   494
Obs       382 =                   107
Obs       383 =                   332
Obs       384 =                    34
Obs       385 =                   293
Obs       386 =                   474
Obs       387 =                   168
Obs       388 =                   439
Obs       389 =                   351
Obs       390 =                   488
Obs       391 =                   288
Obs       392 =                    73
Obs       393 =                   197
Obs       394 =                   267
Obs       395 =                   104
Obs       396 =                   463
Obs       397 =                   464
Obs       398 =                    58
Obs       399 =                    96
Obs       400 =                   371
Obs       401 =                   260
Obs       402 =                   347
Obs       403 =                   496
Obs       404 =                   491
Obs       405 =                    59
Obs       406 =                   292
Obs       407 =                   448
Obs       408 =                   198
Obs       409 =                   358
Obs       410 =                   240
Obs       411 =                   154
Obs       412 =                   229
Obs       413 =                   343
Obs       414 =                   284
Obs       415 =                   319
Obs       416 =                   376
Obs       417 =                   169
Obs       418 =                   158
Obs       419 =                   383
Obs       420 =                   322
Obs       421 =                   338
Obs       422 =                   381
Obs       423 =                   106
Obs       424 =                   123
Obs       425 =                   121
Obs       426 =                     1
Obs       427 =                   461
Obs       428 =                   417
Obs       429 =                    40
Obs       430 =                   114
Obs       431 =                   131
Obs       432 =                   468
Obs       433 =                   199
Obs       434 =                   369
Obs       435 =                   104
Obs       436 =                   304
Obs       437 =                   150
Obs       438 =                   306
Obs       439 =                   449
Obs       440 =                   230
Obs       441 =                   407
Obs       442 =                   334
Obs       443 =                   407
Obs       444 =                   493
Obs       445 =                    44
Obs       446 =                   205
Obs       447 =                   394
Obs       448 =                    87
Obs       449 =                    67
Obs       450 =                   116
Obs       451 =                   141
Obs       452 =                   423
Obs       453 =                   138
Obs       454 =                   202
Obs       455 =                   425
Obs       456 =                   400
Obs       457 =                    27
Obs       458 =                   402
Obs       459 =                   488
Obs       460 =                   127
Obs       461 =                   342
Obs       462 =                   271
Obs       463 =                   100
Obs       464 =                   287
Obs       465 =                   270
Obs       466 =                   465
Obs       467 =                   392
Obs       468 =                    53
Obs       469 =                   112
Obs       470 =                   450
Obs       471 =                   281
Obs       472 =                    21
Obs       473 =                   459
Obs       474 =                   376
Obs       475 =                   143
Obs       476 =                    65
Obs       477 =                   386
Obs       478 =                   250
Obs       479 =                   302
Obs       480 =                   208
Obs       481 =                    54
Obs       482 =                   241
Obs       483 =                   261
Obs       484 =                   406
Obs       485 =                   458
Obs       486 =                   179
Obs       487 =                   350
Obs       488 =                   221
Obs       489 =                   401
Obs       490 =                   247
Obs       491 =                   368
Obs       492 =                    81
Obs       493 =                   298
Obs       494 =                   268
Obs       495 =                   391
Obs       496 =                    45
Obs       497 =                   471
Obs       498 =                   332
Obs       499 =                    99
Obs       500 =                   201
Obs       501 =                   301
Obs       502 =                   283
Obs       503 =                    93
Obs       504 =                   387
Obs       505 =                   221
Obs       506 =                   336
Obs       507 =                    33
Obs       508 =                    98
Obs       509 =                   473
Obs       510 =                     3
Obs       511 =                   419
Obs       512 =                   379
Obs       513 =                   413
Obs       514 =                   114
Obs       515 =                   413
Obs       516 =                   457
Obs       517 =                   276
Obs       518 =                   206
Obs       519 =                    91
Obs       520 =                    61
Obs       521 =                   460
Obs       522 =                   271
Obs       523 =                   485
Obs       524 =                   185
Obs       525 =                     8
Obs       526 =                    74
Obs       527 =                   193
Obs       528 =                   382
Obs       529 =                   435
Obs       530 =                   278
Obs       531 =                   182
Obs       532 =                    30
Obs       533 =                   294
Obs       534 =                   390
Obs       535 =                   418
Obs       536 =                   361
Obs       537 =                    93
Obs       538 =                   315
Obs       539 =                    43
Obs       540 =                   144
Obs       541 =                    51
Obs       542 =                   182
Obs       543 =                   479
Obs       544 =                    55
Obs       545 =                   472
Obs       546 =                   222
Obs       547 =                   217
Obs       548 =                   314
Obs       549 =                   260
Obs       550 =                   123
Obs       551 =                   318
Obs       552 =                   237
Obs       553 =                    74
Obs       554 =                   115
Obs       555 =                   100
Obs       556 =                   466
Obs       557 =                   314
Obs       558 =                   311
Obs       559 =                    42
Obs       560 =                   157
Obs       561 =                    61
Obs       562 =                   494
Obs       563 =                   306
Obs       564 =                   337
Obs       565 =                   499
Obs       566 =                   344
Obs       567 =                   231
Obs       568 =                   436
Obs       569 =                    64
Obs       570 =                    17
Obs       571 =                   113
Obs       572 =                   462
Obs       573 =                   414
Obs       574 =                   192
Obs       575 =                   257
Obs       576 =                   209
Obs       577 =                   373
Obs       578 =                   268
Obs       579 =                   183
Obs       580 =                   438
Obs       581 =                    77
Obs       582 =                   427
Obs       583 =                   480
Obs       584 =                   148
Obs       585 =                    85
Obs       586 =                    39
Obs       587 =                   264
Obs       588 =                   164
Obs       589 =                    83
Obs       590 =                   490
Obs       591 =                   455
Obs       592 =                   477
Obs       593 =                    76
Obs       594 =                   383
Obs       595 =                   261
Obs       596 =                   235
Obs       597 =                   125
Obs       598 =                   404
Obs       599 =                   432
Obs       600 =                   175
Obs       601 =                    86
Obs       602 =                   433
Obs       603 =                   402
Obs       604 =                   204
Obs       605 =                   219
Obs       606 =                   212
Obs       607 =                   318
Obs       608 =                   258
Obs       609 =                   339
Obs       610 =                   379
Obs       611 =                   333
Obs       612 =                   240
Obs       613 =                   362
Obs       614 =                   174
Obs       615 =                   476
Obs       616 =                   197
Obs       617 =                     6
Obs       618 =                   350
Obs       619 =                   348
Obs       620 =                    35
Obs       621 =                   152
Obs       622 =                   252
Obs       623 =                   425
Obs       624 =                   155
Obs       625 =                   444
Obs       626 =                   416
Obs       627 =                    22
Obs       628 =                   342
Obs       629 =                   384
Obs       630 =                   341
Obs       631 =                   141
Obs       632 =                   255
Obs       633 =                   354
Obs       634 =                   284
Obs       635 =                     5
Obs       636 =                   126
Obs       637 =                   440
Obs       638 =                   453
Obs       639 =                   262
Obs       640 =                   238
Obs       641 =                   453
Obs       642 =                    20
Obs       643 =                   428
Obs       644 =                   319
Obs       645 =                   436
Obs       646 =                   441
Obs       647 =                   263
Obs       648 =                   161
Obs       649 =                   333
Obs       650 =                    44
Obs       651 =                   360
Obs       652 =                   337
Obs       653 =                   479
Obs       654 =                   390
Obs       655 =                   477
Obs       656 =                   434
Obs       657 =                   345
Obs       658 =                   186
Obs       659 =                    54
Obs       660 =                   225
Obs       661 =                   286
Obs       662 =                    87
Obs       663 =                   254
Obs       664 =                   394
Obs       665 =                    62
Obs       666 =                   408
Obs       667 =                   454
Obs       668 =                   378
Obs       669 =                   380
Obs       670 =                   212
Obs       671 =                    18
Obs       672 =                   122
Obs       673 =                   159
Obs       674 =                   297
Obs       675 =                   408
Obs       676 =                   442
Obs       677 =                   400
Obs       678 =                   445
Obs       679 =                   397
Obs       680 =                   215
Obs       681 =                   346
Obs       682 =                   196
Obs       683 =                   210
Obs       684 =                    56
Obs       685 =                    79
Obs       686 =                    59
Obs       687 =                   178
Obs       688 =                   404
Obs       689 =                   467
Obs       690 =                   326
Obs       691 =                   367
Obs       692 =                   448
Obs       693 =                   344
Obs       694 =                    13
Obs       695 =                    21
Obs       696 =                   184
Obs       697 =                   417
Obs       698 =                    47
Obs       699 =                   357
Obs       700 =                    78
Obs       701 =                   236
Obs       702 =                   317
Obs       703 =                   299
Obs       704 =                   427
Obs       705 =                    20
Obs       706 =                   300
Obs       707 =                   102
Obs       708 =                   173
Obs       709 =                   297
Obs       710 =                   131
Obs       711 =                   356
Obs       712 =                    14
Obs       713 =                   500
Obs       714 =                   478
Obs       715 =                   160
Obs       716 =                    18
Obs       717 =                   262
Obs       718 =                   459
Obs       719 =                    16
Obs       720 =                   374
Obs       721 =                   331
Obs       722 =                   232
Obs       723 =                   349
Obs       724 =                   195
Obs       725 =                   171
Obs       726 =                    99
Obs       727 =                   263
Obs       728 =                   280
Obs       729 =                   224
Obs       730 =                   248
Obs       731 =                   227
Obs       732 =                   348
Obs       733 =                    29
Obs       734 =                   482
Obs       735 =                   415
Obs       736 =                   117
Obs       737 =                    72
Obs       738 =                   274
Obs       739 =                   355
Obs       740 =                    53
Obs       741 =                    15
Obs       742 =                   265
Obs       743 =                   136
Obs       744 =                   209
Obs       745 =                    26
Obs       746 =                   116
Obs       747 =                   495
Obs       748 =                   220
Obs       749 =                   393
Obs       750 =                    11
Obs       751 =                   110
Obs       752 =                   130
Obs       753 =                   111
Obs       754 =                   437
Obs       755 =                   226
Obs       756 =                   365
Obs       757 =                   325
Obs       758 =                   281
Obs       759 =                   152
Obs       760 =                   217
Obs       761 =                   414
Obs       762 =                   233
Obs       763 =                   207
Obs       764 =                   173
Obs       765 =                    36
Obs       766 =                   381
Obs       767 =                   181
Obs       768 =                   210
Obs       769 =                   296
Obs       770 =                   411
Obs       771 =                    25
Obs       772 =                    36
Obs       773 =                    52
Obs       774 =                   389
Obs       775 =                    14
Obs       776 =                   224
Obs       777 =                   200
Obs       778 =                    49
Obs       779 =                   103
Obs       780 =                   181
Obs       781 =                   215
Obs       782 =                   285
Obs       783 =                     7
Obs       784 =                   310
Obs       785 =                   430
Obs       786 =                   473
Obs       787 =                   466
Obs       788 =                   491
Obs       789 =                   151
Obs       790 =                     6
Obs       791 =                    24
Obs       792 =                   259
Obs       793 =                   132
Obs       794 =                   431
Obs       795 =                   119
Obs       796 =                   118
Obs       797 =                   443
Obs       798 =                   139
Obs       799 =                   229
Obs       800 =                   472
Obs       801 =                   117
Obs       802 =                   437
Obs       803 =                   275
Obs       804 =                   398
Obs       805 =                   313
Obs       806 =                   235
Obs       807 =                   482
Obs       808 =                   295
Obs       809 =                     2
Obs       810 =                   458
Obs       811 =                   270
Obs       812 =                   367
Obs       813 =                   483
Obs       814 =                   323
Obs       815 =                    65
Obs       816 =                   170
Obs       817 =                   163
Obs       818 =                   325
Obs       819 =                    95
Obs       820 =                    84
Obs       821 =                   475
Obs       822 =                   354
Obs       823 =                   214
Obs       824 =                   294
Obs       825 =                   111
Obs       826 =                   227
Obs       827 =                   219
Obs       828 =                   475
Obs       829 =                     4
Obs       830 =                   433
Obs       831 =                    69
Obs       832 =                   357
Obs       833 =                   129
Obs       834 =                    35
Obs       835 =                   264
Obs       836 =                   228
Obs       837 =                    92
Obs       838 =                   119
Obs       839 =                   451
Obs       840 =                   180
Obs       841 =                   315
Obs       842 =                   223
Obs       843 =                    90
Obs       844 =                   308
Obs       845 =                   484
Obs       846 =                   257
Obs       847 =                   125
Obs       848 =                   329
Obs       849 =                   432
Obs       850 =                    52
Obs       851 =                   343
Obs       852 =                   420
Obs       853 =                    88
Obs       854 =                   492
Obs       855 =                   293
Obs       856 =                   135
Obs       857 =                   465
Obs       858 =                   177
Obs       859 =                   253
Obs       860 =                   327
Obs       861 =                    57
Obs       862 =                   410
Obs       863 =                    51
Obs       864 =                   424
Obs       865 =                   238
Obs       866 =                   277
Obs       867 =                   172
Obs       868 =                   279
Obs       869 =                    66
Obs       870 =                   269
Obs       871 =                    70
Obs       872 =                    60
Obs       873 =                   370
Obs       874 =                   134
Obs       875 =                   393
Obs       876 =                    83
Obs       877 =                   184
Obs       878 =                   245
Obs       879 =                   200
Obs       880 =                   430
Obs       881 =                   137
Obs       882 =                   302
Obs       883 =                    47
Obs       884 =                   101
Obs       885 =                    98
Obs       886 =                    11
Obs       887 =                   127
Obs       888 =                   424
Obs       889 =                    76
Obs       890 =                   175
Obs       891 =                   403
Obs       892 =                    92
Obs       893 =                   389
Obs       894 =                   153
Obs       895 =                   162
Obs       896 =                   251
Obs       897 =                    71
Obs       898 =                   112
Obs       899 =                   316
Obs       900 =                   310
Obs       901 =                   321
Obs       902 =                   269
Obs       903 =                     9
Obs       904 =                   421
Obs       905 =                   495
Obs       906 =                   259
Obs       907 =                   487
Obs       908 =                   362
Obs       909 =                   143
Obs       910 =                   442
Obs       911 =                   276
Obs       912 =                    42
Obs       913 =                   136
Obs       914 =                   418
Obs       915 =                   423
Obs       916 =                    31
Obs       917 =                    66
Obs       918 =                   140
Obs       919 =                   364
Obs       920 =                   160
Obs       921 =                   483
Obs       922 =                   303
Obs       923 =                   155
Obs       924 =                   285
Obs       925 =                   429
Obs       926 =                   374
Obs       927 =                    94
Obs       928 =                   158
Obs       929 =                   243
Obs       930 =                   236
Obs       931 =                   429
Obs       932 =                    75
Obs       933 =                    64
Obs       934 =                   360
Obs       935 =                   372
Obs       936 =                    70
Obs       937 =                   397
Obs       938 =                   206
Obs       939 =                    19
Obs       940 =                   363
Obs       941 =                   441
Obs       942 =                   489
Obs       943 =                   385
Obs       944 =                   237
Obs       945 =                     5
Obs       946 =                   138
Obs       947 =                   231
Obs       948 =                   422
Obs       949 =                   497
Obs       950 =                    80
Obs       951 =                   176
Obs       952 =                    68
Obs       953 =                   166
Obs       954 =                   102
Obs       955 =                   249
Obs       956 =                   312
Obs       957 =                   142
Obs       958 =                   185
Obs       959 =                   203
Obs       960 =                   147
Obs       961 =                   474
Obs       962 =                   233
Obs       963 =                   178
Obs       964 =                   213
Obs       965 =                   447
Obs       966 =                    12
Obs       967 =                   462
Obs       968 =                   484
Obs       969 =                   422
Obs       970 =                   323
Obs       971 =                   161
Obs       972 =                   309
Obs       973 =                   369
Obs       974 =                   372
Obs       975 =                   384
Obs       976 =                   290
Obs       977 =                    28
Obs       978 =                    32
Obs       979 =                   361
Obs       980 =                   149
Obs       981 =                   254
Obs       982 =                   420
Obs       983 =                   330
Obs       984 =                    23
Obs       985 =                   282
Obs       986 =                   335
Obs       987 =                   244
Obs       988 =                   353
Obs       989 =                   246
Obs       990 =                    38
Obs       991 =                   157
Obs       992 =                   118
Obs       993 =                   349
Obs       994 =                   204
Obs       995 =                    24
Obs       996 =                    45
Obs       997 =                   226
Obs       998 =                   481
Obs       999 =                   273
counting sort on hash; min = 1, max = 500
N = 1,000; 500 balanced groups of size 2
                Thread 2 processed 125 groups.
                Thread 3 processed 125 groups.
                Thread 0 processed 125 groups.
                Thread 1 processed 125 groups.
                Thread 2 processed 125 groups.
                Thread 1 processed 125 groups.
                Thread 0 processed 125 groups.
                Thread 3 processed 125 groups.
(warning: forcing multi-threaded version)
In memory: groupsub rnorm grouplong sum sd
Hashing 2 integer by variables to whole-nubmer index.
Obs         0 =                   251
Obs         1 =                   251
Obs         2 =                   251
Obs         3 =                     1
Obs         4 =                     2
Obs         5 =                   252
Obs         6 =                   252
Obs         7 =                   252
Obs         8 =                     3
Obs         9 =                     3
Obs        10 =                   253
Obs        11 =                     3
Obs        12 =                   254
Obs        13 =                   254
Obs        14 =                   254
Obs        15 =                     4
Obs        16 =                     5
Obs        17 =                   255
Obs        18 =                     5
Obs        19 =                     5
Obs        20 =                   256
Obs        21 =                   256
Obs        22 =                     6
Obs        23 =                   256
Obs        24 =                     7
Obs        25 =                     7
Obs        26 =                   257
Obs        27 =                     7
Obs        28 =                     8
Obs        29 =                     8
Obs        30 =                     8
Obs        31 =                   258
Obs        32 =                   259
Obs        33 =                   259
Obs        34 =                     9
Obs        35 =                   259
Obs        36 =                   260
Obs        37 =                   260
Obs        38 =                    10
Obs        39 =                   260
Obs        40 =                   261
Obs        41 =                    11
Obs        42 =                   261
Obs        43 =                   261
Obs        44 =                   262
Obs        45 =                    12
Obs        46 =                    12
Obs        47 =                    12
Obs        48 =                    13
Obs        49 =                   263
Obs        50 =                   263
Obs        51 =                   263
Obs        52 =                   264
Obs        53 =                    14
Obs        54 =                    14
Obs        55 =                   264
Obs        56 =                    15
Obs        57 =                   265
Obs        58 =                   265
Obs        59 =                    15
Obs        60 =                   266
Obs        61 =                    16
Obs        62 =                    16
Obs        63 =                    16
Obs        64 =                    17
Obs        65 =                    17
Obs        66 =                    17
Obs        67 =                   267
Obs        68 =                    18
Obs        69 =                    18
Obs        70 =                    18
Obs        71 =                    18
Obs        72 =                    19
Obs        73 =                    19
Obs        74 =                   269
Obs        75 =                   269
Obs        76 =                   270
Obs        77 =                    20
Obs        78 =                   270
Obs        79 =                    20
Obs        80 =                   271
Obs        81 =                    21
Obs        82 =                   271
Obs        83 =                    21
Obs        84 =                    22
Obs        85 =                   272
Obs        86 =                   272
Obs        87 =                    22
Obs        88 =                   273
Obs        89 =                   273
Obs        90 =                   273
Obs        91 =                   273
Obs        92 =                    24
Obs        93 =                    24
Obs        94 =                    24
Obs        95 =                    24
Obs        96 =                   275
Obs        97 =                   275
Obs        98 =                   275
Obs        99 =                   275
Obs       100 =                   276
Obs       101 =                   276
Obs       102 =                    26
Obs       103 =                    26
Obs       104 =                    27
Obs       105 =                    27
Obs       106 =                    27
Obs       107 =                   277
Obs       108 =                   278
Obs       109 =                    28
Obs       110 =                    28
Obs       111 =                    28
Obs       112 =                    29
Obs       113 =                    29
Obs       114 =                    29
Obs       115 =                    29
Obs       116 =                   280
Obs       117 =                    30
Obs       118 =                    30
Obs       119 =                    30
Obs       120 =                   281
Obs       121 =                    31
Obs       122 =                   281
Obs       123 =                    31
Obs       124 =                   282
Obs       125 =                   282
Obs       126 =                    32
Obs       127 =                    32
Obs       128 =                    33
Obs       129 =                    33
Obs       130 =                    33
Obs       131 =                    33
Obs       132 =                    34
Obs       133 =                   284
Obs       134 =                   284
Obs       135 =                    34
Obs       136 =                   285
Obs       137 =                   285
Obs       138 =                    35
Obs       139 =                   285
Obs       140 =                   286
Obs       141 =                   286
Obs       142 =                   286
Obs       143 =                    36
Obs       144 =                    37
Obs       145 =                   287
Obs       146 =                    37
Obs       147 =                   287
Obs       148 =                    38
Obs       149 =                    38
Obs       150 =                    38
Obs       151 =                   288
Obs       152 =                   289
Obs       153 =                   289
Obs       154 =                   289
Obs       155 =                   289
Obs       156 =                   290
Obs       157 =                   290
Obs       158 =                    40
Obs       159 =                    40
Obs       160 =                   291
Obs       161 =                   291
Obs       162 =                    41
Obs       163 =                   291
Obs       164 =                   292
Obs       165 =                    42
Obs       166 =                   292
Obs       167 =                   292
Obs       168 =                   293
Obs       169 =                    43
Obs       170 =                   293
Obs       171 =                   293
Obs       172 =                    44
Obs       173 =                    44
Obs       174 =                    44
Obs       175 =                   294
Obs       176 =                    45
Obs       177 =                   295
Obs       178 =                   295
Obs       179 =                   295
Obs       180 =                   296
Obs       181 =                    46
Obs       182 =                   296
Obs       183 =                    46
Obs       184 =                    47
Obs       185 =                    47
Obs       186 =                    47
Obs       187 =                   297
Obs       188 =                    48
Obs       189 =                   298
Obs       190 =                   298
Obs       191 =                    48
Obs       192 =                   299
Obs       193 =                    49
Obs       194 =                   299
Obs       195 =                   299
Obs       196 =                   300
Obs       197 =                   300
Obs       198 =                    50
Obs       199 =                    50
Obs       200 =                   301
Obs       201 =                    51
Obs       202 =                   301
Obs       203 =                   301
Obs       204 =                    52
Obs       205 =                    52
Obs       206 =                    52
Obs       207 =                   302
Obs       208 =                   303
Obs       209 =                    53
Obs       210 =                   303
Obs       211 =                   303
Obs       212 =                   304
Obs       213 =                   304
Obs       214 =                    54
Obs       215 =                    54
Obs       216 =                    55
Obs       217 =                    55
Obs       218 =                    55
Obs       219 =                    55
Obs       220 =                   306
Obs       221 =                   306
Obs       222 =                    56
Obs       223 =                   306
Obs       224 =                   307
Obs       225 =                   307
Obs       226 =                   307
Obs       227 =                    57
Obs       228 =                    58
Obs       229 =                    58
Obs       230 =                    58
Obs       231 =                    58
Obs       232 =                    59
Obs       233 =                    59
Obs       234 =                   309
Obs       235 =                    59
Obs       236 =                    60
Obs       237 =                    60
Obs       238 =                    60
Obs       239 =                   310
Obs       240 =                    61
Obs       241 =                    61
Obs       242 =                    61
Obs       243 =                   311
Obs       244 =                   312
Obs       245 =                    62
Obs       246 =                    62
Obs       247 =                    62
Obs       248 =                   313
Obs       249 =                   313
Obs       250 =                   313
Obs       251 =                    63
Obs       252 =                   314
Obs       253 =                   314
Obs       254 =                    64
Obs       255 =                   314
Obs       256 =                    65
Obs       257 =                    65
Obs       258 =                    65
Obs       259 =                   315
Obs       260 =                   316
Obs       261 =                   316
Obs       262 =                    66
Obs       263 =                   316
Obs       264 =                   317
Obs       265 =                   317
Obs       266 =                   317
Obs       267 =                    67
Obs       268 =                    68
Obs       269 =                    68
Obs       270 =                    68
Obs       271 =                    68
Obs       272 =                    69
Obs       273 =                    69
Obs       274 =                    69
Obs       275 =                    69
Obs       276 =                   320
Obs       277 =                   320
Obs       278 =                    70
Obs       279 =                   320
Obs       280 =                    71
Obs       281 =                    71
Obs       282 =                    71
Obs       283 =                   321
Obs       284 =                    72
Obs       285 =                   322
Obs       286 =                   322
Obs       287 =                    72
Obs       288 =                    73
Obs       289 =                    73
Obs       290 =                    73
Obs       291 =                    73
Obs       292 =                   324
Obs       293 =                    74
Obs       294 =                   324
Obs       295 =                    74
Obs       296 =                   325
Obs       297 =                   325
Obs       298 =                    75
Obs       299 =                    75
Obs       300 =                    76
Obs       301 =                   326
Obs       302 =                    76
Obs       303 =                    76
Obs       304 =                    77
Obs       305 =                    77
Obs       306 =                   327
Obs       307 =                   327
Obs       308 =                    78
Obs       309 =                    78
Obs       310 =                   328
Obs       311 =                    78
Obs       312 =                   329
Obs       313 =                   329
Obs       314 =                   329
Obs       315 =                   329
Obs       316 =                   330
Obs       317 =                    80
Obs       318 =                    80
Obs       319 =                   330
Obs       320 =                   331
Obs       321 =                    81
Obs       322 =                   331
Obs       323 =                    81
Obs       324 =                    82
Obs       325 =                   332
Obs       326 =                    82
Obs       327 =                   332
Obs       328 =                   333
Obs       329 =                   333
Obs       330 =                   333
Obs       331 =                   333
Obs       332 =                   334
Obs       333 =                    84
Obs       334 =                    84
Obs       335 =                   334
Obs       336 =                    85
Obs       337 =                    85
Obs       338 =                    85
Obs       339 =                    85
Obs       340 =                   336
Obs       341 =                   336
Obs       342 =                   336
Obs       343 =                    86
Obs       344 =                    87
Obs       345 =                   337
Obs       346 =                    87
Obs       347 =                   337
Obs       348 =                    88
Obs       349 =                   338
Obs       350 =                    88
Obs       351 =                    88
Obs       352 =                    89
Obs       353 =                   339
Obs       354 =                    89
Obs       355 =                    89
Obs       356 =                   340
Obs       357 =                    90
Obs       358 =                    90
Obs       359 =                   340
Obs       360 =                   341
Obs       361 =                    91
Obs       362 =                   341
Obs       363 =                   341
Obs       364 =                   342
Obs       365 =                    92
Obs       366 =                    92
Obs       367 =                   342
Obs       368 =                   343
Obs       369 =                    93
Obs       370 =                   343
Obs       371 =                    93
Obs       372 =                   344
Obs       373 =                   344
Obs       374 =                    94
Obs       375 =                   344
Obs       376 =                   345
Obs       377 =                    95
Obs       378 =                    95
Obs       379 =                    95
Obs       380 =                    96
Obs       381 =                   346
Obs       382 =                    96
Obs       383 =                   346
Obs       384 =                    97
Obs       385 =                   347
Obs       386 =                   347
Obs       387 =                    97
Obs       388 =                   348
Obs       389 =                   348
Obs       390 =                   348
Obs       391 =                   348
Obs       392 =                    99
Obs       393 =                    99
Obs       394 =                   349
Obs       395 =                    99
Obs       396 =                   350
Obs       397 =                   350
Obs       398 =                   100
Obs       399 =                   100
Obs       400 =                   351
Obs       401 =                   351
Obs       402 =                   351
Obs       403 =                   351
Obs       404 =                   352
Obs       405 =                   102
Obs       406 =                   352
Obs       407 =                   352
Obs       408 =                   103
Obs       409 =                   353
Obs       410 =                   103
Obs       411 =                   103
Obs       412 =                   104
Obs       413 =                   354
Obs       414 =                   354
Obs       415 =                   354
Obs       416 =                   355
Obs       417 =                   105
Obs       418 =                   105
Obs       419 =                   355
Obs       420 =                   356
Obs       421 =                   356
Obs       422 =                   356
Obs       423 =                   106
Obs       424 =                   107
Obs       425 =                   107
Obs       426 =                   107
Obs       427 =                   357
Obs       428 =                   358
Obs       429 =                   108
Obs       430 =                   108
Obs       431 =                   108
Obs       432 =                   359
Obs       433 =                   109
Obs       434 =                   359
Obs       435 =                   109
Obs       436 =                   360
Obs       437 =                   110
Obs       438 =                   360
Obs       439 =                   360
Obs       440 =                   111
Obs       441 =                   361
Obs       442 =                   361
Obs       443 =                   361
Obs       444 =                   362
Obs       445 =                   112
Obs       446 =                   112
Obs       447 =                   362
Obs       448 =                   113
Obs       449 =                   113
Obs       450 =                   113
Obs       451 =                   113
Obs       452 =                   364
Obs       453 =                   114
Obs       454 =                   114
Obs       455 =                   364
Obs       456 =                   365
Obs       457 =                   115
Obs       458 =                   365
Obs       459 =                   365
Obs       460 =                   116
Obs       461 =                   366
Obs       462 =                   366
Obs       463 =                   116
Obs       464 =                   367
Obs       465 =                   367
Obs       466 =                   367
Obs       467 =                   367
Obs       468 =                   118
Obs       469 =                   118
Obs       470 =                   368
Obs       471 =                   368
Obs       472 =                   119
Obs       473 =                   369
Obs       474 =                   369
Obs       475 =                   119
Obs       476 =                   120
Obs       477 =                   370
Obs       478 =                   120
Obs       479 =                   370
Obs       480 =                   121
Obs       481 =                   121
Obs       482 =                   121
Obs       483 =                   371
Obs       484 =                   372
Obs       485 =                   372
Obs       486 =                   122
Obs       487 =                   372
Obs       488 =                   123
Obs       489 =                   373
Obs       490 =                   123
Obs       491 =                   373
Obs       492 =                   124
Obs       493 =                   374
Obs       494 =                   374
Obs       495 =                   374
Obs       496 =                   125
Obs       497 =                   375
Obs       498 =                   375
Obs       499 =                   125
Obs       500 =                   126
Obs       501 =                   376
Obs       502 =                   376
Obs       503 =                   126
Obs       504 =                   377
Obs       505 =                   127
Obs       506 =                   377
Obs       507 =                   127
Obs       508 =                   128
Obs       509 =                   378
Obs       510 =                   128
Obs       511 =                   378
Obs       512 =                   379
Obs       513 =                   379
Obs       514 =                   129
Obs       515 =                   379
Obs       516 =                   380
Obs       517 =                   380
Obs       518 =                   130
Obs       519 =                   130
Obs       520 =                   131
Obs       521 =                   381
Obs       522 =                   381
Obs       523 =                   381
Obs       524 =                   132
Obs       525 =                   132
Obs       526 =                   132
Obs       527 =                   132
Obs       528 =                   383
Obs       529 =                   383
Obs       530 =                   383
Obs       531 =                   133
Obs       532 =                   134
Obs       533 =                   384
Obs       534 =                   384
Obs       535 =                   384
Obs       536 =                   385
Obs       537 =                   135
Obs       538 =                   385
Obs       539 =                   135
Obs       540 =                   136
Obs       541 =                   136
Obs       542 =                   136
Obs       543 =                   386
Obs       544 =                   137
Obs       545 =                   387
Obs       546 =                   137
Obs       547 =                   137
Obs       548 =                   388
Obs       549 =                   388
Obs       550 =                   138
Obs       551 =                   388
Obs       552 =                   139
Obs       553 =                   139
Obs       554 =                   139
Obs       555 =                   139
Obs       556 =                   390
Obs       557 =                   390
Obs       558 =                   390
Obs       559 =                   140
Obs       560 =                   141
Obs       561 =                   141
Obs       562 =                   391
Obs       563 =                   391
Obs       564 =                   392
Obs       565 =                   392
Obs       566 =                   392
Obs       567 =                   142
Obs       568 =                   393
Obs       569 =                   143
Obs       570 =                   143
Obs       571 =                   143
Obs       572 =                   394
Obs       573 =                   394
Obs       574 =                   144
Obs       575 =                   394
Obs       576 =                   145
Obs       577 =                   395
Obs       578 =                   395
Obs       579 =                   145
Obs       580 =                   396
Obs       581 =                   146
Obs       582 =                   396
Obs       583 =                   396
Obs       584 =                   147
Obs       585 =                   147
Obs       586 =                   147
Obs       587 =                   397
Obs       588 =                   148
Obs       589 =                   148
Obs       590 =                   398
Obs       591 =                   398
Obs       592 =                   399
Obs       593 =                   149
Obs       594 =                   399
Obs       595 =                   399
Obs       596 =                   150
Obs       597 =                   150
Obs       598 =                   400
Obs       599 =                   400
Obs       600 =                   151
Obs       601 =                   151
Obs       602 =                   401
Obs       603 =                   401
Obs       604 =                   152
Obs       605 =                   152
Obs       606 =                   152
Obs       607 =                   402
Obs       608 =                   403
Obs       609 =                   403
Obs       610 =                   403
Obs       611 =                   403
Obs       612 =                   154
Obs       613 =                   404
Obs       614 =                   154
Obs       615 =                   404
Obs       616 =                   155
Obs       617 =                   155
Obs       618 =                   405
Obs       619 =                   405
Obs       620 =                   156
Obs       621 =                   156
Obs       622 =                   406
Obs       623 =                   406
Obs       624 =                   157
Obs       625 =                   407
Obs       626 =                   407
Obs       627 =                   157
Obs       628 =                   408
Obs       629 =                   408
Obs       630 =                   408
Obs       631 =                   158
Obs       632 =                   409
Obs       633 =                   409
Obs       634 =                   409
Obs       635 =                   159
Obs       636 =                   160
Obs       637 =                   410
Obs       638 =                   410
Obs       639 =                   410
Obs       640 =                   161
Obs       641 =                   411
Obs       642 =                   161
Obs       643 =                   411
Obs       644 =                   412
Obs       645 =                   412
Obs       646 =                   412
Obs       647 =                   412
Obs       648 =                   163
Obs       649 =                   413
Obs       650 =                   163
Obs       651 =                   413
Obs       652 =                   414
Obs       653 =                   414
Obs       654 =                   414
Obs       655 =                   414
Obs       656 =                   415
Obs       657 =                   415
Obs       658 =                   165
Obs       659 =                   165
Obs       660 =                   166
Obs       661 =                   416
Obs       662 =                   166
Obs       663 =                   416
Obs       664 =                   417
Obs       665 =                   167
Obs       666 =                   417
Obs       667 =                   417
Obs       668 =                   418
Obs       669 =                   418
Obs       670 =                   168
Obs       671 =                   168
Obs       672 =                   169
Obs       673 =                   169
Obs       674 =                   419
Obs       675 =                   419
Obs       676 =                   420
Obs       677 =                   420
Obs       678 =                   420
Obs       679 =                   420
Obs       680 =                   171
Obs       681 =                   421
Obs       682 =                   171
Obs       683 =                   171
Obs       684 =                   172
Obs       685 =                   172
Obs       686 =                   172
Obs       687 =                   172
Obs       688 =                   423
Obs       689 =                   423
Obs       690 =                   423
Obs       691 =                   423
Obs       692 =                   424
Obs       693 =                   424
Obs       694 =                   174
Obs       695 =                   174
Obs       696 =                   175
Obs       697 =                   425
Obs       698 =                   175
Obs       699 =                   425
Obs       700 =                   176
Obs       701 =                   176
Obs       702 =                   426
Obs       703 =                   426
Obs       704 =                   427
Obs       705 =                   177
Obs       706 =                   427
Obs       707 =                   177
Obs       708 =                   178
Obs       709 =                   428
Obs       710 =                   178
Obs       711 =                   428
Obs       712 =                   179
Obs       713 =                   429
Obs       714 =                   429
Obs       715 =                   179
Obs       716 =                   180
Obs       717 =                   430
Obs       718 =                   430
Obs       719 =                   180
Obs       720 =                   431
Obs       721 =                   431
Obs       722 =                   181
Obs       723 =                   431
Obs       724 =                   182
Obs       725 =                   182
Obs       726 =                   182
Obs       727 =                   432
Obs       728 =                   433
Obs       729 =                   183
Obs       730 =                   183
Obs       731 =                   183
Obs       732 =                   434
Obs       733 =                   184
Obs       734 =                   434
Obs       735 =                   434
Obs       736 =                   185
Obs       737 =                   185
Obs       738 =                   435
Obs       739 =                   435
Obs       740 =                   186
Obs       741 =                   186
Obs       742 =                   436
Obs       743 =                   186
Obs       744 =                   187
Obs       745 =                   187
Obs       746 =                   187
Obs       747 =                   437
Obs       748 =                   188
Obs       749 =                   438
Obs       750 =                   188
Obs       751 =                   188
Obs       752 =                   189
Obs       753 =                   189
Obs       754 =                   439
Obs       755 =                   189
Obs       756 =                   440
Obs       757 =                   440
Obs       758 =                   440
Obs       759 =                   190
Obs       760 =                   191
Obs       761 =                   441
Obs       762 =                   191
Obs       763 =                   191
Obs       764 =                   192
Obs       765 =                   192
Obs       766 =                   442
Obs       767 =                   192
Obs       768 =                   193
Obs       769 =                   443
Obs       770 =                   443
Obs       771 =                   193
Obs       772 =                   194
Obs       773 =                   194
Obs       774 =                   444
Obs       775 =                   194
Obs       776 =                   195
Obs       777 =                   195
Obs       778 =                   195
Obs       779 =                   195
Obs       780 =                   196
Obs       781 =                   196
Obs       782 =                   446
Obs       783 =                   196
Obs       784 =                   447
Obs       785 =                   447
Obs       786 =                   447
Obs       787 =                   447
Obs       788 =                   448
Obs       789 =                   198
Obs       790 =                   198
Obs       791 =                   198
Obs       792 =                   449
Obs       793 =                   199
Obs       794 =                   449
Obs       795 =                   199
Obs       796 =                   200
Obs       797 =                   450
Obs       798 =                   200
Obs       799 =                   200
Obs       800 =                   451
Obs       801 =                   201
Obs       802 =                   451
Obs       803 =                   451
Obs       804 =                   452
Obs       805 =                   452
Obs       806 =                   202
Obs       807 =                   452
Obs       808 =                   453
Obs       809 =                   203
Obs       810 =                   453
Obs       811 =                   453
Obs       812 =                   454
Obs       813 =                   454
Obs       814 =                   454
Obs       815 =                   204
Obs       816 =                   205
Obs       817 =                   205
Obs       818 =                   455
Obs       819 =                   205
Obs       820 =                   206
Obs       821 =                   456
Obs       822 =                   456
Obs       823 =                   206
Obs       824 =                   457
Obs       825 =                   207
Obs       826 =                   207
Obs       827 =                   207
Obs       828 =                   458
Obs       829 =                   208
Obs       830 =                   458
Obs       831 =                   208
Obs       832 =                   459
Obs       833 =                   209
Obs       834 =                   209
Obs       835 =                   459
Obs       836 =                   210
Obs       837 =                   210
Obs       838 =                   210
Obs       839 =                   460
Obs       840 =                   211
Obs       841 =                   461
Obs       842 =                   211
Obs       843 =                   211
Obs       844 =                   462
Obs       845 =                   462
Obs       846 =                   462
Obs       847 =                   212
Obs       848 =                   463
Obs       849 =                   463
Obs       850 =                   213
Obs       851 =                   463
Obs       852 =                   464
Obs       853 =                   214
Obs       854 =                   464
Obs       855 =                   464
Obs       856 =                   215
Obs       857 =                   465
Obs       858 =                   215
Obs       859 =                   465
Obs       860 =                   466
Obs       861 =                   216
Obs       862 =                   466
Obs       863 =                   216
Obs       864 =                   467
Obs       865 =                   217
Obs       866 =                   467
Obs       867 =                   217
Obs       868 =                   468
Obs       869 =                   218
Obs       870 =                   468
Obs       871 =                   218
Obs       872 =                   219
Obs       873 =                   469
Obs       874 =                   219
Obs       875 =                   469
Obs       876 =                   220
Obs       877 =                   220
Obs       878 =                   220
Obs       879 =                   220
Obs       880 =                   471
Obs       881 =                   221
Obs       882 =                   471
Obs       883 =                   221
Obs       884 =                   222
Obs       885 =                   222
Obs       886 =                   222
Obs       887 =                   222
Obs       888 =                   473
Obs       889 =                   223
Obs       890 =                   223
Obs       891 =                   473
Obs       892 =                   224
Obs       893 =                   474
Obs       894 =                   224
Obs       895 =                   224
Obs       896 =                   475
Obs       897 =                   225
Obs       898 =                   225
Obs       899 =                   475
Obs       900 =                   476
Obs       901 =                   476
Obs       902 =                   476
Obs       903 =                   226
Obs       904 =                   477
Obs       905 =                   477
Obs       906 =                   477
Obs       907 =                   477
Obs       908 =                   478
Obs       909 =                   228
Obs       910 =                   478
Obs       911 =                   478
Obs       912 =                   229
Obs       913 =                   229
Obs       914 =                   479
Obs       915 =                   479
Obs       916 =                   230
Obs       917 =                   230
Obs       918 =                   230
Obs       919 =                   480
Obs       920 =                   231
Obs       921 =                   481
Obs       922 =                   481
Obs       923 =                   231
Obs       924 =                   482
Obs       925 =                   482
Obs       926 =                   482
Obs       927 =                   232
Obs       928 =                   233
Obs       929 =                   233
Obs       930 =                   233
Obs       931 =                   483
Obs       932 =                   234
Obs       933 =                   234
Obs       934 =                   484
Obs       935 =                   484
Obs       936 =                   235
Obs       937 =                   485
Obs       938 =                   235
Obs       939 =                   235
Obs       940 =                   486
Obs       941 =                   486
Obs       942 =                   486
Obs       943 =                   486
Obs       944 =                   237
Obs       945 =                   237
Obs       946 =                   237
Obs       947 =                   237
Obs       948 =                   488
Obs       949 =                   488
Obs       950 =                   238
Obs       951 =                   238
Obs       952 =                   239
Obs       953 =                   239
Obs       954 =                   239
Obs       955 =                   239
Obs       956 =                   490
Obs       957 =                   240
Obs       958 =                   240
Obs       959 =                   240
Obs       960 =                   241
Obs       961 =                   491
Obs       962 =                   241
Obs       963 =                   241
Obs       964 =                   242
Obs       965 =                   492
Obs       966 =                   242
Obs       967 =                   492
Obs       968 =                   493
Obs       969 =                   493
Obs       970 =                   493
Obs       971 =                   243
Obs       972 =                   494
Obs       973 =                   494
Obs       974 =                   494
Obs       975 =                   494
Obs       976 =                   495
Obs       977 =                   245
Obs       978 =                   245
Obs       979 =                   495
Obs       980 =                   246
Obs       981 =                   496
Obs       982 =                   496
Obs       983 =                   496
Obs       984 =                   247
Obs       985 =                   497
Obs       986 =                   497
Obs       987 =                   247
Obs       988 =                   498
Obs       989 =                   248
Obs       990 =                   248
Obs       991 =                   248
Obs       992 =                   249
Obs       993 =                   499
Obs       994 =                   249
Obs       995 =                   249
Obs       996 =                   250
Obs       997 =                   250
Obs       998 =                   500
Obs       999 =                   500
counting sort on hash; min = 1, max = 500
N = 1,000; 464 unbalanced groups of sizes 1 to 4
                Thread 1 processed 116 groups.
                Thread 3 processed 116 groups.
                Thread 2 processed 116 groups.
                Thread 0 processed 116 groups.
                Thread 3 processed 116 groups.
                Thread 0 processed 116 groups.
                Thread 1 processed 116 groups.
                Thread 2 processed 116 groups.
(warning: forcing multi-threaded version)
In memory: groupstr groupsub rnorm sum sd
Using 128-bit hash to index 2 by variables (string and numeric).
radix sort on hash: loops = 4, bits = 16, shift = 65,536
N = 1,000; 500 balanced groups of size 2
                Thread 2 processed 125 groups.
                Thread 1 processed 125 groups.
                Thread 0 processed 125 groups.
                Thread 3 processed 125 groups.
                Thread 0 processed 125 groups.
                Thread 3 processed 125 groups.
                Thread 2 processed 125 groups.
                Thread 1 processed 125 groups.

Passed! checks_byvars_gcollapse debug_force_multi

--------------------------------------------------------------------------------
checks_options_gcollapse debug_force_multi
--------------------------------------------------------------------------------


    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
       rsort |       178    .0186036     .295414  -.4967393   .4879563
Obs = 200; Groups = 10
  group was float now byte
  groupsub was float now byte
  grouplong was long now byte
  (1,800 bytes saved)
(warning: forcing multi-threaded version)
Parsed by variables, sources, and targets; .005 seconds
In memory: groupstr mean mean2 count count2 median median2 iqr iqr2
Generated additional targets; .001 seconds
        Plugin step 1: stata parsing done; 0.000 seconds.
Using 128-bit hash to index string by variable.
        Plugin step 2: Hashed by variables; 0.000 seconds.
radix sort on hash: loops = 4, bits = 16, shift = 65,536
        Plugin step 3: Sorted on integer-only hash index; 0.006 seconds.
        Plugin step 4: Set up variables for main group loop; 0.000 seconds.
N = 200; 10 balanced groups of size 20
                Thread 2 processed 2 groups.
                Thread 1 processed 3 groups.
                Thread 0 processed 3 groups.
                Thread 3 processed 2 groups.
        Plugin step 5.1: Read source variables in parallel; 0.000 seconds.
                Thread 3 processed 2 groups.
                Thread 1 processed 3 groups.
                Thread 2 processed 2 groups.
                Thread 0 processed 3 groups.
        Plugin step 5.2: Collapsed variables in parallel; 0.000 seconds.
        Plugin step 6: Copied collapsed variables back to stata; 0.000 seconds.
The plugin executed; .001 seconds
Program exit executed; .001 seconds
The program executed; .008 seconds
(warning: forcing multi-threaded version)
In memory: groupstr mean
Using 128-bit hash to index string by variable.
radix sort on hash: loops = 4, bits = 16, shift = 65,536
N = 200; 10 balanced groups of size 20
                Thread 2 processed 2 groups.
                Thread 1 processed 3 groups.
                Thread 0 processed 3 groups.
                Thread 3 processed 2 groups.
                Thread 3 processed 2 groups.
                Thread 0 processed 3 groups.
                Thread 2 processed 2 groups.
                Thread 1 processed 3 groups.
(warning: forcing multi-threaded version)
In memory: groupstr mean mean2 count count2 median median2 iqr iqr2
Using 128-bit hash to index string by variable.
radix sort on hash: loops = 4, bits = 16, shift = 65,536
N = 200; 10 balanced groups of size 20
                Thread 2 processed 2 groups.
                Thread 1 processed 3 groups.
                Thread 0 processed 3 groups.
                Thread 3 processed 2 groups.
                Thread 3 processed 2 groups.
                Thread 0 processed 3 groups.
                Thread 1 processed 3 groups.
                Thread 2 processed 2 groups.
(warning: forcing multi-threaded version)
In memory: groupstr mean mean2 count count2 median median2 iqr iqr2
Using 128-bit hash to index string by variable.
radix sort on hash: loops = 4, bits = 16, shift = 65,536
N = 200; 10 balanced groups of size 20
                Thread 2 processed 2 groups.
                Thread 1 processed 3 groups.
                Thread 3 processed 2 groups.
                Thread 0 processed 3 groups.
                Thread 2 processed 2 groups.
                Thread 1 processed 3 groups.
                Thread 0 processed 3 groups.
                Thread 3 processed 2 groups.
(warning: forcing multi-threaded version)
Parsed by variables, sources, and targets; .004 seconds
In memory: groupstr mean mean2 count count2 median median2 iqr iqr2
Generated additional targets; 0 seconds
        Plugin step 1: stata parsing done; 0.000 seconds.
Using 128-bit hash to index string by variable.
        Plugin step 2: Hashed by variables; 0.000 seconds.
radix sort on hash: loops = 4, bits = 16, shift = 65,536
        Plugin step 3: Sorted on integer-only hash index; 0.002 seconds.
        Plugin step 4: Set up variables for main group loop; 0.000 seconds.
N = 200; 10 balanced groups of size 20
                Thread 2 processed 2 groups.
                Thread 1 processed 3 groups.
                Thread 0 processed 3 groups.
                Thread 3 processed 2 groups.
        Plugin step 5.1: Read source variables in parallel; 0.000 seconds.
                Thread 2 processed 2 groups.
                Thread 1 processed 3 groups.
                Thread 3 processed 2 groups.
                Thread 0 processed 3 groups.
        Plugin step 5.2: Collapsed variables in parallel; 0.000 seconds.
        Plugin step 6: Copied collapsed variables back to stata; 0.000 seconds.
The plugin executed; .001 seconds
Program exit executed; .001 seconds
The program executed; .008 seconds
(warning: forcing multi-threaded version)
(warning: forcing multi-threaded version)

     +----------------------------------------------------------------------------------------------------------------------+
  1. | group |                    groupstr | groupsub | groupf~t |     rsort |     rnorm | groupl~g |      mean |     mean2 |
     |     5 | i am a modesly long string5 |        1 |      1.5 | -.4967393 |  1.271919 |        1 |  .1044588 |  .1044588 |
     |----------------------------------------------------------------------------------------------------------------------|
     |     count      |     count2      |        median      |       median2      |           iqr      |          iqr2      |
     |        15      |         15      |      .1928031      |      .1928031      |      1.020664      |      1.020664      |
     +----------------------------------------------------------------------------------------------------------------------+

     +----------------------------------------------------------------------------------------------------------------------+
  2. | group |                    groupstr | groupsub | groupf~t |     rsort |     rnorm | groupl~g |      mean |     mean2 |
     |     2 | i am a modesly long string2 |        2 |      2.5 | -.4959921 | -.3602195 |        1 | -.1430113 | -.1430113 |
     |----------------------------------------------------------------------------------------------------------------------|
     |     count      |     count2      |        median      |       median2      |           iqr      |          iqr2      |
     |        17      |         17      |     -.1972993      |     -.1972993      |      .6963608      |      .6963608      |
     +----------------------------------------------------------------------------------------------------------------------+

     +----------------------------------------------------------------------------------------------------------------------+
  3. | group |                    groupstr | groupsub | groupf~t |     rsort |     rnorm | groupl~g |      mean |     mean2 |
     |     4 | i am a modesly long string4 |        2 |      2.5 | -.4947488 |  .1444742 |        1 | -.2222908 | -.2222908 |
     |----------------------------------------------------------------------------------------------------------------------|
     |     count      |     count2      |        median      |       median2      |           iqr      |          iqr2      |
     |        17      |         17      |      .1104598      |      .1104598      |      1.181958      |      1.181958      |
     +----------------------------------------------------------------------------------------------------------------------+

     +----------------------------------------------------------------------------------------------------------------------+
  4. | group |                    groupstr | groupsub | groupf~t |     rsort |     rnorm | groupl~g |      mean |     mean2 |
     |     7 | i am a modesly long string7 |        2 |      2.5 | -.4933096 |         . |        1 | -.1137736 | -.1137736 |
     |----------------------------------------------------------------------------------------------------------------------|
     |     count      |     count2      |        median      |       median2      |           iqr      |          iqr2      |
     |        16      |         16      |     -.1217165      |     -.1217165      |      .9788984      |      .9788984      |
     +----------------------------------------------------------------------------------------------------------------------+

     +----------------------------------------------------------------------------------------------------------------------+
  5. | group |                    groupstr | groupsub | groupf~t |     rsort |     rnorm | groupl~g |      mean |     mean2 |
     |     9 | i am a modesly long string9 |        2 |      2.5 | -.4928787 | -.3353246 |        1 |  .3126179 |  .3126179 |
     |----------------------------------------------------------------------------------------------------------------------|
     |     count      |     count2      |        median      |       median2      |           iqr      |          iqr2      |
     |        18      |         18      |      .1807951      |      .1807951      |      1.488333      |      1.488333      |
     +----------------------------------------------------------------------------------------------------------------------+

     +----------------------------------------------------------------------------------------------------------------------+
  6. | group |                    groupstr | groupsub | groupf~t |     rsort |     rnorm | groupl~g |      mean |     mean2 |
     |     3 | i am a modesly long string3 |        2 |      2.5 | -.4924346 |  .4446105 |        1 |   .013172 |   .013172 |
     |----------------------------------------------------------------------------------------------------------------------|
     |     count      |     count2      |        median      |       median2      |           iqr      |          iqr2      |
     |        19      |         19      |      .0093562      |      .0093562      |      1.315342      |      1.315342      |
     +----------------------------------------------------------------------------------------------------------------------+

     +----------------------------------------------------------------------------------------------------------------------+
  7. | group |                    groupstr | groupsub | groupf~t |     rsort |     rnorm | groupl~g |      mean |     mean2 |
     |     8 | i am a modesly long string8 |        1 |      1.5 | -.4567178 |  .5727701 |        1 |  .0711485 |  .0711485 |
     |----------------------------------------------------------------------------------------------------------------------|
     |     count      |     count2      |        median      |       median2      |           iqr      |          iqr2      |
     |        19      |         19      |      .0792617      |      .0792617      |      1.485866      |      1.485866      |
     +----------------------------------------------------------------------------------------------------------------------+

     +----------------------------------------------------------------------------------------------------------------------+
  8. | group |                    groupstr | groupsub | groupf~t |     rsort |     rnorm | groupl~g |      mean |     mean2 |
     |     7 | i am a modesly long string7 |        2 |      2.5 | -.4532182 |  2.080088 |        1 | -.1137736 | -.1137736 |
     |----------------------------------------------------------------------------------------------------------------------|
     |     count      |     count2      |        median      |       median2      |           iqr      |          iqr2      |
     |        16      |         16      |     -.1217165      |     -.1217165      |      .9788984      |      .9788984      |
     +----------------------------------------------------------------------------------------------------------------------+

     +----------------------------------------------------------------------------------------------------------------------+
  9. | group |                    groupstr | groupsub | groupf~t |     rsort |     rnorm | groupl~g |      mean |     mean2 |
     |     2 | i am a modesly long string2 |        1 |      1.5 | -.4502281 | -.7801583 |        1 | -.1430113 | -.1430113 |
     |----------------------------------------------------------------------------------------------------------------------|
     |     count      |     count2      |        median      |       median2      |           iqr      |          iqr2      |
     |        17      |         17      |     -.1972993      |     -.1972993      |      .6963608      |      .6963608      |
     +----------------------------------------------------------------------------------------------------------------------+

     +----------------------------------------------------------------------------------------------------------------------+
 10. | group |                    groupstr | groupsub | groupf~t |     rsort |     rnorm | groupl~g |      mean |     mean2 |
     |     7 | i am a modesly long string7 |        1 |      1.5 | -.4433902 |  .2671025 |        1 | -.1137736 | -.1137736 |
     |----------------------------------------------------------------------------------------------------------------------|
     |     count      |     count2      |        median      |       median2      |           iqr      |          iqr2      |
     |        16      |         16      |     -.1217165      |     -.1217165      |      .9788984      |      .9788984      |
     +----------------------------------------------------------------------------------------------------------------------+
(warning: forcing multi-threaded version)
Parsed by variables, sources, and targets; .005 seconds
In memory: groupstr groupsub mean mean2 count count2 median median2 iqr iqr2
Generated additional targets; .001 seconds
        Plugin step 1: stata parsing done; 0.000 seconds.
Using 128-bit hash to index 2 by variables (string and numeric).
        Plugin step 2: Hashed by variables; 0.000 seconds.
radix sort on hash: loops = 4, bits = 16, shift = 65,536
        Plugin step 3: Sorted on integer-only hash index; 0.001 seconds.
        Plugin step 4: Set up variables for main group loop; 0.000 seconds.
N = 200; 20 balanced groups of size 10
                Thread 1 processed 5 groups.
                Thread 3 processed 5 groups.
                Thread 0 processed 5 groups.
                Thread 2 processed 5 groups.
        Plugin step 5.1: Read source variables in parallel; 0.000 seconds.
                Thread 2 processed 5 groups.
                Thread 1 processed 5 groups.
                Thread 3 processed 5 groups.
                Thread 0 processed 5 groups.
        Plugin step 5.2: Collapsed variables in parallel; 0.000 seconds.
        Plugin step 6: Copied collapsed variables back to stata; 0.000 seconds.
The plugin executed; .001 seconds
Program exit executed; .001 seconds
The program executed; .008 seconds

     +---------------------------------------------------------------------------------------------------------------------+
  1. |                     groupstr | groupsub |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |  i am a modesly long string1 |        1 |   .148119 |   .148119 |    10 |     10 |  .4689182 |  .4689182 | .4374499 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      .4374499                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
  2. |                     groupstr | groupsub |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |  i am a modesly long string1 |        2 | -.5647411 | -.5647411 |     9 |      9 | -.4193222 | -.4193222 | .5682398 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      .5682398                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
  3. |                     groupstr | groupsub |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     | i am a modesly long string10 |        1 |  .1610411 |  .1610411 |     9 |      9 |  .4849345 |  .4849345 | 1.737752 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      1.737752                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
  4. |                     groupstr | groupsub |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     | i am a modesly long string10 |        2 | -.3161891 | -.3161891 |     9 |      9 | -.5875227 | -.5875227 | 1.282631 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      1.282631                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
  5. |                     groupstr | groupsub |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |  i am a modesly long string2 |        1 | -.1089313 | -.1089313 |     8 |      8 | -.6240638 | -.6240638 | 1.177803 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      1.177803                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
  6. |                     groupstr | groupsub |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |  i am a modesly long string2 |        2 | -.1733047 | -.1733047 |     9 |      9 | -.1106931 | -.1106931 | .3520458 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      .3520458                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
  7. |                     groupstr | groupsub |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |  i am a modesly long string3 |        1 | -.2640702 | -.2640702 |     9 |      9 |  .0093562 |  .0093562 | 1.089181 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      1.089181                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
  8. |                     groupstr | groupsub |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |  i am a modesly long string3 |        2 |  .2626899 |  .2626899 |    10 |     10 |  .1121057 |  .1121057 | 1.560578 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      1.560578                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
  9. |                     groupstr | groupsub |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |  i am a modesly long string4 |        1 |  -.607608 |  -.607608 |     9 |      9 | -.6323544 | -.6323544 |  1.22591 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                       1.22591                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
 10. |                     groupstr | groupsub |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |  i am a modesly long string4 |        2 |   .211191 |   .211191 |     8 |      8 |  .4581586 |  .4581586 | 1.730011 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      1.730011                                                       |
     +---------------------------------------------------------------------------------------------------------------------+
(warning: forcing multi-threaded version)
data already sorted; indexing in stata
Parsed by variables, sources, and targets; .005 seconds
In memory: groupstr groupsub mean __000000 mean2 count count2 median median2 iqr iqr2
Generated additional targets; .001 seconds
        Plugin step 1: stata parsing done; 0.000 seconds.
Using index provided by stata (data was already soreted).
        Plugin step 2: Read in index helper; 0.000 seconds.
        Plugin step 3: Set up index from Stata; 0.000 seconds.
        Plugin step 4: Set up variables for main group loop; 0.000 seconds.
N = 200; 20 balanced groups of size 10
                Thread 2 processed 5 groups.
                Thread 1 processed 5 groups.
                Thread 0 processed 5 groups.
                Thread 3 processed 5 groups.
        Plugin step 5.1: Read source variables in parallel; 0.000 seconds.
                Thread 3 processed 5 groups.
                Thread 1 processed 5 groups.
                Thread 2 processed 5 groups.
                Thread 0 processed 5 groups.
        Plugin step 5.2: Collapsed variables in parallel; 0.000 seconds.
        Plugin step 6: Copied collapsed variables back to stata; 0.000 seconds.
The plugin executed; .001 seconds
Program exit executed; .002 seconds
The program executed; .009 seconds

     +---------------------------------------------------------------------------------------------------------------------+
  1. |                     groupstr | groupsub |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |  i am a modesly long string1 |        1 |   .148119 |   .148119 |    10 |     10 |  .4689182 |  .4689182 | .4374499 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      .4374499                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
  2. |                     groupstr | groupsub |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |  i am a modesly long string1 |        2 | -.5647411 | -.5647411 |     9 |      9 | -.4193222 | -.4193222 | .5682398 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      .5682398                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
  3. |                     groupstr | groupsub |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     | i am a modesly long string10 |        1 |  .1610411 |  .1610411 |     9 |      9 |  .4849345 |  .4849345 | 1.737752 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      1.737752                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
  4. |                     groupstr | groupsub |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     | i am a modesly long string10 |        2 | -.3161891 | -.3161891 |     9 |      9 | -.5875227 | -.5875227 | 1.282631 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      1.282631                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
  5. |                     groupstr | groupsub |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |  i am a modesly long string2 |        1 | -.1089313 | -.1089313 |     8 |      8 | -.6240638 | -.6240638 | 1.177803 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      1.177803                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
  6. |                     groupstr | groupsub |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |  i am a modesly long string2 |        2 | -.1733047 | -.1733047 |     9 |      9 | -.1106931 | -.1106931 | .3520458 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      .3520458                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
  7. |                     groupstr | groupsub |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |  i am a modesly long string3 |        1 | -.2640702 | -.2640702 |     9 |      9 |  .0093562 |  .0093562 | 1.089181 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      1.089181                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
  8. |                     groupstr | groupsub |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |  i am a modesly long string3 |        2 |  .2626899 |  .2626899 |    10 |     10 |  .1121057 |  .1121057 | 1.560578 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      1.560578                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
  9. |                     groupstr | groupsub |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |  i am a modesly long string4 |        1 |  -.607608 |  -.607608 |     9 |      9 | -.6323544 | -.6323544 |  1.22591 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                       1.22591                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
 10. |                     groupstr | groupsub |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |  i am a modesly long string4 |        2 |   .211191 |   .211191 |     8 |      8 |  .4581586 |  .4581586 | 1.730011 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      1.730011                                                       |
     +---------------------------------------------------------------------------------------------------------------------+
(warning: forcing multi-threaded version)
Parsed by variables, sources, and targets; .005 seconds
In memory: groupstr groupsub mean mean2 count count2 median median2 iqr iqr2
Generated additional targets; .001 seconds
        Plugin step 1: stata parsing done; 0.000 seconds.
Using 128-bit hash to index 2 by variables (string and numeric).
        Plugin step 2: Hashed by variables; 0.000 seconds.
radix sort on hash: loops = 4, bits = 16, shift = 65,536
        Plugin step 3: Sorted on integer-only hash index; 0.001 seconds.
        Plugin step 4: Set up variables for main group loop; 0.000 seconds.
N = 200; 20 balanced groups of size 10
                Thread 1 processed 5 groups.
                Thread 2 processed 5 groups.
                Thread 0 processed 5 groups.
                Thread 3 processed 5 groups.
        Plugin step 5.1: Read source variables in parallel; 0.000 seconds.
                Thread 3 processed 5 groups.
                Thread 0 processed 5 groups.
                Thread 2 processed 5 groups.
                Thread 1 processed 5 groups.
        Plugin step 5.2: Collapsed variables in parallel; 0.000 seconds.
        Plugin step 6: Copied collapsed variables back to stata; 0.000 seconds.
The plugin executed; .001 seconds
Program exit executed; .001 seconds
The program executed; .008 seconds

     +---------------------------------------------------------------------------------------------------------------------+
  1. | groupsub |                     groupstr |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |        1 |  i am a modesly long string1 |   .148119 |   .148119 |    10 |     10 |  .4689182 |  .4689182 | .4374499 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      .4374499                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
  2. | groupsub |                     groupstr |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |        1 | i am a modesly long string10 |  .1610411 |  .1610411 |     9 |      9 |  .4849345 |  .4849345 | 1.737752 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      1.737752                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
  3. | groupsub |                     groupstr |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |        1 |  i am a modesly long string2 | -.1089313 | -.1089313 |     8 |      8 | -.6240638 | -.6240638 | 1.177803 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      1.177803                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
  4. | groupsub |                     groupstr |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |        1 |  i am a modesly long string3 | -.2640702 | -.2640702 |     9 |      9 |  .0093562 |  .0093562 | 1.089181 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      1.089181                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
  5. | groupsub |                     groupstr |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |        1 |  i am a modesly long string4 |  -.607608 |  -.607608 |     9 |      9 | -.6323544 | -.6323544 |  1.22591 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                       1.22591                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
  6. | groupsub |                     groupstr |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |        1 |  i am a modesly long string5 |  .2804507 |  .2804507 |     9 |      9 |  .2888579 |  .2888579 | 1.065177 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      1.065177                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
  7. | groupsub |                     groupstr |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |        1 |  i am a modesly long string6 | -.2956245 | -.2956245 |     9 |      9 | -.0621759 | -.0621759 | .7851714 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      .7851714                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
  8. | groupsub |                     groupstr |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |        1 |  i am a modesly long string7 | -.3753287 | -.3753287 |     8 |      8 | -.1380016 | -.1380016 | 1.895848 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      1.895848                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
  9. | groupsub |                     groupstr |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |        1 |  i am a modesly long string8 |    .14826 |    .14826 |     9 |      9 |  .1377487 |  .1377487 | 1.701061 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      1.701061                                                       |
     +---------------------------------------------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------------------------------------------+
 10. | groupsub |                     groupstr |      mean |     mean2 | count | count2 |    median |   median2 |      iqr |
     |        1 |  i am a modesly long string9 |  .1036695 |  .1036695 |     9 |      9 | -.0753959 | -.0753959 | 1.408567 |
     |---------------------------------------------------------------------------------------------------------------------|
     |                                                          iqr2                                                       |
     |                                                      1.408567                                                       |
     +---------------------------------------------------------------------------------------------------------------------+
(warning: forcing multi-threaded version)
Parsed by variables, sources, and targets; .004 seconds
In memory: groupstr mean mean2 count count2 median median2 iqr iqr2
Generated additional targets; 0 seconds
        Plugin step 1: stata parsing done; 0.000 seconds.
Using 128-bit hash to index string by variable.
        Plugin step 2: Hashed by variables; 0.000 seconds.
radix sort on hash: loops = 4, bits = 16, shift = 65,536
        Plugin step 3: Sorted on integer-only hash index; 0.001 seconds.
        Plugin step 4: Set up variables for main group loop; 0.000 seconds.
N = 200; 10 balanced groups of size 20
                Thread 0 processed 3 groups.
                Thread 3 processed 2 groups.
                Thread 2 processed 2 groups.
                Thread 1 processed 3 groups.
        Plugin step 5.1: Read source variables in parallel; 0.000 seconds.
                Thread 3 processed 2 groups.
                Thread 0 processed 3 groups.
                Thread 1 processed 3 groups.
                Thread 2 processed 2 groups.
        Plugin step 5.2: Collapsed variables in parallel; 0.000 seconds.
        Plugin step 6: Copied collapsed variables back to stata; 0.000 seconds.
The plugin executed; .001 seconds
Program exit executed; .001 seconds
The program executed; .008 seconds
(warning: forcing multi-threaded version)
data sorted in similar order (groupstr groupsub); indexing in stata
Parsed by variables, sources, and targets; .005 seconds
In memory: groupstr mean __000000 mean2 count count2 median median2 iqr iqr2
Generated additional targets; .001 seconds
        Plugin step 1: stata parsing done; 0.000 seconds.
Using index provided by stata (data was already soreted).
        Plugin step 2: Read in index helper; 0.000 seconds.
        Plugin step 3: Set up index from Stata; 0.000 seconds.
        Plugin step 4: Set up variables for main group loop; 0.000 seconds.
N = 200; 10 balanced groups of size 20
                Thread 1 processed 3 groups.
                Thread 3 processed 2 groups.
                Thread 2 processed 2 groups.
                Thread 0 processed 3 groups.
        Plugin step 5.1: Read source variables in parallel; 0.004 seconds.
                Thread 2 processed 2 groups.
                Thread 1 processed 3 groups.
                Thread 3 processed 2 groups.
                Thread 0 processed 3 groups.
        Plugin step 5.2: Collapsed variables in parallel; 0.000 seconds.
        Plugin step 6: Copied collapsed variables back to stata; 0.000 seconds.
The plugin executed; .003 seconds
Program exit executed; .002 seconds
The program executed; .011 seconds
(warning: forcing multi-threaded version)
Parsed by variables, sources, and targets; .007 seconds
In memory: groupsub mean mean2 count count2 median median2 iqr iqr2
Generated additional targets; 0 seconds
        Plugin step 1: stata parsing done; 0.000 seconds.
Using sole integer by variable as hash.
        Plugin step 2: Hashed by variables; 0.000 seconds.
counting sort on hash; min = 1, max = 2
        Plugin step 3: Sorted on integer-only hash index; 0.000 seconds.
        Plugin step 4: Set up variables for main group loop; 0.000 seconds.
N = 200; 2 balanced groups of size 100
                Thread 3 processed 0 groups.
                Thread 2 processed 0 groups.
                Thread 1 processed 1 groups.
                Thread 0 processed 1 groups.
        Plugin step 5.1: Read source variables in parallel; 0.000 seconds.
                Thread 0 processed 1 groups.
                Thread 3 processed 0 groups.
                Thread 1 processed 1 groups.
                Thread 2 processed 0 groups.
        Plugin step 5.2: Collapsed variables in parallel; 0.000 seconds.
        Plugin step 6: Copied collapsed variables back to stata; 0.000 seconds.
The plugin executed; 0 seconds
Program exit executed; .001 seconds
The program executed; .009 seconds

     +-----------------------------------------------------------------------------------------------+
     | groupsub        mean       mean2   count   count2     median    median2        iqr       iqr2 |
     |-----------------------------------------------------------------------------------------------|
  1. |        1    -.074807    -.074807      89       89   .0792617   .0792617   1.247417   1.247417 |
  2. |        2   -.0840636   -.0840636      88       88   -.199837   -.199837   1.339579   1.339579 |
     +-----------------------------------------------------------------------------------------------+
(warning: forcing multi-threaded version)
Parsed by variables, sources, and targets; .005 seconds
In memory: groupsub mean mean2 count count2 median median2 iqr iqr2
Generated additional targets; .001 seconds
        Plugin step 1: stata parsing done; 0.000 seconds.
Using sole integer by variable as hash.
        Plugin step 2: Hashed by variables; 0.000 seconds.
counting sort on hash; min = 1, max = 2
        Plugin step 3: Sorted on integer-only hash index; 0.005 seconds.
        Plugin step 4: Set up variables for main group loop; 0.000 seconds.
N = 200; 2 balanced groups of size 100
                Thread 2 processed 0 groups.
                Thread 3 processed 0 groups.
                Thread 0 processed 1 groups.
                Thread 1 processed 1 groups.
        Plugin step 5.1: Read source variables in parallel; 0.000 seconds.
                Thread 2 processed 0 groups.
                Thread 1 processed 1 groups.
                Thread 3 processed 0 groups.
                Thread 0 processed 1 groups.
        Plugin step 5.2: Collapsed variables in parallel; 0.000 seconds.
        Plugin step 6: Copied collapsed variables back to stata; 0.000 seconds.
The plugin executed; 0 seconds
Program exit executed; .001 seconds
The program executed; .008 seconds

     +-----------------------------------------------------------------------------------------------+
     | groupsub        mean       mean2   count   count2     median    median2        iqr       iqr2 |
     |-----------------------------------------------------------------------------------------------|
  1. |        1    -.074807    -.074807      89       89   .0792617   .0792617   1.247417   1.247417 |
  2. |        2   -.0840636   -.0840636      88       88   -.199837   -.199837   1.339579   1.339579 |
     +-----------------------------------------------------------------------------------------------+

Passed! checks_options_gcollapse debug_force_multi

--------------------------------------------------------------------------------
checks_options_gegen debug_force_single
--------------------------------------------------------------------------------


    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
       rsort |     17962    .0011375    .2894874  -.4999953   .4999753
Obs = 20,000; Groups = 100
  group was float now byte
  groupsub was float now byte
  grouplong was long now byte
  (180,000 bytes saved)
(warning: forcing non-multi-threaded version)
Program set up executed in .001 seconds
        Plugin step 1: stata parsing done; 0.000 seconds.
Using 128-bit hash to index 2 by variables (string and numeric).
        Plugin step 2: Hashed by variables; 0.003 seconds.
radix sort on hash: loops = 4, bits = 16, shift = 65,536
        Plugin step 3: Sorted on integer-only hash index; 0.002 seconds.
        Plugin step 4: Set up variables for main group loop; 0.000 seconds.
N = 20,000; 200 unbalanced groups of sizes 99 to 101
        Plugin step 5.1: Read source variables sequentially; 0.001 seconds.
        Plugin step 5.2: By vars summary stats; 0.000 seconds.
        Plugin step 6: Copied output back to stata; 0.000 seconds.
The plugin executed in .007 seconds
Program exit executed in .001 seconds
The program executed in .009 seconds
(warning: forcing non-multi-threaded version)
(warning: forcing non-multi-threaded version)
(warning: forcing non-multi-threaded version)
(warning: forcing non-multi-threaded version)
(warning: forcing non-multi-threaded version)
Program set up executed in .001 seconds
        Plugin step 1: stata parsing done; 0.000 seconds.
Using 128-bit hash to index 2 by variables (string and numeric).
        Plugin step 2: Hashed by variables; 0.003 seconds.
radix sort on hash: loops = 4, bits = 16, shift = 65,536
        Plugin step 3: Sorted on integer-only hash index; 0.003 seconds.
        Plugin step 4: Set up variables for main group loop; 0.000 seconds.
N = 20,000; 200 unbalanced groups of sizes 99 to 101
        Plugin step 5.1: Read source variables sequentially; 0.003 seconds.
        Plugin step 5.2: By vars summary stats; 0.000 seconds.
        Plugin step 6: Copied output back to stata; 0.001 seconds.
The plugin executed in .01 seconds
(2200 missing values generated)
Program exit executed in .003 seconds
The program executed in .014 seconds
(warning: forcing non-multi-threaded version)
(2499 missing values generated)
(warning: forcing non-multi-threaded version)
(warning: forcing non-multi-threaded version)
(warning: forcing non-multi-threaded version)
(warning: forcing non-multi-threaded version)
(warning: forcing non-multi-threaded version)
(warning: forcing non-multi-threaded version)
(warning: forcing non-multi-threaded version)
Parsed by variables, sources, and targets; .01 seconds
In memory: group groupstr groupsub groupfloat rsort rnorm grouplong id mean sum median sd iqr first last firstnm lastnm q10 q30 
> q70 q90 g_mean g_sum g_median g_sd g_iqr g_first g_last g_firstnm g_lastnm g_q10 g_q30 g_q70 g_q90
Generated additional targets; .001 seconds
        Plugin step 1: stata parsing done; 0.000 seconds.
Using sole integer by variable as hash.
        Plugin step 2: Hashed by variables; 0.001 seconds.
counting sort on hash; min = 1, max = 200
        Plugin step 3: Sorted on integer-only hash index; 0.000 seconds.
        Plugin step 4: Set up variables for main group loop; 0.000 seconds.
N = 20,000; 200 unbalanced groups of sizes 99 to 101
        Plugin step 5.1: Read source variables sequentially; 0.001 seconds.
        Plugin step 5.2: Collapsed source variables; 0.001 seconds.
        Plugin step 6: Merged collapsed variables back to stata; 0.003 seconds.
The plugin executed; .007 seconds
Program exit executed; 0 seconds
The program executed; .019 seconds
    mean vs gcollapse was OK
    sum vs gcollapse was OK
    median vs gcollapse was OK
    sd vs gcollapse was OK
    iqr vs gcollapse was OK
    first vs gcollapse was OK
    last vs gcollapse was OK
    firstnm vs gcollapse was OK
    lastnm vs gcollapse was OK
    q10 vs gcollapse was OK
    q30 vs gcollapse was OK
    q70 vs gcollapse was OK
    q90 vs gcollapse was OK

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
       rsort |     17927    .0017544    .2886898  -.4998896   .4999995
Obs = 20,000; Groups = 100
  group was float now byte
  groupsub was float now byte
  grouplong was long now byte
  (180,000 bytes saved)
(19459 missing values generated)
(warning: forcing non-multi-threaded version)
Program set up executed in .001 seconds
        Plugin step 1: stata parsing done; 0.000 seconds.
Using 128-bit hash to index 2 by variables (string and numeric).
        Plugin step 2: Hashed by variables; 0.000 seconds.
radix sort on hash: loops = 4, bits = 16, shift = 65,536
        Plugin step 3: Sorted on integer-only hash index; 0.001 seconds.
        Plugin step 4: Set up variables for main group loop; 0.000 seconds.
N = 541; 190 unbalanced groups of sizes 1 to 7
        Plugin step 5.1: Read source variables sequentially; 0.000 seconds.
        Plugin step 5.2: By vars summary stats; 0.000 seconds.
        Plugin step 6: Copied output back to stata; 0.000 seconds.
The plugin executed in .001 seconds
(19465 missing values generated)
Program exit executed in .001 seconds
The program executed in .003 seconds
(warning: forcing non-multi-threaded version)
(19459 missing values generated)
(warning: forcing non-multi-threaded version)
(19465 missing values generated)
(warning: forcing non-multi-threaded version)
(19507 missing values generated)
(warning: forcing non-multi-threaded version)
(19465 missing values generated)
(warning: forcing non-multi-threaded version)
Program set up executed in .001 seconds
        Plugin step 1: stata parsing done; 0.000 seconds.
Using 128-bit hash to index 2 by variables (string and numeric).
        Plugin step 2: Hashed by variables; 0.000 seconds.
radix sort on hash: loops = 4, bits = 16, shift = 65,536
        Plugin step 3: Sorted on integer-only hash index; 0.001 seconds.
        Plugin step 4: Set up variables for main group loop; 0.000 seconds.
N = 541; 190 unbalanced groups of sizes 1 to 7
        Plugin step 5.1: Read source variables sequentially; 0.000 seconds.
        Plugin step 5.2: By vars summary stats; 0.000 seconds.
        Plugin step 6: Copied output back to stata; 0.000 seconds.
The plugin executed in .001 seconds
(19488 missing values generated)
Program exit executed in .001 seconds
The program executed in .003 seconds
(warning: forcing non-multi-threaded version)
(19492 missing values generated)
(warning: forcing non-multi-threaded version)
(19465 missing values generated)
(warning: forcing non-multi-threaded version)
(19465 missing values generated)
(warning: forcing non-multi-threaded version)
(19465 missing values generated)
(warning: forcing non-multi-threaded version)
(19465 missing values generated)
(warning: forcing non-multi-threaded version)
(19465 missing values generated)
(warning: forcing non-multi-threaded version)
(19465 missing values generated)
(warning: forcing non-multi-threaded version)
Parsed by variables, sources, and targets; .013 seconds
In memory: group groupstr groupsub groupfloat rsort rnorm grouplong id mean sum median sd iqr first last firstnm lastnm q10 q30 
> q70 q90 g_mean g_sum g_median g_sd g_iqr g_first g_last g_firstnm g_lastnm g_q10 g_q30 g_q70 g_q90
Generated additional targets; .002 seconds
        Plugin step 1: stata parsing done; 0.000 seconds.
Using sole integer by variable as hash.
        Plugin step 2: Hashed by variables; 0.000 seconds.
counting sort on hash; min = 1, max = 190
        Plugin step 3: Sorted on integer-only hash index; 0.000 seconds.
        Plugin step 4: Set up variables for main group loop; 0.000 seconds.
N = 541; 190 unbalanced groups of sizes 1 to 7
        Plugin step 5.1: Read source variables sequentially; 0.000 seconds.
        Plugin step 5.2: Collapsed source variables; 0.000 seconds.
        Plugin step 6: Merged collapsed variables back to stata; 0.000 seconds.
The plugin executed; 0 seconds
Program exit executed; .001 seconds
The program executed; .016 seconds
    mean vs gcollapse (in) was OK
    sum vs gcollapse (in) was OK
    median vs gcollapse (in) was OK
    sd vs gcollapse (in) was OK
    iqr vs gcollapse (in) was OK
    first vs gcollapse (in) was OK
    last vs gcollapse (in) was OK
    firstnm vs gcollapse (in) was OK
    lastnm vs gcollapse (in) was OK
    q10 vs gcollapse (in) was OK
    q30 vs gcollapse (in) was OK
    q70 vs gcollapse (in) was OK
    q90 vs gcollapse (in) was OK

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
       rsort |     18025   -.0021121    .2910941  -.4999989   .4999902
Obs = 20,000; Groups = 100
  group was float now byte
  groupsub was float now byte
  grouplong was long now byte
  (180,000 bytes saved)
(no observations)
(20000 missing values generated)
(warning: forcing non-multi-threaded version)
Program set up executed in .001 seconds
(no observations)
The plugin executed in 0 seconds
(20000 missing values generated)
Program exit executed in .001 seconds
The program executed in .002 seconds
(warning: forcing non-multi-threaded version)
(no observations)
(20000 missing values generated)
(warning: forcing non-multi-threaded version)
(no observations)
(20000 missing values generated)
(warning: forcing non-multi-threaded version)
(no observations)
(20000 missing values generated)
(warning: forcing non-multi-threaded version)
(no observations)
(20000 missing values generated)
(warning: forcing non-multi-threaded version)
Program set up executed in .001 seconds
(no observations)
The plugin executed in 0 seconds
(20000 missing values generated)
Program exit executed in .001 seconds
The program executed in .002 seconds
(warning: forcing non-multi-threaded version)
(no observations)
(20000 missing values generated)
(warning: forcing non-multi-threaded version)
(no observations)
(20000 missing values generated)
(warning: forcing non-multi-threaded version)
(no observations)
(20000 missing values generated)
(warning: forcing non-multi-threaded version)
(no observations)
(20000 missing values generated)
(warning: forcing non-multi-threaded version)
(no observations)
(20000 missing values generated)
(warning: forcing non-multi-threaded version)
(no observations)
(20000 missing values generated)
(warning: forcing non-multi-threaded version)
(no observations)
(20000 missing values generated)
(20000 observations deleted)
(warning: forcing non-multi-threaded version)
Parsed by variables, sources, and targets; .007 seconds
In memory: group groupstr groupsub groupfloat rsort rnorm grouplong id mean sum median sd iqr first last firstnm lastnm q10 q30 
> q70 q90 g_mean g_sum g_median g_sd g_iqr g_first g_last g_firstnm g_lastnm g_q10 g_q30 g_q70 g_q90
Generated additional targets; .001 seconds
The plugin executed; 0 seconds
Program exit executed; 0 seconds
The program executed; .008 seconds
(null assertion)
    mean vs gcollapse (if in) was OK
(null assertion)
    sum vs gcollapse (if in) was OK
(null assertion)
    median vs gcollapse (if in) was OK
(null assertion)
    sd vs gcollapse (if in) was OK
(null assertion)
    iqr vs gcollapse (if in) was OK
(null assertion)
    first vs gcollapse (if in) was OK
(null assertion)
    last vs gcollapse (if in) was OK
(null assertion)
    firstnm vs gcollapse (if in) was OK
(null assertion)
    lastnm vs gcollapse (if in) was OK
(null assertion)
    q10 vs gcollapse (if in) was OK
(null assertion)
    q30 vs gcollapse (if in) was OK
(null assertion)
    q70 vs gcollapse (if in) was OK
(null assertion)
    q90 vs gcollapse (if in) was OK

Passed! checks_options_gegen debug_force_single

--------------------------------------------------------------------------------
checks_options_gegen debug_force_multi
--------------------------------------------------------------------------------


    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
       rsort |     17978   -.0005915    .2888518  -.4999653   .4999261
Obs = 20,000; Groups = 100
  group was float now byte
  groupsub was float now byte
  grouplong was long now byte
  (180,000 bytes saved)
(warning: forcing multi-threaded version)
Program set up executed in .001 seconds
        Plugin step 1: stata parsing done; 0.000 seconds.
Using 128-bit hash to index 2 by variables (string and numeric).
        Plugin step 2: Hashed by variables; 0.003 seconds.
radix sort on hash: loops = 4, bits = 16, shift = 65,536
        Plugin step 3: Sorted on integer-only hash index; 0.002 seconds.
        Plugin step 4: Set up variables for main group loop; 0.000 seconds.
N = 20,000; 200 unbalanced groups of sizes 99 to 101
                Thread 3 processed 50 groups.
                Thread 1 processed 50 groups.
                Thread 0 processed 50 groups.
                Thread 2 processed 50 groups.
        Plugin step 5.1: Read source variables in parallel; 0.001 seconds.
                Thread 3 processed 0 groups.
                Thread 1 processed 0 groups.
                Thread 2 processed 0 groups.
                Thread 0 processed 0 groups.
        Plugin step 5.2: By vars summary stats; 0.000 seconds.
        Plugin step 6: Copied output back to stata; 0.000 seconds.
The plugin executed in .006 seconds
Program exit executed in .002 seconds
The program executed in .009 seconds
(warning: forcing multi-threaded version)
(warning: forcing multi-threaded version)
(warning: forcing multi-threaded version)
(warning: forcing multi-threaded version)
(warning: forcing multi-threaded version)
Program set up executed in .001 seconds
        Plugin step 1: stata parsing done; 0.000 seconds.
Using 128-bit hash to index 2 by variables (string and numeric).
        Plugin step 2: Hashed by variables; 0.009 seconds.
radix sort on hash: loops = 4, bits = 16, shift = 65,536
        Plugin step 3: Sorted on integer-only hash index; 0.011 seconds.
        Plugin step 4: Set up variables for main group loop; 0.000 seconds.
N = 20,000; 200 unbalanced groups of sizes 99 to 101
                Thread 0 processed 50 groups.
                Thread 3 processed 50 groups.
                Thread 1 processed 50 groups.
                Thread 2 processed 50 groups.
        Plugin step 5.1: Read source variables in parallel; 0.001 seconds.
                Thread 0 processed 0 groups.
                Thread 2 processed 0 groups.
                Thread 1 processed 0 groups.
                Thread 3 processed 0 groups.
        Plugin step 5.2: By vars summary stats; 0.000 seconds.
        Plugin step 6: Copied output back to stata; 0.001 seconds.
The plugin executed in .007 seconds
(1900 missing values generated)
Program exit executed in .002 seconds
The program executed in .01 seconds
(warning: forcing multi-threaded version)
(1102 missing values generated)
(warning: forcing multi-threaded version)
(warning: forcing multi-threaded version)
(warning: forcing multi-threaded version)
(warning: forcing multi-threaded version)
(warning: forcing multi-threaded version)
(warning: forcing multi-threaded version)
(warning: forcing multi-threaded version)
Parsed by variables, sources, and targets; .013 seconds
In memory: group groupstr groupsub groupfloat rsort rnorm grouplong id mean sum median sd iqr first last firstnm lastnm q10 q30 
> q70 q90 g_mean g_sum g_median g_sd g_iqr g_first g_last g_firstnm g_lastnm g_q10 g_q30 g_q70 g_q90
Generated additional targets; .002 seconds
        Plugin step 1: stata parsing done; 0.000 seconds.
Using sole integer by variable as hash.
        Plugin step 2: Hashed by variables; 0.001 seconds.
counting sort on hash; min = 1, max = 200
        Plugin step 3: Sorted on integer-only hash index; 0.000 seconds.
        Plugin step 4: Set up variables for main group loop; 0.000 seconds.
N = 20,000; 200 unbalanced groups of sizes 99 to 101
                Thread 0 processed 50 groups.
                Thread 2 processed 50 groups.
                Thread 1 processed 50 groups.
                Thread 3 processed 50 groups.
        Plugin step 5.1: Read source variables in parallel; 0.001 seconds.
                Thread 0 processed 50 groups.
                Thread 1 processed 50 groups.
                Thread 3 processed 50 groups.
                Thread 2 processed 50 groups.
        Plugin step 5.2: Collapsed variables in parallel; 0.000 seconds.
        Plugin step 6: Merged collapsed variables back to stata; 0.007 seconds.
The plugin executed; .005 seconds
Program exit executed; 0 seconds
The program executed; .02 seconds
    mean vs gcollapse was OK
    sum vs gcollapse was OK
    median vs gcollapse was OK
    sd vs gcollapse was OK
    iqr vs gcollapse was OK
    first vs gcollapse was OK
    last vs gcollapse was OK
    firstnm vs gcollapse was OK
    lastnm vs gcollapse was OK
    q10 vs gcollapse was OK
    q30 vs gcollapse was OK
    q70 vs gcollapse was OK
    q90 vs gcollapse was OK

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
       rsort |     18005    .0002261    .2884545  -.4999818   .4999899
Obs = 20,000; Groups = 100
  group was float now byte
  groupsub was float now byte
  grouplong was long now byte
  (180,000 bytes saved)
(15216 missing values generated)
(warning: forcing multi-threaded version)
Program set up executed in .002 seconds
        Plugin step 1: stata parsing done; 0.000 seconds.
Using 128-bit hash to index 2 by variables (string and numeric).
        Plugin step 2: Hashed by variables; 0.001 seconds.
radix sort on hash: loops = 4, bits = 16, shift = 65,536
        Plugin step 3: Sorted on integer-only hash index; 0.001 seconds.
        Plugin step 4: Set up variables for main group loop; 0.000 seconds.
N = 4,784; 200 unbalanced groups of sizes 12 to 35
                Thread 2 processed 50 groups.
                Thread 3 processed 50 groups.
                Thread 0 processed 50 groups.
                Thread 1 processed 50 groups.
        Plugin step 5.1: Read source variables in parallel; 0.000 seconds.
                Thread 2 processed 0 groups.
                Thread 3 processed 0 groups.
                Thread 0 processed 0 groups.
                Thread 1 processed 0 groups.
        Plugin step 5.2: By vars summary stats; 0.000 seconds.
        Plugin step 6: Copied output back to stata; 0.000 seconds.
The plugin executed in .002 seconds
(15216 missing values generated)
Program exit executed in .001 seconds
The program executed in .005 seconds
(warning: forcing multi-threaded version)
(15216 missing values generated)
(warning: forcing multi-threaded version)
(15216 missing values generated)
(warning: forcing multi-threaded version)
(15216 missing values generated)
(warning: forcing multi-threaded version)
(15216 missing values generated)
(warning: forcing multi-threaded version)
Program set up executed in .001 seconds
        Plugin step 1: stata parsing done; 0.000 seconds.
Using 128-bit hash to index 2 by variables (string and numeric).
        Plugin step 2: Hashed by variables; 0.005 seconds.
radix sort on hash: loops = 4, bits = 16, shift = 65,536
        Plugin step 3: Sorted on integer-only hash index; 0.003 seconds.
        Plugin step 4: Set up variables for main group loop; 0.000 seconds.
N = 4,784; 200 unbalanced groups of sizes 12 to 35
                Thread 1 processed 50 groups.
                Thread 0 processed 50 groups.
                Thread 2 processed 50 groups.
                Thread 3 processed 50 groups.
        Plugin step 5.1: Read source variables in parallel; 0.000 seconds.
                Thread 3 processed 0 groups.
                Thread 2 processed 0 groups.
                Thread 1 processed 0 groups.
                Thread 0 processed 0 groups.
        Plugin step 5.2: By vars summary stats; 0.000 seconds.
        Plugin step 6: Copied output back to stata; 0.000 seconds.
The plugin executed in .002 seconds
(15767 missing values generated)
Program exit executed in .002 seconds
The program executed in .006 seconds
(warning: forcing multi-threaded version)
(15599 missing values generated)
(warning: forcing multi-threaded version)
(15216 missing values generated)
(warning: forcing multi-threaded version)
(15216 missing values generated)
(warning: forcing multi-threaded version)
(15216 missing values generated)
(warning: forcing multi-threaded version)
(15216 missing values generated)
(warning: forcing multi-threaded version)
(15216 missing values generated)
(warning: forcing multi-threaded version)
(15216 missing values generated)
(warning: forcing multi-threaded version)
Parsed by variables, sources, and targets; .013 seconds
In memory: group groupstr groupsub groupfloat rsort rnorm grouplong id mean sum median sd iqr first last firstnm lastnm q10 q30 
> q70 q90 g_mean g_sum g_median g_sd g_iqr g_first g_last g_firstnm g_lastnm g_q10 g_q30 g_q70 g_q90
Generated additional targets; .001 seconds
        Plugin step 1: stata parsing done; 0.000 seconds.
Using sole integer by variable as hash.
        Plugin step 2: Hashed by variables; 0.000 seconds.
counting sort on hash; min = 1, max = 200
        Plugin step 3: Sorted on integer-only hash index; 0.000 seconds.
        Plugin step 4: Set up variables for main group loop; 0.000 seconds.
N = 4,784; 200 unbalanced groups of sizes 12 to 35
                Thread 1 processed 50 groups.
                Thread 0 processed 50 groups.
                Thread 2 processed 50 groups.
                Thread 3 processed 50 groups.
        Plugin step 5.1: Read source variables in parallel; 0.000 seconds.
                Thread 2 processed 50 groups.
                Thread 3 processed 50 groups.
                Thread 0 processed 50 groups.
                Thread 1 processed 50 groups.
        Plugin step 5.2: Collapsed variables in parallel; 0.000 seconds.
        Plugin step 6: Merged collapsed variables back to stata; 0.002 seconds.
The plugin executed; .001 seconds
Program exit executed; 0 seconds
The program executed; .016 seconds
    mean vs gcollapse (in) was OK
    sum vs gcollapse (in) was OK
    median vs gcollapse (in) was OK
    sd vs gcollapse (in) was OK
    iqr vs gcollapse (in) was OK
    first vs gcollapse (in) was OK
    last vs gcollapse (in) was OK
    firstnm vs gcollapse (in) was OK
    lastnm vs gcollapse (in) was OK
    q10 vs gcollapse (in) was OK
    q30 vs gcollapse (in) was OK
    q70 vs gcollapse (in) was OK
    q90 vs gcollapse (in) was OK

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
       rsort |     18064   -.0016395    .2877146  -.4999884   .4997601
Obs = 20,000; Groups = 100
  group was float now byte
  groupsub was float now byte
  grouplong was long now byte
  (180,000 bytes saved)
(14805 missing values generated)
(warning: forcing multi-threaded version)
Program set up executed in .001 seconds
        Plugin step 1: stata parsing done; 0.000 seconds.
Using 128-bit hash to index 2 by variables (string and numeric).
        Plugin step 2: Hashed by variables; 0.001 seconds.
radix sort on hash: loops = 4, bits = 16, shift = 65,536
        Plugin step 3: Sorted on integer-only hash index; 0.001 seconds.
        Plugin step 4: Set up variables for main group loop; 0.000 seconds.
N = 9,344; 200 unbalanced groups of sizes 34 to 58
                Thread 3 processed 50 groups.
                Thread 0 processed 50 groups.
                Thread 2 processed 50 groups.
                Thread 1 processed 50 groups.
        Plugin step 5.1: Read source variables in parallel; 0.001 seconds.
                Thread 1 processed 0 groups.
                Thread 2 processed 0 groups.
                Thread 0 processed 0 groups.
                Thread 3 processed 0 groups.
        Plugin step 5.2: By vars summary stats; 0.000 seconds.
        Plugin step 6: Copied output back to stata; 0.001 seconds.
The plugin executed in .004 seconds
(14805 missing values generated)
Program exit executed in .001 seconds
The program executed in .007 seconds
(warning: forcing multi-threaded version)
(14805 missing values generated)
(warning: forcing multi-threaded version)
(14805 missing values generated)
(warning: forcing multi-threaded version)
(14805 missing values generated)
(warning: forcing multi-threaded version)
(14805 missing values generated)
(warning: forcing multi-threaded version)
Program set up executed in .001 seconds
        Plugin step 1: stata parsing done; 0.000 seconds.
Using 128-bit hash to index 2 by variables (string and numeric).
        Plugin step 2: Hashed by variables; 0.003 seconds.
radix sort on hash: loops = 4, bits = 16, shift = 65,536
        Plugin step 3: Sorted on integer-only hash index; 0.005 seconds.
        Plugin step 4: Set up variables for main group loop; 0.000 seconds.
N = 9,344; 200 unbalanced groups of sizes 34 to 58
                Thread 2 processed 50 groups.
                Thread 1 processed 50 groups.
                Thread 0 processed 50 groups.
                Thread 3 processed 50 groups.
        Plugin step 5.1: Read source variables in parallel; 0.001 seconds.
                Thread 2 processed 0 groups.
                Thread 0 processed 0 groups.
                Thread 3 processed 0 groups.
                Thread 1 processed 0 groups.
        Plugin step 5.2: By vars summary stats; 0.000 seconds.
        Plugin step 6: Copied output back to stata; 0.001 seconds.
The plugin executed in .005 seconds
(15328 missing values generated)
Program exit executed in .002 seconds
The program executed in .008 seconds
(warning: forcing multi-threaded version)
(15327 missing values generated)
(warning: forcing multi-threaded version)
(14805 missing values generated)
(warning: forcing multi-threaded version)
(14805 missing values generated)
(warning: forcing multi-threaded version)
(14805 missing values generated)
(warning: forcing multi-threaded version)
(14805 missing values generated)
(warning: forcing multi-threaded version)
(14805 missing values generated)
(warning: forcing multi-threaded version)
(14805 missing values generated)
(14805 observations deleted)
(warning: forcing multi-threaded version)
Parsed by variables, sources, and targets; .008 seconds
In memory: group groupstr groupsub groupfloat rsort rnorm grouplong id mean sum median sd iqr first last firstnm lastnm q10 q30 
> q70 q90 g_mean g_sum g_median g_sd g_iqr g_first g_last g_firstnm g_lastnm g_q10 g_q30 g_q70 g_q90
Generated additional targets; .001 seconds
        Plugin step 1: stata parsing done; 0.000 seconds.
Using sole integer by variable as hash.
        Plugin step 2: Hashed by variables; 0.000 seconds.
counting sort on hash; min = 1, max = 200
        Plugin step 3: Sorted on integer-only hash index; 0.000 seconds.
        Plugin step 4: Set up variables for main group loop; 0.000 seconds.
N = 5,195; 200 unbalanced groups of sizes 16 to 37
                Thread 3 processed 50 groups.
                Thread 1 processed 50 groups.
                Thread 2 processed 50 groups.
                Thread 0 processed 50 groups.
        Plugin step 5.1: Read source variables in parallel; 0.000 seconds.
                Thread 3 processed 50 groups.
                Thread 1 processed 50 groups.
                Thread 2 processed 50 groups.
                Thread 0 processed 50 groups.
        Plugin step 5.2: Collapsed variables in parallel; 0.000 seconds.
        Plugin step 6: Merged collapsed variables back to stata; 0.001 seconds.
The plugin executed; .002 seconds
Program exit executed; 0 seconds
The program executed; .011 seconds
    mean vs gcollapse (if in) was OK
    sum vs gcollapse (if in) was OK
    median vs gcollapse (if in) was OK
    sd vs gcollapse (if in) was OK
    iqr vs gcollapse (if in) was OK
    first vs gcollapse (if in) was OK
    last vs gcollapse (if in) was OK
    firstnm vs gcollapse (if in) was OK
    lastnm vs gcollapse (if in) was OK
    q10 vs gcollapse (if in) was OK
    q30 vs gcollapse (if in) was OK
    q70 vs gcollapse (if in) was OK
    q90 vs gcollapse (if in) was OK

Passed! checks_options_gegen debug_force_multi

--------------------------------------------------------------------------------
checks_consistency_gcollapse debug_checkhash
--------------------------------------------------------------------------------


    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
       rsort |     44942   -.0017475    .2888192    -.49999   .4999934
Obs = 50,000; Groups = 8
  group was float now byte
  groupsub was float now byte
  grouplong was long now byte
  (450,000 bytes saved)

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
       rsort |     44898    .0011418    .2882446  -.4999226   .4999914
Obs = 50,000; Groups = 8,000
  group was float now int
  groupsub was float now byte
  grouplong was long now int
  (350,000 bytes saved)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, groupsub groupstr)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, groupstr)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, groupsub group)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, grouplong)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, groupsub groupstr)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, groupstr)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, groupsub group)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, grouplong)

Passed! checks_consistency_gcollapse debug_checkhash

--------------------------------------------------------------------------------
checks_consistency_gcollapse forceio debug_io_read_method(0)
--------------------------------------------------------------------------------


    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
       rsort |     44966    .0016058     .288164  -.4999923   .4999768
Obs = 50,000; Groups = 8
  group was float now byte
  groupsub was float now byte
  grouplong was long now byte
  (450,000 bytes saved)

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
       rsort |     44953   -.0008466    .2893584  -.4999867   .4999588
Obs = 50,000; Groups = 8,000
  group was float now int
  groupsub was float now byte
  grouplong was long now int
  (350,000 bytes saved)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, groupsub groupstr)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, groupstr)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, groupsub group)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, grouplong)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, groupsub groupstr)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, groupstr)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, groupsub group)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, grouplong)

Passed! checks_consistency_gcollapse forceio debug_io_read_method(0)

--------------------------------------------------------------------------------
checks_consistency_gcollapse forceio debug_io_read_method(1)
--------------------------------------------------------------------------------


    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
       rsort |     44965   -.0012684    .2891528  -.4999848   .4999859
Obs = 50,000; Groups = 8
  group was float now byte
  groupsub was float now byte
  grouplong was long now byte
  (450,000 bytes saved)

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
       rsort |     44957    .0011909    .2894648  -.4999929   .4999553
Obs = 50,000; Groups = 8,000
  group was float now int
  groupsub was float now byte
  grouplong was long now int
  (350,000 bytes saved)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, groupsub groupstr)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, groupstr)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, groupsub group)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, grouplong)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, groupsub groupstr)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, groupstr)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, groupsub group)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, grouplong)

Passed! checks_consistency_gcollapse forceio debug_io_read_method(1)

--------------------------------------------------------------------------------
checks_consistency_gcollapse debug_io_check(1) debug_io_threshold(0)
--------------------------------------------------------------------------------


    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
       rsort |     45061    .0027691    .2892792  -.4999973   .4999734
Obs = 50,000; Groups = 8
  group was float now byte
  groupsub was float now byte
  grouplong was long now byte
  (450,000 bytes saved)

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
       rsort |     45032   -.0017194    .2897248  -.4999961   .4999883
Obs = 50,000; Groups = 8,000
  group was float now int
  groupsub was float now byte
  grouplong was long now int
  (350,000 bytes saved)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, groupsub groupstr)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, groupstr)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, groupsub group)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, grouplong)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, groupsub groupstr)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, groupstr)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, groupsub group)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, grouplong)

Passed! checks_consistency_gcollapse debug_io_check(1) debug_io_threshold(0)

--------------------------------------------------------------------------------
checks_consistency_gcollapse debug_io_check(1) debug_io_threshold(1000000)
--------------------------------------------------------------------------------


    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
       rsort |     45030    .0003095    .2888808  -.4999433   .4999998
Obs = 50,000; Groups = 8
  group was float now byte
  groupsub was float now byte
  grouplong was long now byte
  (450,000 bytes saved)

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
       rsort |     45058    .0012775    .2891584  -.4999546   .4999493
Obs = 50,000; Groups = 8,000
  group was float now int
  groupsub was float now byte
  grouplong was long now int
  (350,000 bytes saved)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, groupsub groupstr)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, groupstr)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, groupsub group)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, grouplong)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, groupsub groupstr)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, groupstr)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, groupsub group)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, grouplong)

Passed! checks_consistency_gcollapse debug_io_check(1) debug_io_threshold(1000000)

--------------------------------------------------------------------------------
checks_consistency_gcollapse debug_force_single
--------------------------------------------------------------------------------


    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
       rsort |     44908    .0030803    .2889227  -.4999932   .4999417
Obs = 50,000; Groups = 8
  group was float now byte
  groupsub was float now byte
  grouplong was long now byte
  (450,000 bytes saved)

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
       rsort |     44968   -.0006783    .2881445  -.4999577   .4999949
Obs = 50,000; Groups = 8,000
  group was float now int
  groupsub was float now byte
  grouplong was long now int
  (350,000 bytes saved)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, groupsub groupstr)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, groupstr)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, groupsub group)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, grouplong)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, groupsub groupstr)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, groupstr)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, groupsub group)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, grouplong)

Passed! checks_consistency_gcollapse debug_force_single

--------------------------------------------------------------------------------
checks_consistency_gcollapse debug_force_multi
--------------------------------------------------------------------------------


    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
       rsort |     44948   -.0016633    .2889015  -.4999581   .4999993
Obs = 50,000; Groups = 8
  group was float now byte
  groupsub was float now byte
  grouplong was long now byte
  (450,000 bytes saved)

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
       rsort |     45038   -.0020621    .2888474  -.4999117   .4999712
Obs = 50,000; Groups = 8,000
  group was float now int
  groupsub was float now byte
  grouplong was long now int
  (350,000 bytes saved)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, groupsub groupstr)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, groupstr)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, groupsub group)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, grouplong)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, groupsub groupstr)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, groupstr)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, groupsub group)
gcollapse produced identical data to collapse (tol = 1.00000000000e-06, grouplong)

Passed! checks_consistency_gcollapse debug_force_multi

--------------------------------------------------------------------------------
checks_consistency_gegen debug_force_single b
--------------------------------------------------------------------------------


    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
       rsort |    449889    .0008101    .2887852  -.4999986    .499999
Obs = 500,000; Groups = 10,000
  group was float now int
  groupsub was float now byte
  grouplong was long now int
  (3,500,000 bytes saved)
Checking full range
    total was OK
    sum was OK
    mean was OK
    sd was OK
    max was OK
    min was OK
    count was OK
    median was OK
    iqr was OK
    percentile 10 was OK
    percentile 30 was OK
    percentile 70 was OK
    percentile 90 was OK
    tag was OK
Checking if range
    total was OK
    sum was OK
    mean was OK
    sd was OK
    max was OK
    min was OK
    count was OK
    median was OK
    iqr was OK
    percentile 10 was OK
    percentile 30 was OK
    percentile 70 was OK
    percentile 90 was OK
    tag was OK
Checking in range
    total was OK
    sum was OK
    mean was OK
    sd was OK
    max was OK
    min was OK
    count was OK
    median was OK
    iqr was OK
    percentile 10 was OK
    percentile 30 was OK
    percentile 70 was OK
    percentile 90 was OK
    tag was OK
Checking if in range
    total was OK
    sum was OK
    mean was OK
    sd was OK
    max was OK
    min was OK
    count was OK
    median was OK
    iqr was OK
    percentile 10 was OK
    percentile 30 was OK
    percentile 70 was OK
    percentile 90 was OK
    tag was OK

Passed! checks_consistency_gegen debug_force_single b

--------------------------------------------------------------------------------
checks_consistency_gegen debug_force_multi b
--------------------------------------------------------------------------------


    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
       rsort |    450035   -.0002464    .2886674  -.4999945   .4999991
Obs = 500,000; Groups = 10,000
  group was float now int
  groupsub was float now byte
  grouplong was long now int
  (3,500,000 bytes saved)
Checking full range
    total was OK
    sum was OK
    mean was OK
    sd was OK
    max was OK
    min was OK
    count was OK
    median was OK
    iqr was OK
    percentile 10 was OK
    percentile 30 was OK
    percentile 70 was OK
    percentile 90 was OK
    tag was OK
Checking if range
    total was OK
    sum was OK
    mean was OK
    sd was OK
    max was OK
    min was OK
    count was OK
    median was OK
    iqr was OK
    percentile 10 was OK
    percentile 30 was OK
    percentile 70 was OK
    percentile 90 was OK
    tag was OK
Checking in range
    total was OK
    sum was OK
    mean was OK
    sd was OK
    max was OK
    min was OK
    count was OK
    median was OK
    iqr was OK
    percentile 10 was OK
    percentile 30 was OK
    percentile 70 was OK
    percentile 90 was OK
    tag was OK
Checking if in range
    total was OK
    sum was OK
    mean was OK
    sd was OK
    max was OK
    min was OK
    count was OK
    median was OK
    iqr was OK
    percentile 10 was OK
    percentile 30 was OK
    percentile 70 was OK
    percentile 90 was OK
    tag was OK

Passed! checks_consistency_gegen debug_force_multi b
Short (quick) versions of the benchmarks
Benchmarking N for J = 100; by(x3)
    vars  = y1 y2 y3 y4 y5 y6 y7 y8 y9 y10 y11 y12 y13 y14 y15
    stats = sum
                    2,000 gcollapse  (.035)  collapse  (.018)  fcollapse  (.046)
                   20,000 gcollapse  (.03)  collapse  (.102)  fcollapse  (.032)
Results varying N for J = 100; by(x3)
|              N | gcollapse |  collapse | fcollapse | ratio (f/g) | ratio (c/g) |
| -------------- | --------- | --------- | --------- | ----------- | ----------- |
|          2,000 |      0.04 |      0.02 |      0.05 |        1.31 |        0.51 |
|         20,000 |      0.03 |      0.10 |      0.03 |        1.07 |        3.40 |
Benchmarking N for J = 100; by(x3)
    vars  = y1 y2 y3
    stats = mean median
                    2,000 gcollapse  (.009)  collapse  (.015)  fcollapse  (.009)
                   20,000 gcollapse  (.014)  collapse  (.141)  fcollapse  (.033)
Results varying N for J = 100; by(x3)
|              N | gcollapse |  collapse | fcollapse | ratio (f/g) | ratio (c/g) |
| -------------- | --------- | --------- | --------- | ----------- | ----------- |
|          2,000 |      0.01 |      0.01 |      0.01 |        1.00 |        1.67 |
|         20,000 |      0.01 |      0.14 |      0.03 |        2.36 |       10.07 |
Benchmarking N for J = 100; by(x3)
    vars  = y1 y2 y3 y4 y5 y6
    stats = sum mean count min max
                    2,000 gcollapse  (.029)  collapse  (.052)  fcollapse  (.018)
                   20,000 gcollapse  (.084)  collapse  (.642)  fcollapse  (.043)
Results varying N for J = 100; by(x3)
|              N | gcollapse |  collapse | fcollapse | ratio (f/g) | ratio (c/g) |
| -------------- | --------- | --------- | --------- | ----------- | ----------- |
|          2,000 |      0.03 |      0.05 |      0.02 |        0.62 |        1.79 |
|         20,000 |      0.08 |      0.64 |      0.04 |        0.51 |        7.64 |
Benchmarking N for J = 10; by(group)
    vars  = x1 x2
    stats = sum mean max min count percent first last firstnm lastnm median iqr p23 p77
                    2,000 gcollapse  (.025)  collapse  (.097)  fcollapse  (.019)
                   20,000 gcollapse  (.039)  collapse  (1.711)  fcollapse  (.081)
Results varying N for J = 10; by(group)
|              N | gcollapse |  collapse | fcollapse | ratio (f/g) | ratio (c/g) |
| -------------- | --------- | --------- | --------- | ----------- | ----------- |
|          2,000 |      0.03 |      0.10 |      0.02 |        0.76 |        3.88 |
|         20,000 |      0.04 |      1.71 |      0.08 |        2.08 |       43.87 |
Benchmarking J for N = 5,000; by(group)
    vars  = x1 x2
    stats = sum mean max min count percent first last firstnm lastnm median iqr p23 p77
                      100 gcollapse  (.046)  collapse  (.319)  fcollapse  (.029)
                    1,000 gcollapse  (.028)  collapse  (.406)  fcollapse  (.072)
Results varying J for N = 5,000; by(group)
|              J | gcollapse |  collapse | fcollapse | ratio (f/g) | ratio (c/g) |
| -------------- | --------- | --------- | --------- | ----------- | ----------- |
|            100 |      0.05 |      0.32 |      0.03 |        0.63 |        6.93 |
|          1,000 |      0.03 |      0.41 |      0.07 |        2.57 |       14.50 |
Benchmarking N for J = 100; by(x3)
    vars  = y1 y2 y3 y4 y5 y6 y7 y8 y9 y10 y11 y12 y13 y14 y15
    stats = sum
                    2,000 gcollapse-default  (.015)  fcollapse  (.009) 
                   20,000 gcollapse-default  (.02)  fcollapse  (.033) 
Results varying N for J = 100; by(x3)
|              N | gcollapse | fcollapse | ratio (f/g) |
| -------------- | --------- | --------- | ----------- |
|          2,000 |      0.01 |      0.01 |        0.60 |
|         20,000 |      0.02 |      0.03 |        1.65 |
Benchmarking N for J = 100; by(x3)
    vars  = y1 y2 y3
    stats = mean median
                    2,000 gcollapse-default  (.008)  fcollapse  (.008) 
                   20,000 gcollapse-default  (.013)  fcollapse  (.033) 
Results varying N for J = 100; by(x3)
|              N | gcollapse | fcollapse | ratio (f/g) |
| -------------- | --------- | --------- | ----------- |
|          2,000 |      0.01 |      0.01 |        1.00 |
|         20,000 |      0.01 |      0.03 |        2.54 |
Benchmarking N for J = 100; by(x3)
    vars  = y1 y2 y3 y4 y5 y6
    stats = sum mean count min max
                    2,000 gcollapse-default  (.023)  fcollapse  (.017) 
                   20,000 gcollapse-default  (.038)  fcollapse  (.037) 
Results varying N for J = 100; by(x3)
|              N | gcollapse | fcollapse | ratio (f/g) |
| -------------- | --------- | --------- | ----------- |
|          2,000 |      0.02 |      0.02 |        0.74 |
|         20,000 |      0.04 |      0.04 |        0.97 |
Benchmarking N for J = 10; by(group)
    vars  = x1 x2
    stats = sum mean max min count percent first last firstnm lastnm median iqr p23 p77
                    2,000 gcollapse-default  (.039)  fcollapse  (.02) 
                   20,000 gcollapse-default  (.029)  fcollapse  (.075) 
Results varying N for J = 10; by(group)
|              N | gcollapse | fcollapse | ratio (f/g) |
| -------------- | --------- | --------- | ----------- |
|          2,000 |      0.04 |      0.02 |        0.51 |
|         20,000 |      0.03 |      0.07 |        2.59 |
Benchmarking J for N = 5,000; by(group)
    vars  = x1 x2
    stats = sum mean max min count percent first last firstnm lastnm median iqr p23 p77
                      100 gcollapse-default  (.029)  fcollapse  (.032) 
                    1,000 gcollapse-default  (.031)  fcollapse  (.075) 
Results varying J for N = 5,000; by(group)
|              J | gcollapse | fcollapse | ratio (f/g) |
| -------------- | --------- | --------- | ----------- |
|            100 |      0.03 |      0.03 |        1.10 |
|          1,000 |      0.03 |      0.07 |        2.42 |

End: 17:23:09 17 Jul 2017
tests ran

tests finished running

Start: 17:15:56 17 Jul 2017
End: 17:23:09 17 Jul 2017

. 
end of do-file
